<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="../favicon.ico" />
<link href="../templets/new/style/common.css" rel="stylesheet" />
<title>第一个MyBatis程序</title>
<meta name="description" content="在创建 MyBatis 项目之前，首先创建 website 数据表，SQL 语句如下。 DROP TABLE IF EXISTS `website`;CREATE TABLE `website` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(20) COLLATE utf8_unicode_ci NOT NULL, `url` va" />
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="../c_biancheng_default.html"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="../sitemap/sitemap_3.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="../view/niz69i.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="../c_biancheng_default.html">
<img height="26" src="../templets/new/images/logo.png" alt="C语言中文网" />
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="../c_biancheng_default.html">首页</a></li>
<li><a href="../c/c_3.html">C语言教程</a></li>
<li><a href="../cplus/cplus.html">C++教程</a></li>
<li><a href="../python/python.html">Python教程</a></li>
<li><a href="../java/java_3.html">Java教程</a></li>
<li><a href="../linux_tutorial/linux_tutorial.html">Linux入门</a></li>
<li><a href="../sitemap/sitemap_3.html" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
<div id="sidebar" class="toggle-target">
<div id="contents">
<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="mybatis.html">Mybatis</a></dt>
<dd>
<span class="channel-num">1</span>
<a href="what-is-mybatis.html">MyBatis是什么</a>
</dd>
<dd>
<span class="channel-num">2</span>
<a href="mybatis-hibernate.html">MyBatis和Hibernate的区别</a>
</dd>
<dd>
<span class="channel-num">3</span>
<a href="download.html">MyBatis下载</a>
</dd>
<dd>
<span class="channel-num">4</span>
<a href="first-example.html">第一个MyBatis程序</a>
</dd>
<dd>
<span class="channel-num">5</span>
<a href="core-object.html">MyBatis核心对象</a>
</dd>
<dd>
<span class="channel-num">6</span>
<a href="config.html">MyBatis配置文件</a>
</dd>
<dd>
<span class="channel-num">7</span>
<a href="mapper.html">MyBatis映射器</a>
</dd>
<dd>
<span class="channel-num">8</span>
<a href="sql-execute.html">MyBatis执行SQL的两种方式</a>
</dd>
<dd>
<span class="channel-num">9</span>
<a href="select.html">MyBatis select标签</a>
</dd>
<dd>
<span class="channel-num">10</span>
<a href="insert.html">MyBatis insert标签</a>
</dd>
<dd>
<span class="channel-num">11</span>
<a href="update.html">MyBatis update标签</a>
</dd>
<dd>
<span class="channel-num">12</span>
<a href="delete.html">MyBatis delete标签</a>
</dd>
<dd>
<span class="channel-num">13</span>
<a href="resultmap.html">MyBatis resultMap元素</a>
</dd>
<dd>
<span class="channel-num">14</span>
<a href="annotation.html">MyBatis注解</a>
</dd>
<dd>
<span class="channel-num">15</span>
<a href="select-join.html">MyBatis关联查询</a>
</dd>
<dd>
<span class="channel-num">16</span>
<a href="one-to-one.html">MyBatis一对一关联查询</a>
</dd>
<dd>
<span class="channel-num">17</span>
<a href="one-to-many.html">MyBatis一对多关联查询</a>
</dd>
<dd>
<span class="channel-num">18</span>
<a href="many-to-many.html">MyBatis多对多关联查询</a>
</dd>
<dd>
<span class="channel-num">19</span>
<a href="sql-dynamic.html">MyBatis动态SQL</a>
</dd>
<dd>
<span class="channel-num">20</span>
<a href="if.html">MyBatis if标签</a>
</dd>
<dd>
<span class="channel-num">21</span>
<a href="choose-when-otherwise.html">MyBatis choose、when和otherwise标签</a>
</dd>
<dd>
<span class="channel-num">22</span>
<a href="where.html">MyBatis where标签</a>
</dd>
<dd>
<span class="channel-num">23</span>
<a href="set.html">MyBatis set标签</a>
</dd>
<dd>
<span class="channel-num">24</span>
<a href="foreach.html">MyBatis foreach标签</a>
</dd>
<dd>
<span class="channel-num">25</span>
<a href="bind.html">MyBatis bind标签</a>
</dd>
<dd>
<span class="channel-num">26</span>
<a href="trim.html">MyBatis trim标签</a>
</dd>
<dd>
<span class="channel-num">27</span>
<a href="paging.html">MyBatis分页</a>
</dd>
<dd>
<span class="channel-num">28</span>
<a href="cache.html">MyBatis缓存</a>
</dd>
<dd>
<span class="channel-num">29</span>
<a href="reverse.html">MyBatis逆向工程</a>
</dd>
</div>
</div>
<div id="article-wrap">
<div id="article">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../c_biancheng_default.html">首页</a> &gt; <a href="mybatis.html">Mybatis</a></span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"></div>
<h1>第一个MyBatis程序</h1>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
<div id="arc-body">在创建 MyBatis 项目之前，首先创建 website 数据表，SQL 语句如下。
<pre class="sql" shownum="false">
DROP TABLE IF EXISTS `website`;

CREATE TABLE `website` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(30) COLLATE utf8_unicode_ci DEFAULT &#39;&#39;,
  `age` tinyint(3) unsigned NOT NULL,
  `country` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT &#39;&#39;,
  `createtime` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;</pre>
创建 MyBatis 程序的步骤为：下载jar包 -&gt; 部署jar包 -&gt; 编写MyBatis核心配置文件 -&gt; 创建实体类 -&gt; 创建DAO接口 -&gt; 创建SQL映射文件 -&gt; 编写测试类<br />
<br />
下面介绍如何使用 Eclipse IDE 创建一个简单的 MyBatis 程序。<br />
<h4>
1. 创建Web应用，部署jar包</h4>
在&nbsp;Eclipse 中创建 Web 项目 mybatisDemo，并将下载的 MyBatis 的核心 jar 包、依赖 jar 包以及 MySQL 数据库的驱动 jar 包复制到 /WEB-INF/lib 目录中。下载jar包详细步骤在《<a href="download.html" target="_blank">MyBatis下载</a>》一节讲解。
<h4>
2. 创建日志文件</h4>
MyBatis 默认使用 log4j 输出日志信息，如果开发者需要查看控制台输出的 SQL 语句，可以在 classpath 路径下配置其日志文件。在 mybatisDemo 的 src 目录下创建 log4j.properties 文件，其内容如下：
<p class="info-box">
# Global logging configuration<br />
log4j.rootLogger=ERROR,stdout<br />
# MyBatis logging configuration...<br />
log4j.logger.net.biancheng=DEBUG<br />
# Console output...<br />
log4j.appender.stdout=org.apache.log4j.ConsoleAppender<br />
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout<br />
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</p>
<br />
在日志文件中配置了全局的日志配置、MyBatis 的日志配置和控制台输出，其中 MyBatis 的日志配置用于将 net.biancheng 包下所有类的日志记录级别设置为 DEBUG。该配置文件内容不需要开发者全部手写，可以从 <a href="https://mybatis.org/mybatis-3/zh/logging.html" target="_blank">MyBatis 使用手册中的 Logging 小节</a>复制，然后进行简单修改。
<h4>
3. 创建持久化类</h4>
在 src 目录下创建一个名为 net.biancheng.po 的包，在该包中创建持久化类 Website。注意，在类中声明的属性与数据表 website 的字段一致。<br />
<br />
Website 类代码如下。
<pre class="java">
package net.biancheng.po;

import java.util.Date;

public class Website {
    private int id;
    private String name;
    private String url;
    private int age;
    private String country;
    private Date createtime;

    /*省略setter和getter方法*/

    @Override
    public String toString() {
        return &quot;id&quot; + id + &quot;name&quot; + name + &quot;url&quot; + url + &quot;age&quot; + age + &quot;country&quot; + country + &quot;createtime&quot; + createtime;
    }
}</pre>
<h4>
4. 创建映射文件</h4>
在 src 目录下创建 net.biancheng.mapper 包，在该包下创建映射文件 WebsiteMapper.xml。<br />
<br />
WebsiteMapper.xml 文件内容如下。
<pre class="xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE mapper
PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;mapper namespace=&quot;net.biancheng.mapper.WebsiteMapper&quot;&gt;

    &lt;!-- 添加一个网站 --&gt;
    &lt;insert id=&quot;addWebsite&quot; parameterType=&quot;net.biancheng.po.Website&quot;&gt;
        insert into website
        (name,url,age,country)
        values(#{name},#{url},#{age},#{country})
    &lt;/insert&gt;

    &lt;!-- 查询所有网站信息 --&gt;
    &lt;select id=&quot;selectAllWebsite&quot;
        resultType=&quot;net.biancheng.po.Website&quot;&gt;
        select * from website
    &lt;/select&gt;

&lt;/mapper&gt;</pre>
上述代码中，&lt;mapper&gt; 元素是配置文件的根元素，它包含了 namespace 属性，该属性值通常设置为&ldquo;包名+SQL映射文件名&rdquo;，用于指定唯一的命名空间。<br />
<br />
子元素 &lt;select&gt;、&lt;insert&gt; 中的信息用于执行查询、添加操作。在定义的 SQL 语句中，&ldquo;#{}&rdquo;表示一个占位符，相当于&ldquo;?&rdquo;，而&ldquo;#{name}&rdquo;表示该占位符待接收参数的名称为 name。<br />
<h4>
5. 创建配置文件</h4>
MyBatis 核心配置文件主要用于配置数据库连接和 MyBatis 运行时所需的各种特性，包含了设置和影响 MyBatis 行为的属性。<br />
<br />
在 src 目录下创建 MyBatis 的核心配置文件 mybatis-config.xml，在该文件中配置了数据库环境和映射文件的位置，具体内容如下：
<pre class="xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot; /&gt;
    &lt;/settings&gt;
    &lt;!-- 配置mybatis运行环境 --&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;!-- 使用JDBC的事务管理 --&gt;
            &lt;transactionManager type=&quot;JDBC&quot; /&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;!-- MySQL数据库驱动 --&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
                &lt;!-- 连接数据库的URL --&gt;
                &lt;property name=&quot;url&quot;
                    value=&quot;jdbc:mysql://localhost:3306/test?characterEncoding=utf8&quot; /&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
                &lt;property name=&quot;password&quot; value=&quot;root&quot; /&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!-- 将mapper文件加入到配置文件中 --&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;net/biancheng/mapper/WebsiteMapper.xml&quot; /&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;</pre>
上述映射文件和配置文件都不需要读者完全手动编写，都可以从 MyBatis 使用手册中复制，然后做简单修改。<br />
<br />
为了方便管理以后各框架集成所需的配置文件，可以在项目工程下新建 Source Folder 类型的 resources 目录，并在此目录下添加 MyBatis 的核心配置文件，默认文件名为 &quot; configuration.xml&quot;。但需要注意的是，为了方便在框架集成时更好地区分各个配置文件，我们一般将此文件名命名&ldquo;mybatis-config.xml&rdquo;，该文件用于配置数据库连接信息和 MyBatis 的参数。<br />
<h4>
6. 创建测试类</h4>
在 src 目录下创建一个名为 net.biancheng.test 的包，在该包中创建 MyBatisTest 测试类。在测试类中首先使用输入流读取配置文件，然后根据配置信息构建 SqlSessionFactory 对象。<br />
<br />
接下来通过 SqlSessionFactory 对象创建 SqlSession 对象，并使用 SqlSession 对象的方法执行数据库操作。 MyBatisTest 测试类的代码如下：<br />
<pre class="java">
package net.biancheng.test;

import java.io.IOException;
import java.io.InputStream;
import java.util.List;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

import net.biancheng.po.Website;

public class Test {
    public static void main(String[] args) throws IOException {
        // 读取配置文件mybatis-config.xml
        InputStream config = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
        // 根据配置文件构建SqlSessionFactory
        SqlSessionFactory ssf = new SqlSessionFactoryBuilder().build(config);
        // 通过SqlSessionFactory创建SqlSession
        SqlSession ss = ssf.openSession();
        // SqlSession执行文件中定义的SQL，并返回映射结果
        // 添加网站
        Website website = new Website();
        website.setName(&quot;编程帮&quot;);
        website.setUrl(&quot;https://www.biancheng.net/&quot;);
        website.setAge(21);
        website.setCountry(&quot;CN&quot;);
        ss.insert(&quot;net.biancheng.mapper.WebsiteMapper.addWebsite&quot;, website);

        // 查询所有网站
        List&lt;Website&gt; listWeb = ss.selectList(&quot;net.biancheng.mapper.WebsiteMapper.selectAllWebsite&quot;);
        for (Website site : listWeb) {
            System.out.println(site);
        }
        // 提交事务
        ss.commit();
        // 关闭 SqlSession
        ss.close();
    }

}</pre>
运行结果如下。
<p class="info-box">
DEBUG [main] - ==&gt;&nbsp; Preparing: insert into website (name,url,age,country) values(?,?,?,?)<br />
DEBUG [main] - ==&gt; Parameters: 编程帮(String), https://www.biancheng.net/(String), 21(Integer), CN(String)<br />
DEBUG [main] - &lt;==&nbsp;&nbsp;&nbsp; Updates: 1<br />
DEBUG [main] - ==&gt;&nbsp; Preparing: select * from website<br />
DEBUG [main] - ==&gt; Parameters:<br />
DEBUG [main] - &lt;==&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Total: 1<br />
Website[id=1,name=编程帮,url=https://www.biancheng.net/,age=21,country=CN,createtime=Tue Feb 23 10:20:40 CST 2021]</p>
</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
<p style="margin-top:12px; text-align:center;">
<img src="../templets/new/images/material/qrcode_mp.png" alt="公众号二维码" width="160" /><br />
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="nice-arcs" class="box-bottom">
<h4>推荐阅读</h4>
<ul class="clearfix">
<li><a href="../view/niz69i_4.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="../view/tnnfqo_2.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="../view/unnurw_2.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="../view/88.html" title="Go语言GOPATH详解（Go语言工作目录）" target="_blank">Go语言GOPATH详解（Go语言工作目录）</a></li>
<li><a href="../view/342.html" title="strlen函数与sizeof的区别，C语言strlen与sizeof的区别详解" target="_blank">strlen函数与sizeof的区别，C语言strlen与sizeof的区别详解</a></li>
<li><a href="../view/590.html" title="C++(STL) all_of、any_of及none_of算法详解" target="_blank">C++(STL) all_of、any_of及none_of算法详解</a></li>
<li><a href="../view/1088.html" title="Linux lsof命令：列出进程调用或打开的文件信息" target="_blank">Linux lsof命令：列出进程调用或打开的文件信息</a></li>
<li><a href="../view/vip_1794.html" title="C语言在屏幕的任意位置输出字符，开发小游戏的第一步" target="_blank">C语言在屏幕的任意位置输出字符，开发小游戏的第一步</a></li>
<li><a href="../view/vip_7719.html" title="C++ map容器operator[]和insert()效率对比（深度剖析）" target="_blank">C++ map容器operator[]和insert()效率对比（深度剖析）</a></li>
<li><a href="../python_spider/scrapy-case.html" title="Python Scrapy爬虫框架实战应用" target="_blank">Python Scrapy爬虫框架实战应用</a></li>
</ul>
</div>
</div>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 8749;
window.arcId = "ec77Ak3borUbLUwTs76En4VRM2jfWI/ZmUYixsiucs8UEE296D/w35+Ozw4";
window.typeidChain = "295";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="../view/8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="../view/8092_2.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="../view/8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="../view/9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="../view/8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="../sitemap/sitemap_3.html" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="https://c.biancheng.net/templets/new/images/logo_bottom.gif" alt="底部Logo" />
<span id="return-top"><b>↑</b></span>
</div>
<div id="addweixin-widget">
<p>
<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://c.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
<img src="../templets/new/images/material/qrcode_mp_2.png" alt="微信交流群" width="120" />
<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
</p>
<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/mybatis/download.html";
window.nextPageURL = "/mybatis/core-object.html";
</script>
<script src="../templets/new/script/jquery1.12.4.min.js"></script>
<script src="https://c.biancheng.net/templets/new/script/common.js"></script>
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
</body>
</html>