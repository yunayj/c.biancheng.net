<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<!-- 启用Chromium高速渲染模式 -->
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<!-- 禁止百度转码 -->
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!-- 禁止识别电话号码 -->
<meta name="format-detection" content="telephone=no" />

<link rel="shortcut icon" href="../favicon_3.ico" />
<link href="../templets/new/style/common_2.css" rel="stylesheet" />
<title>Spring Boot国际化</title>
<meta name="description" content="国际化（Internationalization 简称 I18n，其中I和n分别为首末字符，18 则为中间的字符数）是指软件开发时应该具备支持多种语言和地区的功能。换句话说就是，开发的软件需要能同时应对不" />
</head>
<body>
<div id="topbar" class="clearfix">
	<ul id="product-type" class="left">
		<li>
			<a href="../m_biancheng_default_2.html"><span class="iconfont iconfont-home"></span>首页</a>
		</li>
		<li class="active">
			<a href="../sitemap/sitemap_2.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
		</li>
		<li>
			<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
		</li>
		<li>
			<a href="../view/niz69i_5.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
		</li>
		<!-- <li>
			<a href="https://www.54benniao.com/c_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-c-course"></span>C语言高级课程</a>
		</li>
		<li>
			<a href="https://www.54benniao.com/java_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-java-course"></span>Java高级课程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/q2a/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-q2a"></span>一对一答疑</a>
		</li> -->
	</ul>
</div>
<div id="header" class="clearfix">
	<a id="logo" class="left" href="../m_biancheng_default_2.html">
		<img height="26" src="../templets/new/images/logo_2.png" alt="C语言中文网" />
	</a>
	<ul id="nav-main" class="hover-none left clearfix">
		<li class="wap-yes"><a href="../m_biancheng_default_2.html">首页</a></li>
		<li><a href="../c/c_4.html">C语言教程</a></li>
		<li><a href="../cplus/cplus_2.html">C++教程</a></li>
		<li><a href="../python/python_2.html">Python教程</a></li>
		<li><a href="../java/java_2.html">Java教程</a></li>
		<li><a href="../linux_tutorial/linux_tutorial_2.html">Linux入门</a></li>
		<li><a href="../sitemap/sitemap_2.html" title="网站地图">更多&gt;&gt;</a></li>
	</ul>
	<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>

	<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
	<div id="sidebar" class="toggle-target">
	<div id="contents">
		<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="spring_boot_2.html">Spring Boot</a></dt>
		<dd>
        	<span class="channel-num">1</span>
        	<a href="overview_2.html">Spring Boot是什么</a>
        </dd>
<dd>
        	<span class="channel-num">2</span>
        	<a href="example_2.html">创建Spring Boot项目</a>
        </dd>
<dd>
        	<span class="channel-num">3</span>
        	<a href="starter_2.html">Spring Boot starter</a>
        </dd>
<dd>
        	<span class="channel-num">4</span>
        	<a href="yaml_2.html">YAML</a>
        </dd>
<dd>
        	<span class="channel-num">5</span>
        	<a href="config-bind_2.html">Spring Boot配置绑定</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">6</span>
        	<a href="import-spring-config_2.html">Spring Boot导入Spring配置</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">7</span>
        	<a href="profile_2.html">Spring Boot Profile</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">8</span>
        	<a href="default-config_2.html">Spring Boot默认配置文件</a>
        </dd>
<dd>
        	<span class="channel-num">9</span>
        	<a href="external-config_2.html">Spring Boot外部配置文件</a>
        </dd>
<dd>
        	<span class="channel-num">10</span>
        	<a href="config-order_2.html">Spring Boot配置加载顺序</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">11</span>
        	<a href="auto-config_2.html">Spring Boot自动配置原理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">12</span>
        	<a href="slf4j-logback_2.html">Spring Boot统一日志框架</a>
        </dd>
<dd>
        	<span class="channel-num">13</span>
        	<a href="log-config_2.html">Spring Boot日志配置及输出</a>
        </dd>
<dd>
        	<span class="channel-num">14</span>
        	<a href="starter-web_2.html">spring-boot-starter-web</a>
        </dd>
<dd>
        	<span class="channel-num">15</span>
        	<a href="static-mapping_2.html">Spring Boot静态资源映射</a>
        </dd>
<dd>
        	<span class="channel-num">16</span>
        	<a href="thymeleaf_2.html">Thymeleaf</a>
        </dd>
<dd>
        	<span class="channel-num">17</span>
        	<a href="thymeleaf-import_2.html">Spring Boot整合Thymeleaf</a>
        </dd>
<dd>
        	<span class="channel-num">18</span>
        	<a href="spring-mvc_2.html">Spring Boot定制Spring MVC</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">19</span>
        	<a href="global_2.html">Spring Boot国际化</a>
        </dd>
<dd>
        	<span class="channel-num">20</span>
        	<a href="interceptor_2.html">Spring Boot拦截器</a>
        </dd>
<dd>
        	<span class="channel-num">21</span>
        	<a href="default-exception_2.html">Spring Boot默认异常处理</a>
        </dd>
<dd>
        	<span class="channel-num">22</span>
        	<a href="global-exception_2.html">Spring Boot全局异常处理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">23</span>
        	<a href="servlet-filter-listener_2.html">Spring Boot注册Web原生组件</a>
        </dd>
<dd>
        	<span class="channel-num">24</span>
        	<a href="jdbc_2.html">Spring Boot JDBC访问数据库</a>
        </dd>
<dd>
        	<span class="channel-num">25</span>
        	<a href="datasource-cofig_2.html">Spring Boot数据源配置原理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">26</span>
        	<a href="druid_2.html">Spring Boot整合Druid数据源</a>
        </dd>
<dd>
        	<span class="channel-num">27</span>
        	<a href="mybatis_2.html">Spring Boot整合MyBatis</a>
        </dd>
<dd>
        	<span class="channel-num">28</span>
        	<a href="custom-starter_2.html">Spring Boot自定义starter</a><span class="iconfont iconfont-vip2"></span>
        </dd>

	</div>
</div>
	<div id="article-wrap">
		<div id="article">
			<div class="arc-info">
	<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../m_biancheng_default_2.html">首页</a> &gt; <a href="spring_boot_2.html">Spring Boot</a></span>
</div>

<div id="ggxc-position-bottom" class="ggxc-box"></div>
			<h1>Spring Boot国际化</h1>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
			<div id="arc-body">国际化（Internationalization 简称 I18n，其中&ldquo;I&rdquo;和&ldquo;n&rdquo;分别为首末字符，18 则为中间的字符数）是指软件开发时应该具备支持多种语言和地区的功能。换句话说就是，开发的软件需要能同时应对不同国家和地区的用户访问，并根据用户地区和语言习惯，提供相应的、符合用具阅读习惯的页面和数据，例如，为中国用户提供汉语界面显示，为美国用户提供提供英语界面显示。<br />
<br />
在 Spring 项目中实现国际化，通常需要以下 3 步：
<ol>
	<li>
		编写国际化资源（配置）文件；</li>
	<li>
		使用 ResourceBundleMessageSource 管理国际化资源文件；</li>
	<li>
		在页面获取国际化内容。</li>
</ol>
<h2>
	1. 编写国际化资源文件</h2>
在 Spring Boot&nbsp; 的类路径下创建国际化资源文件，文件名格式为：基本名_语言代码_国家或地区代码，例如&nbsp;login_en_US.properties、login_zh_CN.properties。<br />
<br />
以&nbsp;spring-boot-springmvc-demo1为例，在 src/main/resources 下创建一个 i18n 的目录，并在该目录中按照国际化资源文件命名格式分别创建以下三个文件，<br />
<ul>
	<li>
		login.properties：无语言设置时生效</li>
	<li>
		login_en_US.properties ：英语时生效</li>
	<li>
		login_zh_CN.properties：中文时生效</li>
</ul>
<br />
以上国际化资源文件创建完成后，IDEA 会自动识别它们，并转换成如下的模式：<br />
<br />
<div style="text-align: center;">
	<img alt="" src="../uploads/allimg/210726/1601333623-0_2.png" /></div>
<div style="text-align: center;">
	图1：国际化资源文件</div>
<br />
打开任意一个国际化资源文件，并切换为 Resource Bundle 模式，然后点击&ldquo;+&rdquo;号，创建所需的国际化属性，如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="国际化配置文件" src="../uploads/allimg/210726/1601333350-1_2.png" /></div>
<div style="text-align: center;">
	图2：编辑国际化资源文件</div>
<h2>
	2. 使用 ResourceBundleMessageSource 管理国际化资源文件</h2>
Spring Boot 已经对 ResourceBundleMessageSource&nbsp; 提供了默认的自动配置。<br />
<br />
Spring Boot 通过 MessageSourceAutoConfiguration 对 ResourceBundleMessageSource&nbsp;提供了默认配置，其部分源码如下。
<pre class="java">
@Configuration(proxyBeanMethods = false)
@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)
@Conditional(org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration.ResourceBundleCondition.class)
@EnableConfigurationProperties
public class MessageSourceAutoConfiguration {

    private static final Resource[] NO_RESOURCES = {};

    // 将 MessageSourceProperties 以组件的形式添加到容器中
    // MessageSourceProperties 下的每个属性都与以 spring.messages 开头的属性对应
    @Bean
    @ConfigurationProperties(prefix = &quot;spring.messages&quot;)
    public MessageSourceProperties messageSourceProperties() {
        return new MessageSourceProperties();
    }

    //Spring Boot 会从容器中获取 MessageSourceProperties
    // 读取国际化资源文件的 basename（基本名）、encoding（编码）等信息
    // 并封装到 ResourceBundleMessageSource 中
    @Bean
    public MessageSource messageSource(MessageSourceProperties properties) {
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        //读取国际化资源文件的 basename (基本名),并封装到 ResourceBundleMessageSource 中
        if (StringUtils.hasText(properties.getBasename())) {
            messageSource.setBasenames(StringUtils
                    .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename())));
        }
        //读取国际化资源文件的 encoding (编码),并封装到 ResourceBundleMessageSource 中
        if (properties.getEncoding() != null) {
            messageSource.setDefaultEncoding(properties.getEncoding().name());
        }
        messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());
        Duration cacheDuration = properties.getCacheDuration();
        if (cacheDuration != null) {
            messageSource.setCacheMillis(cacheDuration.toMillis());
        }
        messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());
        messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());
        return messageSource;
    }
    ...
}</pre>
<br />
从以上源码可知：<br />
<ul>
	<li>
		Spring Boot 将 MessageSourceProperties 以组件的形式添加到容器中；</li>
	<li>
		MessageSourceProperties 的属性与配置文件中以&ldquo;spring.messages&rdquo;开头的配置进行了绑定；</li>
	<li>
		Spring Boot 从容器中获取&nbsp;MessageSourceProperties 组件，并从中读取国际化资源文件的 basename（文件基本名）、encoding（编码）等信息，将它们封装到&nbsp;ResourceBundleMessageSource 中；</li>
	<li>
		Spring Boot 将 ResourceBundleMessageSource 以组件的形式添加到容器中，进而实现对国际化资源文件的管理。</li>
</ul>
<br />
查看&nbsp;MessageSourceProperties 类，其代码如下。
<pre class="java">
public class MessageSourceProperties {
    private String basename = &quot;messages&quot;;
    private Charset encoding;
    @DurationUnit(ChronoUnit.SECONDS)
    private Duration cacheDuration;
    private boolean fallbackToSystemLocale;
    private boolean alwaysUseMessageFormat;
    private boolean useCodeAsDefaultMessage;

    public MessageSourceProperties() {
        this.encoding = StandardCharsets.UTF_8;
        this.fallbackToSystemLocale = true;
        this.alwaysUseMessageFormat = false;
        this.useCodeAsDefaultMessage = false;
    }
    ...
}</pre>
<br />
通过以上代码，我们可以得到以下 3 点信息：
<ul>
	<li>
		MessageSourceProperties 为 basename、encoding 等属性提供了默认值；</li>
	<li>
		basename&nbsp;表示国际化资源文件的基本名，其默认取值为&ldquo;message&rdquo;，即 Spring Boot 默认会获取类路径下的 message.properties 以及 message_XXX.properties 作为国际化资源文件；</li>
	<li>
		在 application.porperties/yml 等配置文件中，使用配置参数&ldquo;spring.messages.basename&rdquo;即可重新指定国际化资源文件的基本名。</li>
</ul>
<br />
通过以上源码分析可知，Spring Boot 已经对国际化资源文件的管理提供了默认自动配置，我们这里只需要在 Spring Boot 全局配置文件中，使用配置参数&ldquo;spring.messages.basename&rdquo;指定我们自定义的国际资源文件的基本名即可，代码如下（当指定多个资源文件时，用逗号分隔）。
<pre class="porperties">
spring.messages.basename=i18n.login</pre>
<h2>
	3. 获取国际化内容</h2>
由于页面使用的是 Tymeleaf 模板引擎，因此我们可以通过表达式 #{...} 获取国际化内容。<br />
<br />
以 spring-boot-adminex 为例，在 login.html 中获取国际化内容，代码如下。
<pre class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0&quot;&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;
    &lt;meta name=&quot;author&quot; content=&quot;ThemeBucket&quot;&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;#&quot; type=&quot;image/png&quot;&gt;
    &lt;title&gt;Login&lt;/title&gt;
    &lt;!--将js css 等静态资源的引用修改为 绝对路径--&gt;
    &lt;link href=&quot;css/style.css&quot; th:href=&quot;@{/css/style.css}&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link href=&quot;css/style-responsive.css&quot; th:href=&quot;@{/css/style-responsive.css}&quot; rel=&quot;stylesheet&quot;&gt;

    &lt;!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --&gt;
    &lt;!--[if lt IE 9]&gt;

    &lt;script src=&quot;js/html5shiv.js&quot; th:src=&quot;@{/js/html5shiv.js}&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;js/respond.min.js&quot; th:src=&quot;@{/js/respond.min.js}&quot;&gt;&lt;/script&gt;
    &lt;![endif]--&gt;
&lt;/head&gt;

&lt;body class=&quot;login-body&quot;&gt;
&lt;div class=&quot;container&quot;&gt;

    &lt;form class=&quot;form-signin&quot; th:action=&quot;@{/user/login}&quot; method=&quot;post&quot;&gt;
        &lt;div class=&quot;form-signin-heading text-center&quot;&gt;
            &lt;h1 class=&quot;sign-title&quot; th:text=&quot;#{login.btn}&quot;&gt;Sign In&lt;/h1&gt;
            &lt;img src=&quot;/images/login-logo.png&quot; th:src=&quot;@{/images/login-logo.png}&quot; alt=&quot;&quot;/&gt;
        &lt;/div&gt;
        &lt;div class=&quot;login-wrap&quot;&gt;
            &lt;p style=&quot;color: red&quot; th:text=&quot;${msg}&quot; th:if=&quot;${not #strings.isEmpty(msg)}&quot;&gt;&lt;/p&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;username&quot; placeholder=&quot;User ID&quot; autofocus
                   th:placeholder=&quot;#{login.username}&quot;/&gt;
            &lt;input type=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot; placeholder=&quot;Password&quot;
                   th:placeholder=&quot;#{login.password}&quot;/&gt;
            &lt;label class=&quot;checkbox&quot;&gt;
                &lt;input type=&quot;checkbox&quot; value=&quot;remember-me&quot; th:text=&quot;#{login.remember}&quot;&gt;
                &lt;span class=&quot;pull-right&quot;&gt;
                    &lt;a data-toggle=&quot;modal&quot; href=&quot;#myModal&quot; th:text=&quot;#{login.forgot}&quot;&gt; &lt;/a&gt;
                &lt;/span&gt;
            &lt;/label&gt;
            &lt;button class=&quot;btn btn-lg btn-login btn-block&quot; type=&quot;submit&quot;&gt;
                &lt;i class=&quot;fa fa-check&quot;&gt;&lt;/i&gt;
            &lt;/button&gt;

            &lt;div class=&quot;registration&quot;&gt;
                &lt;!--Thymeleaf 行内写法--&gt;
                [[#{login.not-a-member}]]
                &lt;a class=&quot;&quot; href=&quot;/registration.html&quot; th:href=&quot;@{/registration.html}&quot;&gt;
                    [[#{login.signup}]]
                &lt;/a&gt;
                &lt;!--thymeleaf 模板引擎的参数用（）代替 ？--&gt;
                &lt;br/&gt;
                &lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#39;zh_CN&#39;)}&quot;&gt;中文&lt;/a&gt;|
                &lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#39;en_US&#39;)}&quot;&gt;English&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- Modal --&gt;
        &lt;div aria-hidden=&quot;true&quot; aria-labelledby=&quot;myModalLabel&quot; role=&quot;dialog&quot; tabindex=&quot;-1&quot; id=&quot;myModal&quot;
             class=&quot;modal fade&quot;&gt;
            &lt;div class=&quot;modal-dialog&quot;&gt;
                &lt;div class=&quot;modal-content&quot;&gt;
                    &lt;div class=&quot;modal-header&quot;&gt;
                        &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/button&gt;
                        &lt;h4 class=&quot;modal-title&quot;&gt;Forgot Password ?&lt;/h4&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;modal-body&quot;&gt;
                        &lt;p&gt;Enter your e-mail address below to reset your password.&lt;/p&gt;
                        &lt;input type=&quot;text&quot; name=&quot;email&quot; placeholder=&quot;Email&quot; autocomplete=&quot;off&quot;
                               class=&quot;form-control placeholder-no-fix&quot;&gt;

                    &lt;/div&gt;
                    &lt;div class=&quot;modal-footer&quot;&gt;
                        &lt;button data-dismiss=&quot;modal&quot; class=&quot;btn btn-default&quot; type=&quot;button&quot;&gt;Cancel&lt;/button&gt;
                        &lt;button class=&quot;btn btn-primary&quot; type=&quot;button&quot;&gt;Submit&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- modal --&gt;
    &lt;/form&gt;
&lt;/div&gt;
&lt;!-- Placed js at the end of the document so the pages load faster --&gt;
&lt;!-- Placed js at the end of the document so the pages load faster --&gt;
&lt;script src=&quot;js/jquery-1.10.2.min.js&quot; th:src=&quot;@{/js/jquery-1.10.2.min.js}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;js/bootstrap.min.js&quot; th:src=&quot;@{/js/bootstrap.min.js}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;js/modernizr.min.js&quot; th:src=&quot;@{/js/modernizr.min.js}&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<h2>
	验证</h2>
启动 Spring Boot，使用浏览器访问登陆页，此时浏览器默认使用中文，结果如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="国际化中文" src="../uploads/allimg/210726/160133N32-2_2.png" /></div>
<div style="text-align: center;">
	图3：中文登陆页</div>
<br />
将浏览器语言切换为英文，再次访问登陆页，结果如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="国际化-英语" src="../uploads/allimg/210726/1601333218-3_2.png" /></div>
<div style="text-align: center;">
	图4：英文登录页（猛击图片，查看原图）</div>
<h2>
	手动切换语言</h2>
如下图所示，在登陆页（login.html）最下方有两个切换语言的链接，想要通过点击它们来切换进行国际化的语言，该怎么做呢？<br />
<br />
<div style="text-align: center;">
	<img alt="国际化切换按钮" src="../uploads/allimg/210726/16013322A-4_2.png" style="border-width: 1px; border-style: solid;" /></div>
<div style="text-align: center;">
	图5：切换语言按钮</div>
<h4>
	区域信息解析器自动配置</h4>
我们知道，Spring MVC 进行国际化时有 2 个十分重要的对象：
<ul>
	<li>
		Locale：区域信息对象</li>
	<li>
		LocaleResolver：区域信息解析器，容器中的组件，负责获取区域信息对象</li>
</ul>
<br />
我们可以通过以上两个对象对区域信息的切换，以达到切换语言的目的。<br />
<br />
Spring Boot 在 WebMvcAutoConfiguration 中为区域信息解析器（LocaleResolver）进行了自动配置，源码如下。
<pre class="java">
    @Bean
    @ConditionalOnMissingBean(name = DispatcherServlet.LOCALE_RESOLVER_BEAN_NAME)
    @SuppressWarnings(&quot;deprecation&quot;)
    public LocaleResolver localeResolver() {
        if (this.webProperties.getLocaleResolver() == WebProperties.LocaleResolver.FIXED) {
            return new FixedLocaleResolver(this.webProperties.getLocale());
        }
        if (this.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {
            return new FixedLocaleResolver(this.mvcProperties.getLocale());
        }
        AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();
        Locale locale = (this.webProperties.getLocale() != null) ? this.webProperties.getLocale()
                : this.mvcProperties.getLocale();
        localeResolver.setDefaultLocale(locale);
        return localeResolver;
    }</pre>
<br />
从以上源码可知：
<ul>
	<li>
		该方法默认向容器中添加了一个区域信息解析器（LocaleResolver）组件，它会根据请求头中携带的&ldquo;Accept-Language&rdquo;参数，获取相应区域信息（Locale）对象。</li>
	<li>
		该方法上使用了 @ConditionalOnMissingBean 注解，其参数 name 的取值为 localeResolver（与该方法注入到容器中的组件名称一致），该注解的含义为：当容器中不存在名称为 localResolver 组件时，该方法才会生效。换句话说，当我们手动向容器中添加一个名为&ldquo;localeResolver&rdquo;的组件时，Spring Boot 自动配置的区域信息解析器会失效，而我们定义的区域信息解析器则会生效。</li>
</ul>
<h4>
	手动切换语言</h4>
1. 修改 login.html 切换语言链接，在请求中携带国际化区域信息，代码如下。
<pre class="html">
&lt;!--thymeleaf 模板引擎的参数用（）代替 ？--&gt;
&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#39;zh_CN&#39;)}&quot;&gt;中文&lt;/a&gt;|
&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#39;en_US&#39;)}&quot;&gt;English&lt;/a&gt;</pre>
<br />
2. 在 net.biancheng.www 下创建一个 component 包，并在该包中创建一个区域信息解析器 MyLocalResolver，代码如下。
<pre class="java">
package net.biancheng.www.componet;

import org.springframework.util.StringUtils;
import org.springframework.web.servlet.LocaleResolver;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Locale;

//自定义区域信息解析器
public class MyLocalResolver implements LocaleResolver {

    @Override
    public Locale resolveLocale(HttpServletRequest request) {
        //获取请求中参数
        String l = request.getParameter(&quot;l&quot;);
        //获取默认的区域信息解析器
        Locale locale = Locale.getDefault();
        //根据请求中的参数重新构造区域信息对象
        if (StringUtils.hasText(l)) {
            String[] s = l.split(&quot;_&quot;);
            locale = new Locale(s[0], s[1]);
        }
        return locale;
    }

    @Override
    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {

    }
}</pre>
<br />
3. 在&nbsp;net.biancheng.www.config 的&nbsp;MyMvcConfig 中添加以下方法，将自定义的区域信息解析器以组件的形式添加到容器中，代码如下。
<pre class="java">
//将自定义的区域信息解析器以组件的形式添加到容器中
@Bean
public LocaleResolver localeResolver(){
    return new MyLocalResolver();
}</pre>
<br />
4. 启动 Spring Boot，访问登录页 login.html，结果如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="国际化中文" src="../uploads/allimg/210726/160133N32-2_2.png" /></div>
<div style="text-align: center;">
	图6：默认登陆页&nbsp;</div>
<br />
5. 点击页面最下方的&ldquo;English&rdquo;链接，将语言切换到英语，结果如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="切换到英语" src="../uploads/allimg/210726/1601333252-6_2.png" /></div>
<div style="text-align: center;">
	图7：切换国家化语言为英语</div>
<br />
6.&nbsp;点击页面最下方的&ldquo;中文&rdquo;链接，将语言切换到中文，结果如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="国际化切换到中文" src="../uploads/allimg/210726/160133I34-7_2.png" /></div>
<div style="text-align: center;">
	图8：切换语言为中文</div>
</div>
			<div id="ggxc-weixin-arcbottom">
	<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
	<p style="margin-top:12px; text-align:center;">
		<img src="../templets/new/images/material/qrcode_mp_4.png" alt="公众号二维码" width="160" /><br />
		<span class="col-green">微信扫码关注公众号</span>
	</p>
</div>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="nice-arcs" class="box-bottom">
    <h4>推荐阅读</h4>
    <ul class="clearfix">
<li><a href="../view/niz69i_8.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="../view/tnnfqo_4.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="../view/unnurw_4.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="../view/318_3.html" title="C语言跳转语句（break语句，continue语句，goto语句，return语句）" target="_blank">C语言跳转语句（break语句，continue语句，goto语句，return语句）</a></li>
<li><a href="../view/2575_2.html" title="UE4使用什么编译器？" target="_blank">UE4使用什么编译器？</a></li>
<li><a href="../view/3794_2.html" title="Linux /sbin/init初始化系统环境" target="_blank">Linux /sbin/init初始化系统环境</a></li>
<li><a href="../view/5962_2.html" title="JS onload事件：页面完全加载完毕" target="_blank">JS onload事件：页面完全加载完毕</a></li>
<li><a href="../view/6046_2.html" title="Go语言程序的编译和运行" target="_blank">Go语言程序的编译和运行</a></li>
<li><a href="../view/7537_2.html" title="C++ binary_search()函数详解" target="_blank">C++ binary_search()函数详解</a></li>
<li><a href="../ml_alg/decision-tree_2.html" title="决策树分类算法（if-else原理）" target="_blank">决策树分类算法（if-else原理）</a></li>
</ul>
</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 8963;
window.arcId = "6bebT+moVs2ggqS3jndnFqgFrN5pAKK+DZ1qlWHP/yU2rMyu1bB0eUhB5Aw";
window.typeidChain = "302";
</script>
<div id="footer" class="clearfix">
	<div class="info left">
	<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
	<p>
		<a href="../view/8066_2.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
		<a href="../view/8092_3.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
		<a href="../view/8097_2.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
		<a href="../view/9648_2.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
		<a href="../view/8093_2.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
		<a href="../sitemap/sitemap_2.html" target="_blank" rel="nofollow">网站地图</a>
	</p>
	<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan_2.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
	</p>
	</div>
	<img id="logo_bottom" class="right" src="https://m.biancheng.net/templets/new/images/logo_bottom_2.gif" alt="底部Logo" />
	<span id="return-top"><b>↑</b></span>
</div>

<div id="addweixin-widget">
	<p>
		<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://m.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
		<img src="https://m.biancheng.net/templets/new/images/material/qrcode_mp_4.png" alt="微信交流群" width="120" />
		<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
	</p>
	<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>

<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/spring_boot/spring-mvc.html";
window.nextPageURL = "/spring_boot/interceptor.html";
</script>

<script src="https://m.biancheng.net/templets/new/script/jquery1.12.4.min_2.js"></script>
<script src="https://m.biancheng.net/templets/new/script/common_2.js"></script>
<!-- 51la V6 -->
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
<!-- 51la V5 -->
<!-- <span style="display: none;"><script type="text/javascript" src="https://js.users.51.la/21368967.js"></script></span> -->
</body>
</html>