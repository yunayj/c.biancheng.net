<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<!-- 启用Chromium高速渲染模式 -->
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<!-- 禁止百度转码 -->
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!-- 禁止识别电话号码 -->
<meta name="format-detection" content="telephone=no" />

<link rel="shortcut icon" href="../favicon_3.ico" />
<link href="../templets/new/style/common_2.css" rel="stylesheet" />
<title>Spring Boot日志配置及输出</title>
<meta name="description" content="通过上节的学习，我们了解了 Spring Boot 日志框架的选用及统一，本节我们将重点介绍 Spring Boot 日志的配置及输出。 默认配置 Spring Boot 默认使用 SLF4J+Logback 记录日志，并提供了默认配置" />
</head>
<body>
<div id="topbar" class="clearfix">
	<ul id="product-type" class="left">
		<li>
			<a href="../m_biancheng_default_2.html"><span class="iconfont iconfont-home"></span>首页</a>
		</li>
		<li class="active">
			<a href="../sitemap/sitemap_2.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
		</li>
		<li>
			<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
		</li>
		<li>
			<a href="../view/niz69i_5.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
		</li>
		<!-- <li>
			<a href="https://www.54benniao.com/c_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-c-course"></span>C语言高级课程</a>
		</li>
		<li>
			<a href="https://www.54benniao.com/java_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-java-course"></span>Java高级课程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/q2a/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-q2a"></span>一对一答疑</a>
		</li> -->
	</ul>
</div>
<div id="header" class="clearfix">
	<a id="logo" class="left" href="../m_biancheng_default_2.html">
		<img height="26" src="../templets/new/images/logo_2.png" alt="C语言中文网" />
	</a>
	<ul id="nav-main" class="hover-none left clearfix">
		<li class="wap-yes"><a href="../m_biancheng_default_2.html">首页</a></li>
		<li><a href="../c/c_4.html">C语言教程</a></li>
		<li><a href="../cplus/cplus_2.html">C++教程</a></li>
		<li><a href="../python/python_2.html">Python教程</a></li>
		<li><a href="../java/java_2.html">Java教程</a></li>
		<li><a href="../linux_tutorial/linux_tutorial_2.html">Linux入门</a></li>
		<li><a href="../sitemap/sitemap_2.html" title="网站地图">更多&gt;&gt;</a></li>
	</ul>
	<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>

	<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
	<div id="sidebar" class="toggle-target">
	<div id="contents">
		<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="spring_boot_2.html">Spring Boot</a></dt>
		<dd>
        	<span class="channel-num">1</span>
        	<a href="overview_2.html">Spring Boot是什么</a>
        </dd>
<dd>
        	<span class="channel-num">2</span>
        	<a href="example_2.html">创建Spring Boot项目</a>
        </dd>
<dd>
        	<span class="channel-num">3</span>
        	<a href="starter_2.html">Spring Boot starter</a>
        </dd>
<dd>
        	<span class="channel-num">4</span>
        	<a href="yaml_2.html">YAML</a>
        </dd>
<dd>
        	<span class="channel-num">5</span>
        	<a href="config-bind_2.html">Spring Boot配置绑定</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">6</span>
        	<a href="import-spring-config_2.html">Spring Boot导入Spring配置</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">7</span>
        	<a href="profile_2.html">Spring Boot Profile</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">8</span>
        	<a href="default-config_2.html">Spring Boot默认配置文件</a>
        </dd>
<dd>
        	<span class="channel-num">9</span>
        	<a href="external-config_2.html">Spring Boot外部配置文件</a>
        </dd>
<dd>
        	<span class="channel-num">10</span>
        	<a href="config-order_2.html">Spring Boot配置加载顺序</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">11</span>
        	<a href="auto-config_2.html">Spring Boot自动配置原理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">12</span>
        	<a href="slf4j-logback_2.html">Spring Boot统一日志框架</a>
        </dd>
<dd>
        	<span class="channel-num">13</span>
        	<a href="log-config_2.html">Spring Boot日志配置及输出</a>
        </dd>
<dd>
        	<span class="channel-num">14</span>
        	<a href="starter-web_2.html">spring-boot-starter-web</a>
        </dd>
<dd>
        	<span class="channel-num">15</span>
        	<a href="static-mapping_2.html">Spring Boot静态资源映射</a>
        </dd>
<dd>
        	<span class="channel-num">16</span>
        	<a href="thymeleaf_2.html">Thymeleaf</a>
        </dd>
<dd>
        	<span class="channel-num">17</span>
        	<a href="thymeleaf-import_2.html">Spring Boot整合Thymeleaf</a>
        </dd>
<dd>
        	<span class="channel-num">18</span>
        	<a href="spring-mvc_2.html">Spring Boot定制Spring MVC</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">19</span>
        	<a href="global_2.html">Spring Boot国际化</a>
        </dd>
<dd>
        	<span class="channel-num">20</span>
        	<a href="interceptor_2.html">Spring Boot拦截器</a>
        </dd>
<dd>
        	<span class="channel-num">21</span>
        	<a href="default-exception_2.html">Spring Boot默认异常处理</a>
        </dd>
<dd>
        	<span class="channel-num">22</span>
        	<a href="global-exception_2.html">Spring Boot全局异常处理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">23</span>
        	<a href="servlet-filter-listener_2.html">Spring Boot注册Web原生组件</a>
        </dd>
<dd>
        	<span class="channel-num">24</span>
        	<a href="jdbc_2.html">Spring Boot JDBC访问数据库</a>
        </dd>
<dd>
        	<span class="channel-num">25</span>
        	<a href="datasource-cofig_2.html">Spring Boot数据源配置原理</a><span class="iconfont iconfont-vip2"></span>
        </dd>
<dd>
        	<span class="channel-num">26</span>
        	<a href="druid_2.html">Spring Boot整合Druid数据源</a>
        </dd>
<dd>
        	<span class="channel-num">27</span>
        	<a href="mybatis_2.html">Spring Boot整合MyBatis</a>
        </dd>
<dd>
        	<span class="channel-num">28</span>
        	<a href="custom-starter_2.html">Spring Boot自定义starter</a><span class="iconfont iconfont-vip2"></span>
        </dd>

	</div>
</div>
	<div id="article-wrap">
		<div id="article">
			<div class="arc-info">
	<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../m_biancheng_default_2.html">首页</a> &gt; <a href="spring_boot_2.html">Spring Boot</a></span>
</div>

<div id="ggxc-position-bottom" class="ggxc-box"></div>
			<h1>Spring Boot日志配置及输出</h1>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
			<div id="arc-body">通过上节的学习，我们了解了 Spring&nbsp; Boot 日志框架的选用及统一，本节我们将重点介绍 Spring Boot 日志的配置及输出。
<h2>
	默认配置</h2>
Spring Boot 默认使用 SLF4J+Logback 记录日志，并提供了默认配置，即使我们不进行任何额外配，也可以使用 SLF4J+Logback 进行日志输出。<br />
<br />
常见的日志配置包括日志级别、日志的输入出格式等内容。<br />
<h4>
	日志级别</h4>
日志的输出都是分级别的，当一条日志信息的级别大于或等于配置文件的级别时，就对这条日志进行记录。<br />
<br />
常见的日志级别如下（优先级依次升高）。<br />
<br />
<table>
	<tbody>
		<tr>
			<th>
				序号</th>
			<th>
				日志级别</th>
			<th>
				说明</th>
		</tr>
		<tr>
			<td>
				1</td>
			<td>
				trace</td>
			<td>
				追踪，指明程序运行轨迹。</td>
		</tr>
		<tr>
			<td>
				2</td>
			<td>
				debug</td>
			<td>
				调试，实际应用中一般将其作为最低级别，而 trace 则很少使用。</td>
		</tr>
		<tr>
			<td>
				3</td>
			<td>
				info</td>
			<td>
				输出重要的信息，使用较多。</td>
		</tr>
		<tr>
			<td>
				4</td>
			<td>
				warn</td>
			<td>
				警告，使用较多。</td>
		</tr>
		<tr>
			<td>
				5</td>
			<td>
				error</td>
			<td>
				错误信息，使用较多。</td>
		</tr>
	</tbody>
</table>
<h4>
	输出格式</h4>
我们可以通过以下常用日志参数对日志的输出格式进行修改，如下表。<br />
<br />
<table>
	<tbody>
		<tr>
			<th>
				序号</th>
			<th>
				输出格式</th>
			<th>
				说明</th>
		</tr>
		<tr>
			<td>
				1</td>
			<td>
				%d{yyyy-MM-dd HH:mm:ss, SSS}&nbsp;</td>
			<td>
				日志生产时间,输出到毫秒的时间</td>
		</tr>
		<tr>
			<td>
				2</td>
			<td>
				%-5level&nbsp;</td>
			<td>
				输出日志级别，-5 表示左对齐并且固定输出 5 个字符，如果不足在右边补 0</td>
		</tr>
		<tr>
			<td>
				3</td>
			<td>
				%logger 或&nbsp;%c&nbsp;</td>
			<td>
				logger 的名称</td>
		</tr>
		<tr>
			<td>
				4</td>
			<td>
				&nbsp;%thread&nbsp;&nbsp;或 %t</td>
			<td>
				输出当前线程名称</td>
		</tr>
		<tr>
			<td>
				5</td>
			<td>
				%p</td>
			<td>
				日志输出格式</td>
		</tr>
		<tr>
			<td>
				6</td>
			<td>
				%message&nbsp;或 %msg&nbsp;或&nbsp;%m</td>
			<td>
				日志内容，即 logger.info(&quot;message&quot;)</td>
		</tr>
		<tr>
			<td>
				7</td>
			<td>
				%n</td>
			<td>
				换行符</td>
		</tr>
		<tr>
			<td>
				8</td>
			<td>
				%class 或 %C</td>
			<td>
				输出 Java 类名</td>
		</tr>
		<tr>
			<td>
				9</td>
			<td>
				&nbsp;%file 或 %F</td>
			<td>
				输出文件名</td>
		</tr>
		<tr>
			<td>
				10</td>
			<td>
				%L</td>
			<td>
				输出错误行号</td>
		</tr>
		<tr>
			<td>
				11</td>
			<td>
				%method&nbsp;或&nbsp;%M</td>
			<td>
				输出方法名</td>
		</tr>
		<tr>
			<td>
				12</td>
			<td>
				%l&nbsp;</td>
			<td>
				输出语句所在的行数, 包括类名、方法名、文件名、行数</td>
		</tr>
		<tr>
			<td>
				13</td>
			<td>
				hostName</td>
			<td>
				本地机器名</td>
		</tr>
		<tr>
			<td>
				14</td>
			<td>
				hostAddress</td>
			<td>
				本地 ip 地址</td>
		</tr>
	</tbody>
</table>
<h3>
	示例 1</h3>
下面我们通过一个实例，来查看 Spring Boot 提供了哪些默认日志配置。<br />
<br />
1. 在 Spring Boot 中编写 Java 测试类，代码如下。
<pre class="java">
package net.biancheng.www;

import org.junit.jupiter.api.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class SpringbootLoggingApplicationTests {
    Logger logger = LoggerFactory.getLogger(getClass());

    /**
     * 测试日志输出
     * SLF4J 日志级别从小到大trace&gt;debug&gt;info&gt;warn&gt;error
     */
    @Test
    void logTest() {
        //日志级别 由低到高
        logger.trace(&quot;trace 级别日志&quot;);
        logger.debug(&quot;debug 级别日志&quot;);
        logger.info(&quot;info 级别日志&quot;);
        logger.warn(&quot;warn 级别日志&quot;);
        logger.error(&quot;error 级别日志&quot;);
    }
}</pre>
<br />
2. 执行该测试，控制台输出如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="SpringBoot 日志级别" src="../uploads/allimg/210726/155029DM-0_2.png" /><br />
	图1：Spring Boot 日志级别</div>
<div>
	<br />
	通过控制台输出结果可知，Spring Boot 日志默认级别为 info，日志输出内容默认包含以下元素：</div>
<ul>
	<li>
		时间日期</li>
	<li>
		日志级别</li>
	<li>
		进程 ID</li>
	<li>
		分隔符：---</li>
	<li>
		线程名：方括号括起来（可能会截断控制台输出）</li>
	<li>
		Logger 名称</li>
	<li>
		日志内容</li>
</ul>
<h2>
	修改默认日志配置</h2>
<p>
	我们可以根据自身的需求，通过全局配置文件（application.properties/yml）修改 Spring Boot 日志级别和显示格式等默认配置。<br />
	&nbsp;</p>
<p>
	在 application.properties 中，修改 Spring Boot 日志的默认配置，代码如下。</p>
<pre class="xml">
#日志级别
logging.level.net.biancheng.www=trace
#使用相对路径的方式设置日志输出的位置（项目根目录目录\my-log\mylog\spring.log）
#logging.file.path=my-log/myLog
#绝对路径方式将日志文件输出到 【项目所在磁盘根目录\springboot\logging\my\spring.log】
logging.file.path=/spring-boot/logging
#控制台日志输出格式
logging.pattern.console=%d{yyyy-MM-dd hh:mm:ss} [%thread] %-5level %logger{50} - %msg%n
#日志文件输出格式
logging.pattern.file=%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} === - %msg%n</pre>
<br />
执行测试代码，执行结果如下。<br />
<br />
<div style="text-align: center;">
	<img alt="Spring  Boot 日志自定义配置" src="../uploads/allimg/210726/155029E18-1_2.png" /><br />
	图2：Spring Boot 日志修改默认配置</div>
<br />
从图 2 可以看到，控制台中日志的输出格式与 application.properties 中的 logging.pattern.console 配置一致。<br />
<br />
查看本地日志文件 spring.log，该文件日志输出内容如下图。<br />
<br />
<div style="text-align: center;">
	<img alt="Spring Boot 本地日志文件" src="../uploads/allimg/210726/155029A17-2_2.png" /><br />
	图3：本地日志文件 spring.log</div>
<br />
从图 3 可以看到，本地日志文件中的日志输出格式与 application.properties 中&nbsp;logging.pattern.file 配置一致。
<h2>
	自定义日志配置</h2>
在 Spring Boot 的配置文件 application.porperties/yml 中，可以对日志的一些默认配置进行修改，但这种方式只能修改个别的日志配置，想要修改更多的配置或者使用更高级的功能，则需要通过日志实现框架自己的配置文件进行配置。<br />
<br />
Spring 官方提供了各个日志实现框架所需的配置文件，用户只要将指定的配置文件放置到项目的类路径下即可。<br />
<br />
<table>
	<tbody>
		<tr>
			<th>
				日志框架</th>
			<th>
				配置文件</th>
		</tr>
		<tr>
			<td>
				Logback</td>
			<td>
				logback-spring.xml、logback-spring.groovy、logback.xml、logback.groovy</td>
		</tr>
		<tr>
			<td>
				Log4j2</td>
			<td>
				log4j2-spring.xml、log4j2.xml</td>
		</tr>
		<tr>
			<td>
				JUL (Java Util Logging)</td>
			<td>
				logging.properties</td>
		</tr>
	</tbody>
</table>
<p>
	<br />
	从上表可以看出，日志框架的配置文件基本上被分为 2 类：</p>
<ul>
	<li>
		普通日志配置文件，即不带 srping 标识的配置文件，例如 logback.xml；</li>
	<li>
		带有 spring 表示的日志配置文件，例如 logback-spring.xml。</li>
</ul>
<p>
	<br />
	这两种日志配置文件在使用时大不相同，下面我们就对它们分别进行介绍。</p>
<h3>
	普通日志配置文件</h3>
<p>
	我们将 logback.xml、log4j2.xml 等不带 spring 标识的普通日志配置文件，放在项目的类路径下后，这些配置文件会跳过 Spring Boot，直接被日志框架加载。通过这些配置文件，我们就可以达到自定义日志配置的目的。</p>
<h4>
	示例</h4>
1. 将 logback.xml 加入到 Spring Boot 项目的类路径下（resources 目录下），该配置文件配置内容如下。
<pre class="xml">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!--
scan：当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true。
scanPeriod：设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒当scan为true时，此属性生效。默认的时间间隔为1分钟。
debug：当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。
--&gt;
&lt;configuration scan=&quot;false&quot; scanPeriod=&quot;60 seconds&quot; debug=&quot;false&quot;&gt;
    &lt;!-- 定义日志的根目录 --&gt;
    &lt;property name=&quot;LOG_HOME&quot; value=&quot;/app/log&quot;/&gt;
    &lt;!-- 定义日志文件名称 --&gt;
    &lt;property name=&quot;appName&quot; value=&quot;bianchengbang-spring-boot-logging&quot;&gt;&lt;/property&gt;
    &lt;!-- ch.qos.logback.core.ConsoleAppender 表示控制台输出 --&gt;
    &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;!--
        日志输出格式：
   %d表示日期时间，
   %thread表示线程名，
   %-5level：级别从左显示5个字符宽度
   %logger{50} 表示logger名字最长50个字符，否则按照句点分割。
   %msg：日志消息，
   %n是换行符
        --&gt;
        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread]**************** %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;

    &lt;!-- 滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --&gt;
    &lt;appender name=&quot;appLogAppender&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;
        &lt;!-- 指定日志文件的名称 --&gt;
        &lt;file&gt;${LOG_HOME}/${appName}.log&lt;/file&gt;
        &lt;!--
        当发生滚动时，决定 RollingFileAppender 的行为，涉及文件移动和重命名
        TimeBasedRollingPolicy： 最常用的滚动策略，它根据时间来制定滚动策略，既负责滚动也负责出发滚动。
        --&gt;
        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;
            &lt;!--
            滚动时产生的文件的存放位置及文件名称 %d{yyyy-MM-dd}：按天进行日志滚动
            %i：当文件大小超过maxFileSize时，按照i进行文件滚动
            --&gt;
            &lt;fileNamePattern&gt;${LOG_HOME}/${appName}-%d{yyyy-MM-dd}-%i.log&lt;/fileNamePattern&gt;
            &lt;!--
            可选节点，控制保留的归档文件的最大数量，超出数量就删除旧文件。假设设置每天滚动，
            且maxHistory是365，则只保存最近365天的文件，删除之前的旧文件。注意，删除旧文件是，
            那些为了归档而创建的目录也会被删除。
            --&gt;
            &lt;MaxHistory&gt;365&lt;/MaxHistory&gt;
            &lt;!--
            当日志文件超过maxFileSize指定的大小是，根据上面提到的%i进行日志文件滚动 注意此处配置SizeBasedTriggeringPolicy是无法实现按文件大小进行滚动的，必须配置timeBasedFileNamingAndTriggeringPolicy
            --&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;
                &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;
        &lt;!-- 日志输出格式： --&gt;
        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [ %thread ] ------------------ [ %-5level ] [ %logger{50} : %line ] -
                %msg%n
            &lt;/pattern&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;

    &lt;!--
  logger主要用于存放日志对象，也可以定义日志类型、级别
  name：表示匹配的logger类型前缀，也就是包的前半部分
  level：要记录的日志级别，包括 TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR
  additivity：作用在于children-logger是否使用 rootLogger配置的appender进行输出，
  false：表示只用当前logger的appender-ref，true：
  表示当前logger的appender-ref和rootLogger的appender-ref都有效
    --&gt;
    &lt;!-- hibernate logger --&gt;
    &lt;logger name=&quot;net.biancheng.www&quot; level=&quot;debug&quot;/&gt;
    &lt;!-- Spring framework logger --&gt;
    &lt;logger name=&quot;org.springframework&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;&lt;/logger&gt;

    &lt;!--
    root与logger是父子关系，没有特别定义则默认为root，任何一个类只会和一个logger对应，
    要么是定义的logger，要么是root，判断的关键在于找到这个logger，然后判断这个logger的appender和level。
    --&gt;
    &lt;root level=&quot;info&quot;&gt;
        &lt;appender-ref ref=&quot;stdout&quot;/&gt;
        &lt;appender-ref ref=&quot;appLogAppender&quot;/&gt;
    &lt;/root&gt;
&lt;/configuration&gt; </pre>
<br />
2. 启动该项目并启动测试程序，结果如下。
<pre class="infobox" showmenu="false" shownum="false">
  .   ____          _            __ _ _
/\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
\\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
=========|_|==============|___/=/_/_/_/
:: Spring Boot ::                (v2.5.0)

2021-05-24 14:51:11 [main]**************** INFO  n.biancheng.www.SpringBootLoggingApplicationTests - Starting SpringBootLoggingApplicationTests using Java 1.8.0_131 on LAPTOP-C67MRMAG with PID 20080 (started by 79330 in D:\eclipse workSpace4\spring-boot-logging)
2021-05-24 14:51:11 [main]**************** DEBUG n.biancheng.www.SpringBootLoggingApplicationTests - Running with Spring Boot v2.5.0, Spring v5.3.7
2021-05-24 14:51:11 [main]**************** INFO  n.biancheng.www.SpringBootLoggingApplicationTests - The following profiles are active: dev
2021-05-24 14:51:13 [main]**************** INFO  n.biancheng.www.SpringBootLoggingApplicationTests - Started SpringBootLoggingApplicationTests in 2.058 seconds (JVM running for 3.217)
2021-05-24 14:51:13 [main]**************** DEBUG n.biancheng.www.SpringBootLoggingApplicationTests - debug 级别日志
2021-05-24 14:51:13 [main]**************** INFO  n.biancheng.www.SpringBootLoggingApplicationTests - info 级别日志
2021-05-24 14:51:13 [main]**************** WARN  n.biancheng.www.SpringBootLoggingApplicationTests - warn 级别日志
2021-05-24 14:51:13 [main]**************** ERROR n.biancheng.www.SpringBootLoggingApplicationTests - error 级别日志</pre>
<h3>
	带有 spring 标识的日志配置文件</h3>
Spring Boot 推荐用户使用&nbsp;logback-spring.xml、log4j2-spring.xml 等这种带有 spring 标识的配置文件。这种配置文件被放在项目类路径后，不会直接被日志框架加载，而是由 Spring Boot 对它们进行解析，这样就可以使用 Spring Boot 的高级功能 Profile，实现在不同的环境中使用不同的日志配置。
<h4>
	示例</h4>
1. 将 logback.xml 文件名修改为 logback-spring.xml，并将配置文件中日志输出格式的配置修改为使用 Profile 功能的配置。<br />
<br />
2. 配置内容修改前，日志输出格式配置如下。&nbsp;
<pre class="xml">
&lt;configuration scan=&quot;false&quot; scanPeriod=&quot;60 seconds&quot; debug=&quot;false&quot;&gt;
    ......
    &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread]**************** %-5level %logger{50} - %msg%n&lt;/pattern&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;
    ......
&lt;/configuration&gt; </pre>
<br />
3. 修改 logback-spring.xml 的配置内容，通过 Profile 功能实现在不同的环境中使用不同的日志输出格式，配置如下。
<pre class="xml">
&lt;configuration scan=&quot;false&quot; scanPeriod=&quot;60 seconds&quot; debug=&quot;false&quot;&gt;
    ......
    &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
       &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;
            &lt;!--开发环境 日志输出格式--&gt;
            &lt;springProfile name=&quot;dev&quot;&gt;
                &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n&lt;/pattern&gt;
            &lt;/springProfile&gt;
            &lt;!--非开发环境 日志输出格式--&gt;
            &lt;springProfile name=&quot;!dev&quot;&gt;
                &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n&lt;/pattern&gt;
            &lt;/springProfile&gt;
        &lt;/layout&gt;
    &lt;/appender&gt;
    ......
&lt;/configuration&gt; </pre>
<br />
4. 在 Spring Boot 项目的 application.yml 中，激活开发环境（dev）的 Profile，配置内容如下。
<pre class="xml">
#默认配置
server:
  port: 8080

#切换配置
spring:
  profiles:
    active: dev

---
#开发环境
server:
  port: 8081

spring:
  config:
    activate:
      on-profile: dev
---
#测试环境
server:
  port: 8082

spring:
  config:
    activate:
      on-profile: test
---
#生产环境
server:
  port: 8083

spring:
  config:
    activate:
      on-profile: prod</pre>
<br />
5. 启动 Spring Boot 并执行测试代码，控制台输出如下。<br />
<br />
<div style="text-align: center;">
	<img alt="SpringProfile" src="../uploads/allimg/210726/1550293D6-3_2.png" /><br />
	图4：dev 环境日志输出结果</div>
<div>
	&nbsp;</div>
<p>
	6. 修改 appplication.yml 中的配置，激活测试环境（test）的 Profile，配置如下。</p>
<pre class="xml">
#默认配置
server:
  port: 8080

#切换配置
spring:
  profiles:
    active: test

---
#开发环境
server:
  port: 8081

spring:
  config:
    activate:
      on-profile: dev
---
#测试环境
server:
  port: 8082

spring:
  config:
    activate:
      on-profile: test
---
#生产环境
server:
  port: 8083

spring:
  config:
    activate:
      on-profile: prod
</pre>
<br />
7. 重启 Spring Boot 并执行测试代码，控制台输出如下。<br />
<br />
<div style="text-align: center;">
	<img alt="Spring Boot  Profile" src="../uploads/allimg/210726/1550291T3-4_2.png" /><br />
	图5：test 环境日志输出结果</div>
</div>
			<div id="ggxc-weixin-arcbottom">
	<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
	<p style="margin-top:12px; text-align:center;">
		<img src="../templets/new/images/material/qrcode_mp_4.png" alt="公众号二维码" width="160" /><br />
		<span class="col-green">微信扫码关注公众号</span>
	</p>
</div>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="nice-arcs" class="box-bottom">
    <h4>推荐阅读</h4>
    <ul class="clearfix">
<li><a href="../view/niz69i_8.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="../view/tnnfqo_4.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="../view/unnurw_4.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="../view/961_2.html" title="Java用户修改密码" target="_blank">Java用户修改密码</a></li>
<li><a href="../view/2426_2.html" title="MySQL CHAR、VARCHAR、TEXT、ENUM、SET（字符串类型）" target="_blank">MySQL CHAR、VARCHAR、TEXT、ENUM、SET（字符串类型）</a></li>
<li><a href="../view/6709_2.html" title="物联网是什么？它的应用领域有哪些？" target="_blank">物联网是什么？它的应用领域有哪些？</a></li>
<li><a href="../view/7582_2.html" title="Django url标签详解" target="_blank">Django url标签详解</a></li>
<li><a href="../jsp2/builtin-object_2.html" title="JSP九大内置对象一览表" target="_blank">JSP九大内置对象一览表</a></li>
<li><a href="../view/e0jtf9b_2.html" title="Python文件操作教程（附带示例）" target="_blank">Python文件操作教程（附带示例）</a></li>
<li><a href="../view/otr9rn4_2.html" title="Vue setup()函数的用法" target="_blank">Vue setup()函数的用法</a></li>
</ul>
</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 8957;
window.arcId = "0881+AI8WGxe2vPAQXZ94jhPqZP99ii+h7WHkRLC1ocmObM55/6DAaAQD5s";
window.typeidChain = "302";
</script>
<div id="footer" class="clearfix">
	<div class="info left">
	<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
	<p>
		<a href="../view/8066_2.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
		<a href="../view/8092_3.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
		<a href="../view/8097_2.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
		<a href="../view/9648_2.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
		<a href="../view/8093_2.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
		<a href="../sitemap/sitemap_2.html" target="_blank" rel="nofollow">网站地图</a>
	</p>
	<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan_2.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
	</p>
	</div>
	<img id="logo_bottom" class="right" src="https://m.biancheng.net/templets/new/images/logo_bottom_2.gif" alt="底部Logo" />
	<span id="return-top"><b>↑</b></span>
</div>

<div id="addweixin-widget">
	<p>
		<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://m.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
		<img src="https://m.biancheng.net/templets/new/images/material/qrcode_mp_4.png" alt="微信交流群" width="120" />
		<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
	</p>
	<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>

<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/spring_boot/slf4j-logback.html";
window.nextPageURL = "/spring_boot/starter-web.html";
</script>

<script src="https://m.biancheng.net/templets/new/script/jquery1.12.4.min_2.js"></script>
<script src="https://m.biancheng.net/templets/new/script/common_2.js"></script>
<!-- 51la V6 -->
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
<!-- 51la V5 -->
<!-- <span style="display: none;"><script type="text/javascript" src="https://js.users.51.la/21368967.js"></script></span> -->
</body>
</html>