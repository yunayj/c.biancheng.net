<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<!-- 启用Chromium高速渲染模式 -->
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<!-- 禁止百度转码 -->
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!-- 禁止识别电话号码 -->
<meta name="format-detection" content="telephone=no" />

<link rel="shortcut icon" href="../favicon_3.ico" />
<link href="../templets/new/style/common_2.css" rel="stylesheet" />
<title>Pandas分层索引入门教程（详解）</title>
<meta name="description" content="分层索引（Multiple Index）是 Pandas 中非常重要的索引类型。在 Pandas 废弃 Panel 结构后，若想要处理三维及以上的高维数据时，就需要用到分层索引。不仅如此，Multiple Inedx 也可以操作低维" />
</head>
<body>
<div id="topbar" class="clearfix">
	<ul id="product-type" class="left">
		<li>
			<a href="../m_biancheng_default_2.html"><span class="iconfont iconfont-home"></span>首页</a>
		</li>
		<li class="active">
			<a href="../sitemap/sitemap_2.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
		</li>
		<li>
			<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
		</li>
		<li>
			<a href="../view/niz69i_5.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
		</li>
		<!-- <li>
			<a href="https://www.54benniao.com/c_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-c-course"></span>C语言高级课程</a>
		</li>
		<li>
			<a href="https://www.54benniao.com/java_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-java-course"></span>Java高级课程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/q2a/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-q2a"></span>一对一答疑</a>
		</li> -->
	</ul>
</div>
<div id="header" class="clearfix">
	<a id="logo" class="left" href="../m_biancheng_default_2.html">
		<img height="26" src="../templets/new/images/logo_2.png" alt="C语言中文网" />
	</a>
	<ul id="nav-main" class="hover-none left clearfix">
		<li class="wap-yes"><a href="../m_biancheng_default_2.html">首页</a></li>
		<li><a href="../c/c_4.html">C语言教程</a></li>
		<li><a href="../cplus/cplus_2.html">C++教程</a></li>
		<li><a href="../python/python_2.html">Python教程</a></li>
		<li><a href="../java/java_2.html">Java教程</a></li>
		<li><a href="../linux_tutorial/linux_tutorial_2.html">Linux入门</a></li>
		<li><a href="../sitemap/sitemap_2.html" title="网站地图">更多&gt;&gt;</a></li>
	</ul>
	<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>

	<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
	<div id="sidebar" class="toggle-target">
	<div id="contents">
		<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="pandas_2.html">Pandas</a></dt>
		<dd>
        	<span class="channel-num">1</span>
        	<a href="what-is-pandas_2.html">Pandas是什么</a>
        </dd>
<dd>
        	<span class="channel-num">2</span>
        	<a href="install_2.html">Pandas库下载和安装</a>
        </dd>
<dd>
        	<span class="channel-num">3</span>
        	<a href="series_2.html">Pandas Series结构</a>
        </dd>
<dd>
        	<span class="channel-num">4</span>
        	<a href="dataframe_2.html">Pandas DataFrame结构</a>
        </dd>
<dd>
        	<span class="channel-num">5</span>
        	<a href="panel_2.html">Pandas Panel结构</a>
        </dd>
<dd>
        	<span class="channel-num">6</span>
        	<a href="descript-statistics_2.html">Pandas描述性统计</a>
        </dd>
<dd>
        	<span class="channel-num">7</span>
        	<a href="self-defined-func_2.html">Pandas使用自定义函数</a>
        </dd>
<dd>
        	<span class="channel-num">8</span>
        	<a href="reindexing_2.html">Pandas reindex重置索引</a>
        </dd>
<dd>
        	<span class="channel-num">9</span>
        	<a href="iteration_2.html">Pandas iteration遍历</a>
        </dd>
<dd>
        	<span class="channel-num">10</span>
        	<a href="sorting_2.html">Pandas sorting排序</a>
        </dd>
<dd>
        	<span class="channel-num">11</span>
        	<a href="drop-duplicate_2.html">Python Pandas去重</a>
        </dd>
<dd>
        	<span class="channel-num">12</span>
        	<a href="string_2.html">Python Pandas处理字符串</a>
        </dd>
<dd>
        	<span class="channel-num">13</span>
        	<a href="data-display_2.html">Pandas设置数据显示格式</a>
        </dd>
<dd>
        	<span class="channel-num">14</span>
        	<a href="loc-iloc_2.html">Pandas loc/iloc用法介绍</a>
        </dd>
<dd>
        	<span class="channel-num">15</span>
        	<a href="statistical-functions_2.html">Python Pandas统计函数</a>
        </dd>
<dd>
        	<span class="channel-num">16</span>
        	<a href="window-functions_2.html">Python Pandas窗口函数</a>
        </dd>
<dd>
        	<span class="channel-num">17</span>
        	<a href="aggregation_2.html">Python Pandas聚合函数</a>
        </dd>
<dd>
        	<span class="channel-num">18</span>
        	<a href="fillna_2.html">Pandas缺失值处理</a>
        </dd>
<dd>
        	<span class="channel-num">19</span>
        	<a href="groupby_2.html">Pandas groupby分组操作</a>
        </dd>
<dd>
        	<span class="channel-num">20</span>
        	<a href="merge_2.html">Pandas merge合并操作</a>
        </dd>
<dd>
        	<span class="channel-num">21</span>
        	<a href="concat_2.html">Pandas concat连接操作</a>
        </dd>
<dd>
        	<span class="channel-num">22</span>
        	<a href="time-series_2.html">Python Pandas时间序列</a>
        </dd>
<dd>
        	<span class="channel-num">23</span>
        	<a href="date-formatting_2.html">Pandas日期时间格式化</a>
        </dd>
<dd>
        	<span class="channel-num">24</span>
        	<a href="timedelta_2.html">Padans Timedelta时间差</a>
        </dd>
<dd>
        	<span class="channel-num">25</span>
        	<a href="sample_2.html">Pandas随机选择样本</a>
        </dd>
<dd>
        	<span class="channel-num">26</span>
        	<a href="resample_2.html">Pandas数据重采样</a>
        </dd>
<dd>
        	<span class="channel-num">27</span>
        	<a href="class-object_2.html">Python Pandas分类对象</a>
        </dd>
<dd>
        	<span class="channel-num">28</span>
        	<a href="plot_2.html">Python Pandas绘图</a>
        </dd>
<dd>
        	<span class="channel-num">29</span>
        	<a href="file-operate_2.html">Python Pandas读取文件</a>
        </dd>
<dd>
        	<span class="channel-num">30</span>
        	<a href="csv_2.html">Pandas csv读写文件</a>
        </dd>
<dd>
        	<span class="channel-num">31</span>
        	<a href="excel_2.html">Pandas Excel读写操作</a>
        </dd>
<dd>
        	<span class="channel-num">32</span>
        	<a href="indexing_2.html">Pandas index操作索引</a>
        </dd>
<dd>
        	<span class="channel-num">33</span>
        	<a href="multiple_2.html">Python Pandas分层索引</a>
        </dd>
<dd>
        	<span class="channel-num">34</span>
        	<a href="sql_2.html">Pandas执行SQL操作</a>
        </dd>
<dd>
        	<span class="channel-num">35</span>
        	<a href="numpy_2.html">Pandas和NumPy的比较</a>
        </dd>
<dd>
        	<span class="channel-num">36</span>
        	<a href="warning_2.html">Pandas使用的注意事项</a>
        </dd>

	</div>
</div>
	<div id="article-wrap">
		<div id="article">
			<div class="arc-info">
	<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../m_biancheng_default_2.html">首页</a> &gt; <a href="pandas_2.html">Pandas</a></span>
</div>

<div id="ggxc-position-bottom" class="ggxc-box"></div>
			<h1>Pandas分层索引入门教程（详解）</h1>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
			<div id="arc-body">分层索引（Multiple Index）是 Pandas 中非常重要的索引类型，它指的是在一个轴上拥有多个（即两个以上）索引层数，这使得我们可以用低维度的结构来处理更高维的数据。比如，当想要处理三维及以上的高维数据时，就需要用到分层索引。<br />
<br />
分层索引的目的是用低维度的结构（Series 或者 DataFrame）更好地处理高维数据。通过分层索引，我们可以像处理二维数据一样，处理三维及以上的数据。分层索引的存在使得分析高维数据变得简单，让抽象的高维数据变得容易理解，同时它比废弃的 Panel 结构更容易使用。<br />
<br />
Pandas 可以通过 MultiIndex() 方法来创建分层索引对象，该对象本质上是一个元组序列，序列中每一个元组都是唯一的。下面介绍几种创建分层索引的方式。<br />
<h2>
	创建分层索引</h2>
<h4>
	1) 直接创建</h4>
通过 MultiIndex() 的<code style="font-size: 14px;">levels</code>参数能够直接创建分层索引，示例如下：
<pre class="python">
import pandas as pd 
import numpy as np 
#为leves传递一个1行5列的二维数组
df=pd.MultiIndex(levels=[[np.nan, 2, pd.NaT, None, 5]], codes=[[4, -1, 1, 2, 3, 4]]) 
print(df.levels)
print(df)</pre>
输出结果：
<pre class="info-box">
[[nan, 2, NaT, None, 5]]

MultiIndex([(  5,),
            (nan,),
            (  2,),
            (nan,),
            (nan,),
            (  5,)],
           )</pre>
上述代码中，<code style="font-size: 14px;">levels</code>参数用来创建层级索引，这里只有一层，该层的索引值分别是 np.nan, 2, NaT, None, 5；<code style="font-size: 14px;">codes</code>表示按参数值对层级索引值排序（与 levels 中的值相对应），也就说 codes 中数值是 leves 序列的下标索引。需要注意，这里的 -1 代表 NaN。<br />
<h4>
	2) 从元组创建</h4>
通过 from_tuples() 实现从元组创建分层索引。
<pre class="python">
#创建元组序列
arrays = [[&#39;it&#39;, &#39;it&#39;, &#39;of&#39;, &#39;of&#39;, &#39;for&#39;, &#39;for&#39;, &#39;then&#39;, &#39;then&#39;], 
[&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;]] 
#使用zip()函数创建元组
tuples = list(zip(*arrays)) 
print(tuples)</pre>
输出结果如下：
<pre class="info-box">
[(&#39;it&#39;, &#39;one&#39;),
(&#39;it&#39;, &#39;two&#39;),
(&#39;of&#39;, &#39;one&#39;),
(&#39;of&#39;, &#39;two&#39;),
(&#39;for&#39;, &#39;one&#39;),
(&#39;for&#39;, &#39;two&#39;),
(&#39;then&#39;, &#39;one&#39;),
(&#39;then&#39;, &#39;two&#39;)]</pre>
然后使用 tuples 创建分层索引，如下所示：
<pre class="python">
import pandas as pd
#创建了两层索引，并使用names对它们命名 
index = pd.MultiIndex.from_tuples(tuples, names=[&#39;first&#39;, &#39;second&#39;])
print(index)</pre>
输出结果：
<pre class="info-box">
MultiIndex([(  &#39;it&#39;, &#39;one&#39;),
            (  &#39;it&#39;, &#39;two&#39;),
            (  &#39;of&#39;, &#39;one&#39;),
            (  &#39;of&#39;, &#39;two&#39;),
            ( &#39;for&#39;, &#39;one&#39;),
            ( &#39;for&#39;, &#39;two&#39;),
            (&#39;then&#39;, &#39;one&#39;),
            (&#39;then&#39;, &#39;two&#39;)],
           names=[&#39;first&#39;, &#39;second&#39;])</pre>
<h4>
	3) 从DataFrame对象创建</h4>
通过 from_frame() 创建分层索引，示例如下：
<pre class="python">
#首先创建一个 DataFrame。
import pandas as pd
df = pd.DataFrame([[&#39;bar&#39;, &#39;one&#39;], [&#39;bar&#39;, &#39;two&#39;],
                   [&#39;foo&#39;, &#39;one&#39;], [&#39;foo&#39;, &#39;two&#39;]],
                  columns=[&#39;first&#39;, &#39;second&#39;])
#然后使用 from_frame()创建分层索引。
index = pd.MultiIndex.from_frame(df)
#将index应用于Series
s=pd.Series(np.random.randn(4), index=index)
print(s)</pre>
输出结果：
<pre class="info-box">
first  second
bar    one       1.151928
       two      -0.694435
foo    one      -1.701611
       two      -0.486157
dtype: float64</pre>
<h4>
	4) 笛卡尔积创建</h4>
笛卡尔积（又称直积）是数学运算的一种方式，下面使用 from_product() 笛卡尔积创建分层索引。
<pre class="python">
import pandas as pd
#构建数据
numbers = [0, 1, 2]
language = [&#39;Python&#39;, &#39;Java&#39;]
#经过笛卡尔积处理后会得到6中组合方式
index = pd.MultiIndex.from_product([numbers, language],names=[&#39;number&#39;, &#39;language&#39;])
#将分层索引对象应用于Series
dk_er=pd.Series(np.random.randn(6), index=index)
print(dk_er)</pre>
输出结果：
<pre class="info-box">
number  language
0       Python     -0.319739
        Java        1.599170
1       Python     -0.010520
        Java        0.262068
2       Python     -0.124177
        Java        0.315120
dtype: float64</pre>
<h4>
	5) 数组创建分层索引</h4>
通过 from_array() 方法，同样可以创建分层索引。示例如下：
<pre class="python">
import pandas as pd
df=pd.MultiIndex.from_arrays([[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;],[1, 2, 1, 2]])
df</pre>
输出结果：
<pre class="info-box">
MultiIndex([(&#39;a&#39;, 1),
            (&#39;a&#39;, 2),
            (&#39;b&#39;, 1),
            (&#39;b&#39;, 2)],
           )</pre>
<h2>
	应用分层索引</h2>
下面示例讲解了如何在 DataFrame 中应用分层索引。
<pre class="python">
import pandas as pd 
import numpy as np
#创建一个数组
arrays = [[0, 0, 1, 1], [&#39;A&#39;, &#39;B&#39;, &#39;A&#39;, &#39;B&#39;]]
#从数组创建
index=pd.MultiIndex.from_arrays(arrays, names=(&#39;number&#39;, &#39;letter&#39;))
print(index)</pre>
输出结果
<pre class="info-box">
MultiIndex([(0, &#39;A&#39;),
            (0, &#39;B&#39;),
            (1, &#39;A&#39;),
            (1, &#39;B&#39;)],
           names=[&#39;number&#39;, &#39;letter&#39;])</pre>
上述示例中，第一层为 number，该层有 0、1 两个元素，第二层为 letter，有两个字母 A 和 B。<br />
<br />
下面把已经创建的分层索引应用到 DataFrame 中，如下所示：
<pre class="python">
import pandas as pd 
import numpy as np
#创建一个数组
arrays = [[0, 0, 1, 1], [&#39;A&#39;, &#39;B&#39;, &#39;A&#39;, &#39;B&#39;]]
index=pd.MultiIndex.from_arrays(arrays, names=(&#39;number&#39;, &#39;letter&#39;))
#在行索引位置应用分层索引
df=pd.DataFrame([{&#39;a&#39;:11, &#39;b&#39;:22}], index=index)
print(df)</pre>
输出结果：
<pre class="info-box">
                a   b
number letter       
0      A       11  22
       B       11  22
1      A       11  22
       B       11  22</pre>
<h4>
	<span style="font-weight: normal;">通过 set_index() 可以将 DataFrame 的已有列的标索设置为 index 行索引，示例如下：</span></h4>
<pre class="python">
import pandas as pd
df= pd.DataFrame({&#39;a&#39;: range(5), &#39;b&#39;: range(5, 0, -1),
                  &#39;c&#39;: [&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;],
                  &#39;d&#39;: [0, 1, 2, 0, 1]})
print(df)
df1=df.set_index([&#39;a&#39;,&#39;d&#39;],drop=False)
print(df1)
df1=df.set_index([&#39;a&#39;,&#39;d&#39;],drop=False,append=Ture)
print(df2)</pre>
输出结果：
<pre class="info-box">
转换前：
   a  b    c  d
0  0  5  one  0
1  1  4  one  1
2  2  3  one  2
3  3  2  two  0
4  4  1  two  1
转换后：
     a  b    c  d
a d             
0 0  0  5  one  0
1 1  1  4  one  1
2 2  2  3  one  2
3 0  3  2  two  0
4 1  4  1  two  1
带append参数：
&nbsp;&nbsp;&nbsp;&nbsp;   a&nbsp; b&nbsp;&nbsp;&nbsp; c&nbsp; d
  a d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
0 0 0&nbsp; 0&nbsp; 5&nbsp; one&nbsp; 0
1 1 1&nbsp; 1&nbsp; 4&nbsp; one&nbsp; 1
2 2 2&nbsp; 2&nbsp; 3&nbsp; one&nbsp; 2
3 3 0&nbsp; 3&nbsp; 2&nbsp; two&nbsp; 0
4 4 1&nbsp; 4&nbsp; 1&nbsp; two&nbsp; 1</pre>
通过 set_index() 将列索引转换为了分层行索引，其中 drop=False 表示更新索引的同时，不删除 a、d 列；同时，该函数还提供了一个 append = Ture 参数表示不添加默认的整数索引值（0到4）<br />
<h2>
	分层索引切片取值</h2>
下面讲解分层索引切片取值操作，示例如下：
<h4>
	1) 分层行索引操作</h4>
<pre class="python">
import pandas as pd
#构建多层索引
tuple = [(&#39;湖人&#39;,2008),(&#39;步行者&#39;,2008),
      (&#39;湖人&#39;,2007),(&#39;凯尔特人&#39;,2007),
   (&#39;篮网&#39;,2007),(&#39;热火&#39;,2008)]
salary = [10000,20000,11000,30000,19000,22000]
#其次应用于DataFrame
index = pd.MultiIndex.from_tuples(tuple)
s = pd.Series(salary, index=index)
print(s)
#切片取值
print(s[&#39;湖人&#39;,2007])
print(s[&#39;湖人&#39;])
print(s[:,2008])
#比较value
print(s[s&lt;=20000])</pre>
输出结果：
<pre class="info-box">
湖人    2008    10000
步行者   2008    20000
湖人    2007    11000
凯尔特人  2007    30000
篮网    2007    19000
热火    2008    22000
dtype: int64

湖人队2007年工资：
11000

湖人队的工资：
2008    10000
2007    11000
dtype: int64

2008年所有队伍工资：
湖人     10000
步行者    20000
热火     22000
dtype: int64

小于等于20000的年份和队伍：
湖人   2008    10000
步行者  2008    20000
湖人   2007    11000
篮网   2007    19000
dtype: int64</pre>
<h4>
	2) 行、列多层索引操作</h4>
下面看一种更加复杂的情况，就是行、列同时存在多层索引时候，应该如何通过切片取值。示例如下：
<pre class="python">
df = pd.DataFrame(np.arange(1,13).reshape((4, 3)),
               index=[[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [1, 2, 1, 2]],
               columns=[[&#39;Jack&#39;, &#39;Jack&#39;, &#39;Helen&#39;],
              [&#39;Python&#39;, &#39;Java&#39;, &#39;Python&#39;]])
#选择同一层级的索引,切记不要写成[&#39;Jack&#39;,&#39;Helen&#39;]
print(df[[&#39;Jack&#39;,&#39;Helen&#39;]])
#在不同层级分别选择索引
print(df[&#39;Jack&#39;,&#39;Python&#39;])
#iloc整数索引
print(df.iloc[:3,:2])
#loc列标签索引
print(df.loc[:,(&#39;Helen&#39;,&#39;Python&#39;)])</pre>
输出结果：
<pre class="info-box">
      Jack       Helen
    Python Java Python
a 1      1    2      3
  2      4    5      6
b 1      7    8      9
  2     10   11     12

a  1     1
   2     4
b  1     7
   2    10
Name: (Jack, Python), dtype: int32

      Jack    
    Python Java
a 1      1    2
  2      4    5
b 1      7    8

a  1     3
   2     6
b  1     9
   2    12
Name: (Helen, Python), dtype: int32</pre>
<h2>
	聚合函数应用</h2>
通过给<code style="font-size: 14px;">level</code>传递参数值，您可以指定在哪个层上进行聚合操作，比如求和、求均值等。示例如下：
<pre class="python">
import pandas as pd 
df = pd.DataFrame(np.arange(1,13).reshape((4, 3)),
               index=[[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [1, 2, 1, 2]],
               columns=[[&#39;Jack&#39;, &#39;Jack&#39;, &#39;Helen&#39;],
              [&#39;Python&#39;, &#39;Java&#39;, &#39;Python&#39;]])
#第一步，给行列层级起名字
df.index.names=[&#39;key1&#39;,&#39;key2&#39;]
df.columns.names=[&#39;name&#39;,&#39;course&#39;]
print(df.sum(level=&#39;key2&#39;))
print(df.mean(level=&quot;course&quot;,axis=1))</pre>
输出结果：
<pre class="info-box">
#对key2层1/2对应的元素值求和
name     Jack       Helen
course Python Java Python
key2                    
1           8   10     12
2          14   16     18

#axis=1沿着水平方向求均值
course     Python  Java
key1 key2             
a    1          2     2
     2          5     5
b    1          8     8
     2         11    11</pre>
在数据分析的过程中，我们把大部分时间都花费在数据的准备和预处理上，Pandas 作为一个灵活、高效的数据预处理工具，提供了诸多数据处理的方法，分层索引（Multiple Index）就是其中之一，分层索引（或多层索引）是 Pandas 的基本特性，它能够增强 Pands 数据预处理的能力。<br />
<br />
对于 Series 结构来说，通过给<code style="font-size: 14px;">index</code>参数传递一个二维数组就可以创建一个具有两层索引的 MultiIndex 对象，示例如下：
<pre class="python">
import pandas as pd 
info = pd.Series([11, 14, 17, 24, 19, 32, 34, 27],
index = [[&#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;],
[&#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;, &#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;]]) 
print(info)</pre>
输出结果：
<pre class="info-box">
x  obj1    11
   obj2    14
   obj3    17
   obj4    24
y  obj1    19
   obj2    32
   obj3    34
   obj4    27
dtype: int64</pre>
上述示例，创建了两个层级的索引，即 (x, y) 和 (obj1，&hellip;， obj4)，您可以使用 &#39;index&#39; 命令查看索引。
<p class="info-box">
	info.index</p>
输出结果：
<pre class="info-box">
MultiIndex([(&#39;x&#39;, &#39;obj1&#39;),
            (&#39;x&#39;, &#39;obj2&#39;),
            (&#39;x&#39;, &#39;obj3&#39;),
            (&#39;x&#39;, &#39;obj4&#39;),
            (&#39;y&#39;, &#39;obj1&#39;),
            (&#39;y&#39;, &#39;obj2&#39;),
            (&#39;y&#39;, &#39;obj3&#39;),
            (&#39;y&#39;, &#39;obj4&#39;)],
           )</pre>
此外，您还可以基于内部索引层（也就是&#39;obj&#39;）来选择数据。如下所示：<br />
<p class="info-box">
	info [:,&#39;obj2&#39; ]</p>
输出结果：
<pre class="info-box">
x    14
y    32
dtype: int64</pre>
<h2>
	局部索引</h2>
局部索引可以理解为：从分层索引中选择特定索引层的一种方法。比如在下列数据中，选择所有<code style="font-size: 14px;">&#39;y&#39;</code>索引指定的数据，示例如下：
<pre class="python">
import pandas as pd 
info = pd.Series([11, 14, 17, 24, 19, 32, 34, 27], 
index = [[&#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;], 
[&#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;, &#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;]]) 
info[&#39;y&#39;]</pre>
输出结果：
<pre class="info-box">
obj1    19
obj2    32
obj3    34
obj4    27
dtype: int64</pre>
当然您也可以基于内层索引选择数据。<br />
<h2>
	行索引层转换为列索引</h2>
unstack() 用来将行索引转变成列索引，相当于转置操作。通过 unstack() 可以将 Series（一维序列）转变为 DataFrame（二维序列）。示例如下：
<pre class="python">
import pandas as pd 
info = pd.Series([11, 14, 17, 24, 19, 32, 34, 27], 
index = [[&#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;], 
[&#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;, &#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;]]) 
#行索引标签默认是最外层的 x, y
#0代表第一层索引，而1代表第二层
print(info.unstack(0))</pre>
输出结果：
<pre class="infi-box">
       x   y
obj1  11  19
obj2  14  32
obj3  17  34
obj4  24  27</pre>
从示例可以看出，unstack(0) 表示选择第一层索引作为列，unstack(1) 表示选择第二层，如下所示：
<pre class="python">
import pandas as pd 
info = pd.Series([11, 14, 17, 24, 19, 32, 34, 27], 
index = [[&#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;x&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;, &#39;y&#39;], 
[&#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;, &#39;obj1&#39;, &#39;obj2&#39;, &#39;obj3&#39;, &#39;obj4&#39;]]) 
print(info.unstack(1))</pre>
输出结果：
<pre class="info-box">
   obj1  obj2  obj3  obj4
x    11    14    17    24
y    19    32    34    27</pre>
<h2>
	列索引实现分层</h2>
我们知道，列索引存在于 DataFrame 结构中，下面创建一个 DataFrame 来演示列索引如何实现分层。
<pre class="python">
import numpy as np  
info = pd.DataFrame(np.arange(12).reshape(4, 3), 
index = [[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;]],  
columns = [[&#39;num1&#39;, &#39;num2&#39;, &#39;num3&#39;], [&#39;x&#39;, &#39;y&#39;, &#39;x&#39;]] )  
print(info)</pre>
输出结果：
<pre class="info-box">
        num1 num2 num3
           x    y    x
a one      0    1    2
  two      3    4    5
b three    6    7    8
  four     9   10   11</pre>
查看所有列索引：
<p class="info-box">
	info.columns</p>
输出结果：
<pre class="info-box">
MultiIndex([(&#39;num1&#39;, &#39;x&#39;),
            (&#39;num2&#39;, &#39;y&#39;),
            (&#39;num3&#39;, &#39;x&#39;)],)</pre>
<h2>
	交换层和层排序</h2>
<h4>
	1) 交换层</h4>
通过 swaplevel() 方法轻松地实现索引层交换，示例如下：
<pre class="python">
import pandas as pd
frame = pd.DataFrame(np.arange(12).reshape((4, 3)),
                  index=[[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [1, 2, 1, 2]],
                  columns=[[&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Colorado&#39;],
                           [&#39;Green&#39;, &#39;Red&#39;, &#39;Green&#39;]])
#设置index的levels名称                         
frame.index.names = [&#39;key1&#39;, &#39;key2&#39;]
#设置columns的levels名称
frame.columns.names = [&#39;state&#39;,&#39;color&#39;]
#交换key1层与key层
frame.swaplevel(&#39;key1&#39;,&#39;key2&#39;)</pre>
输出结果：
<pre class="info-box">
state      Ohio     Colorado
color     Green Red    Green
key2 key1                  
1    a        0   1        2
2    a        3   4        5
1    b        6   7        8
2    b        9  10       11</pre>
<h4>
	2) 层排序</h4>
通过 sort_index() 的<code style="font-size: 14px;">level</code>参数实现对层的排序。下面示例，按&ldquo;key1&rdquo;的字母顺序重新排序。
<pre class="python">
import pandas as pd
frame = pd.DataFrame(np.arange(12).reshape((4, 3)),
                  index=[[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [1, 2, 1, 2]],
                  columns=[[&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Colorado&#39;],
                           [&#39;Green&#39;, &#39;Red&#39;, &#39;Green&#39;]])
#设置index的levels的名称，key1 与 key2分别对应不同的层                         
frame.index.names = [&#39;key1&#39;, &#39;key2&#39;]
#设置columns的levels的名称
frame.columns.names = [&#39;state&#39;,&#39;color&#39;]

print(frame.sort_index(level=&#39;key1&#39;))</pre>
输出结果：
<pre class="info-box">
state      Ohio     Colorado
color     Green Red    Green
key1 key2                  
a    1        0   1        2
     2        3   4        5
b    1        6   7        8
     2        9  10       11</pre>
</div>
			<div id="ggxc-weixin-arcbottom">
	<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
	<p style="margin-top:12px; text-align:center;">
		<img src="../templets/new/images/material/qrcode_mp_4.png" alt="公众号二维码" width="160" /><br />
		<span class="col-green">微信扫码关注公众号</span>
	</p>
</div>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="nice-arcs" class="box-bottom">
    <h4>推荐阅读</h4>
    <ul class="clearfix">
<li><a href="../view/niz69i_8.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="../view/tnnfqo_4.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="../view/unnurw_4.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="../view/749_2.html" title="Linux mv命令：移动文件或改名" target="_blank">Linux mv命令：移动文件或改名</a></li>
<li><a href="../view/vip_1873_2.html" title="递归函数的致命缺陷：巨大的时间开销和内存开销（附带优化方案）" target="_blank">递归函数的致命缺陷：巨大的时间开销和内存开销（附带优化方案）</a></li>
<li><a href="../view/2845_2.html" title="Linux远程管理协议（RFB、RDP、Telnet和SSH）" target="_blank">Linux远程管理协议（RFB、RDP、Telnet和SSH）</a></li>
<li><a href="../view/7182_2.html" title="C++ STL map emplace()和emplace_hint()方法详解" target="_blank">C++ STL map emplace()和emplace_hint()方法详解</a></li>
<li><a href="../view/n-queens_2.html" title="N皇后问题" target="_blank">N皇后问题</a></li>
<li><a href="../matplotlib/twin-axes_2.html" title="Matplotlib双轴图" target="_blank">Matplotlib双轴图</a></li>
<li><a href="../view/7lw96qt_2.html" title="《C语言可以这样学(第2版)》王金鹏PDF下载（高清完整版）" target="_blank">《C语言可以这样学(第2版)》王金鹏PDF下载（高清完整版）</a></li>
</ul>
</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 9227;
window.arcId = "cf30Bpo+jzqjNClvsxyg97xTUsdBaYu/PtZ1tu95XjhxWU8NqVkq295tuU0";
window.typeidChain = "426";
</script>
<div id="footer" class="clearfix">
	<div class="info left">
	<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
	<p>
		<a href="../view/8066_2.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
		<a href="../view/8092_3.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
		<a href="../view/8097_2.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
		<a href="../view/9648_2.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
		<a href="../view/8093_2.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
		<a href="../sitemap/sitemap_2.html" target="_blank" rel="nofollow">网站地图</a>
	</p>
	<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan_2.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
	</p>
	</div>
	<img id="logo_bottom" class="right" src="https://m.biancheng.net/templets/new/images/logo_bottom_2.gif" alt="底部Logo" />
	<span id="return-top"><b>↑</b></span>
</div>

<div id="addweixin-widget">
	<p>
		<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://m.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
		<img src="https://m.biancheng.net/templets/new/images/material/qrcode_mp_4.png" alt="微信交流群" width="120" />
		<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
	</p>
	<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>

<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/pandas/indexing.html";
window.nextPageURL = "/pandas/sql.html";
</script>

<script src="https://m.biancheng.net/templets/new/script/jquery1.12.4.min_2.js"></script>
<script src="https://m.biancheng.net/templets/new/script/common_2.js"></script>
<!-- 51la V6 -->
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
<!-- 51la V5 -->
<!-- <span style="display: none;"><script type="text/javascript" src="https://js.users.51.la/21368967.js"></script></span> -->
</body>
</html>