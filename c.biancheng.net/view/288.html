<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="../favicon.ico" />
<link href="../templets/new/style/common.css" rel="stylesheet" />
<title>C语言位运算符</title>
<meta name="description" content="对于更多紧凑的数据，C 程序可以用独立的位或多个组合在一起的位来存储信息。文件访问许可就是一个常见的应用案例。位运算符允许对一个字节或更大的数据单位中独立的位做处理：" />
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="../c_biancheng_default.html"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="../sitemap/sitemap_3.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="niz69i.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="../c_biancheng_default.html">
<img height="26" src="../templets/new/images/logo.png" alt="C语言中文网" />
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="../c_biancheng_default.html">首页</a></li>
<li><a href="../c/c_3.html">C语言教程</a></li>
<li><a href="../cplus/cplus.html">C++教程</a></li>
<li><a href="../python/python.html">Python教程</a></li>
<li><a href="../java/java_3.html">Java教程</a></li>
<li><a href="../linux_tutorial/linux_tutorial.html">Linux入门</a></li>
<li><a href="../sitemap/sitemap_3.html" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main-no-course" class="clearfix">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../c_biancheng_default.html">首页</a> &gt; 编程笔记</span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"></div>
<h1>C语言位运算符</h1>
<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
<div id="arc-body">对于更多紧凑的数据，C 程序可以用独立的位或多个组合在一起的位来存储信息。文件访问许可就是一个常见的应用案例。位运算符允许对一个字节或更大的数据单位中独立的位做处理：可以清除、设定，或者倒置任何位或多个位。也可以将一个整数的位模式（bit pattern）向右或向左移动。<br />
<br />
整数类型的位模式由一队按位置从右到左编号的位组成，位置编号从 0 开始，这是最低有效位（least significant bit）。例如，考虑字符值&#39;*&#39;，它的 ASCII 编码为 42，相当于二进制的 101010：<br />
位模式　0　0　1　0　1　0　1　0<br />
位位置　7　6　5　4　3　2　1　0<br />
<br />
在本例中，值 101010 被表示成一个 8 位的字节内容，因此前面多两个 0。
<h2>
布尔位运算符</h2>
表 1 中列举的运算符可以对操作数的每个位进行布尔运算。这种二元运算符把两个不同操作数内相同位置的位关联起来。被设定的位（也就是值为 1 的位）被解释为 true，被清除的位（也就是值为 0 的位）被解释为 false。<br />
<br />
<span style="color:#b22222;">除布尔运算符 AND、OR 和 NOT 以外，也有位异或运算符（exclusive-OR，XOR）。</span>这些都在表 1 进行了列举。<br />
<br />
<table border="1" cellpadding="1" cellspacing="1" style="width: 730px">
<caption>
表1 布尔位运算符</caption>
<tbody>
<tr>
<th>
运算符</th>
<th>
意义</th>
<th>
示例</th>
<th>
对于每个位位置的结果（1=设定，0=清除）</th>
</tr>
<tr>
<th>
&nbsp; &nbsp; &amp; &nbsp; &nbsp;</th>
<td>
位 AND</td>
<td>
&nbsp;x&amp;y&nbsp;</td>
<td>
如果 x 和 y 都为 1，则得到 1；如果 x 或 y 任何一个为 0，或都为0，则得到 0</td>
</tr>
<tr>
<th>
&nbsp; &nbsp; | &nbsp; &nbsp;</th>
<td>
位 OR</td>
<td>
&nbsp;x|y&nbsp;</td>
<td>
如果 x 或 y 为 1，或都为 1，则得到 1；如果 x 和 y 都为 0，则得到 0</td>
</tr>
<tr>
<th>
&nbsp; &nbsp; ^ &nbsp; &nbsp;</th>
<td>
位 XOR</td>
<td>
&nbsp;x^y&nbsp;</td>
<td>
如果 x 或 y 的值不同，则得到 1；如果两个值相同，则得到 0</td>
</tr>
<tr>
<th>
&nbsp; &nbsp; ~ &nbsp; &nbsp;</th>
<td>
位 NOT（I的补码）</td>
<td>
&nbsp;~x&nbsp;</td>
<td>
如果 x 为 0，则得到 1，如果 x 是 1，则得到 0</td>
</tr>
</tbody>
</table>
<br />
<span style="color:#b22222;">位运算符的操作数必须是整数类型，并且遵循寻常算术转换</span>（usualarithmetic conversion）。转换后获得的操作数通用类型就是整个计算结果的类型。表 2 展示了这些运算符的效果。<br />
<br />
<table border="1" cellpadding="1" cellspacing="1" style="width: 250px">
<caption>
表2 位运算符的效果</caption>
<tbody>
<tr>
<th>
表达式（或声明）</th>
<th>
位模式</th>
</tr>
<tr>
<td>
int a=6;</td>
<td>
0&middot;&middot;&middot;00110</td>
</tr>
<tr>
<td>
int b=11;</td>
<td>
0&middot;&middot;&middot;01011</td>
</tr>
<tr>
<td>
a&amp;b</td>
<td>
0&middot;&middot;&middot;00010</td>
</tr>
<tr>
<td>
a|b</td>
<td>
0&middot;&middot;&middot;01111</td>
</tr>
<tr>
<td>
a^b</td>
<td>
0&middot;&middot;&middot;01101</td>
</tr>
<tr>
<td>
~a</td>
<td>
1&middot;&middot;&middot;11001</td>
</tr>
</tbody>
</table>
<br />
<br />
可以将一个整数 a 的特定位清除，做法是将整数 a 和另一个整数进行位 AND 运算，其中，另一个整数在需要清除的位为 0，其他位则为 1，并位 AND 运算，其中，另一个整数在需要清除的位为 0，其他位则为 1，并将 AND 运算的结果赋值给整数 a。<br />
<br />
该另一个整数，即位 AND 运算的第二个操作数，被设定为 1 的位置（称为位掩码），这些位置经过位 AND 运算，不会改变第一个操作数对应位置的值。例如，一个整数与一个位掩码 0xFF 进行位 AND 运算后，将保留最低位置的 8 个位，而会清除其他所有位的值：
<pre class="cpp">
a &amp;= OxFF;            // 相当于：a = a &amp; OxFF;</pre>
<br />
在该示例中，复合赋值运算符 &amp;= 也会执行 &amp; 运算。复合赋值运算符与其他二元位运算符具有类似的执行方式，这里不再赘述。<br />
<br />
<span style="color:#b22222;">位运算符</span>也<span style="color:#b22222;">可以用来生成位掩码，以供以后的位运算使用。</span>例如，在位模式 0x20 中，只有位5被设定。因此表达式 ~0x20 会生成一个只有位 5 没有被设定的位掩码：
<pre class="cpp">
a &amp;= ~0x20;             // 清除a中的位5</pre>
位掩码 ~0x20 比 0xFFFFFFDF 更受欢迎，因为它的可移植性更好：结果不会受到机器字大小的影响（同时也更方便人阅读）。<br />
<br />
也可以使用运算符 |（OR）和 ^（XOR）来设定或清除特定位，下面是一个示例：
<pre class="cpp">
int mask = OxC;
a |= mask;              // 设定a的位2和位3
a ^= mask;              // 求反a的位2和位3</pre>
<br />
第二个转换使用相同的位掩码，它会将第一次转换的结果再反转一次。换句话说，b^mask^mask 会得到原来 b 的值。这个操作可以用于交换两个整数的值，而不需要使用第三个临时变量：
<pre class="cpp">
a ^= b;                  // 等效于 a = a ^ b;
b ^= a;                 // 将a原来的值赋值给b
a ^= b;                 // 将b原来的值赋值给a</pre>
<br />
本例中的前两个表达式等同于 b=b^（a^b）或 b=（a^b）^b。其结果等同于 b=a，副作用是 a 的值也被修改了，其修改后的值为 a^b。在这时，第三个表达式具有如下副作用 a=（a^b）^a 或 a=b（使用 a 和 b 的原始值）。
<h2>
移位运算符</h2>
移位运算符将左操作数的位模式移动数个位置，至于移动几个位置，由右操作数指定。它们如表 3 列举。<br />
<br />
<br />
<table border="1" cellpadding="1" cellspacing="1" style="width: 400px">
<caption>
表3 移位运算符</caption>
<tbody>
<tr>
<td>
运算符</td>
<td>
意义</td>
<td>
示例</td>
<td>
结果</td>
</tr>
<tr>
<td>
&lt;&lt;</td>
<td>
向左移位</td>
<td>
x&lt;&lt;y</td>
<td>
x 的每个位向左移动 y 个位</td>
</tr>
<tr>
<td>
&gt;&gt;</td>
<td>
向右移位</td>
<td>
x&gt;&gt;y</td>
<td>
x 的每个位向右移动 y 个位</td>
</tr>
</tbody>
</table>
<br />
<br />
<span style="color:#b22222;">移位运算符的操作数必须是整数。</span>在实际移位操作之前，两个操作数都要进行整数提升（promotion）。右边操作数不可以为负值，并且必须少于左边操作数在整数提升之后的位长。如果不符合这些条件，程序运行结果将无法确定。<br />
<br />
<span style="color:#b22222;">移位运算结果的类型等于左操作数在整数提升后的类型。</span>下面示例的移位表达式具有 unsigned long 类型。
<pre class="cpp">
unsigned long n = 0xB,     // 位模式： 0 ... 0 0 0 1 0 1 1
         result = 0;
result = n &lt;&lt; 2;          //              0 ... 0 1 0 1 1 0 0
result = n &gt;&gt; 2;          //              0 ... 0 0 0 0 0 1 0</pre>
<br />
在向左移位运算时，右边多出来的位用 0 来填充。移动超出左边边界的位则直接抛弃。向左移动 y 个位置，就等同于将左操作数乘以 2^{y}：如果左操作数 x 是无符号类型，那么表达式 x&lt;&lt;y 的结果等于表达式 x&times;2^{y} 的值。因此，在前面的例子，n&lt;&lt;2 的值为 n&times;4，也就是 44。<br />
<br />
在向右位移运算时，如果左操作数是无符号类型，或者左操作数是带符号类型但为非负值，则左边多出来的位用 0 来填充。在这种情况下，表达式 x&gt;&gt;y 的结果等效于表达式 x/2^{y} 的值。如果左操作数是负值，那么由编译器决定用于填充至左边多出来的位的内容，可能是 0，也可能是符号位。
<pre class="cpp">
// 函数setBit()
// 设定掩码m中p位置的位。
// 使用定义在limits.h中的CHAR_BIT，存储一个字节内的位的数目。
// 返回值： 完成位设定的新掩码，其中p位置已设定好
//              如果p不是有效的位置，则返回原始掩码。

unsigned int setBit( unsigned int mask, unsigned int p )
{
  if ( p &gt;= CHAR_BIT * sizeof(int) )
    return mask;
  else
    return mask | (1&lt;&lt;p);
}</pre>
<br />
<span style="color:#b22222;">移位运算符的优先级比算术运算符的优先级更低，但相对于比较运算符以及其他的位操作运算符，具有更高的优先级。</span>上例表达式 mask|（1&lt;&lt;p）中的括号必要性不大，主要是让程序代码更容易阅读。</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
<p style="margin-top:12px; text-align:center;">
<img src="../templets/new/images/material/qrcode_mp.png" alt="公众号二维码" width="160" /><br />
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div id="nice-arcs" class="box-bottom">
<h4>推荐阅读</h4>
<ul class="clearfix">
<li><a href="niz69i_4.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="tnnfqo_2.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="unnurw_2.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="3877.html" title="学习QML还是C++？" target="_blank">学习QML还是C++？</a></li>
<li><a href="vip_8692.html" title="C++11在函数模板和类模板中使用可变参数" target="_blank">C++11在函数模板和类模板中使用可变参数</a></li>
<li><a href="../python_spider/preparatory-work.html" title="学习Python爬虫前的准备工作" target="_blank">学习Python爬虫前的准备工作</a></li>
<li><a href="../redis/pubsub.html" title="Redis PubSub发布订阅（详细图解）" target="_blank">Redis PubSub发布订阅（详细图解）</a></li>
<li><a href="../tkinter/label.html" title="Tkinter Label标签控件" target="_blank">Tkinter Label标签控件</a></li>
<li><a href="tqizg5.html" title="JS while和do while循环语句的用法" target="_blank">JS while和do while循环语句的用法</a></li>
<li><a href="ltr8th9.html" title="《51单片机项目教程(C语言版)》吴险峰PDF下载（高清完整版）" target="_blank">《51单片机项目教程(C语言版)》吴险峰PDF下载（高清完整版）</a></li>
</ul>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 288;
window.arcId = "e480ZFHy+95AvgfVBbS0Pf4J9A+qULCtgqqPZbxMdwSzx6iRpSLzCUH77g";
window.typeidChain = "131|119";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="8092_2.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="../sitemap/sitemap_3.html" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="https://c.biancheng.net/templets/new/images/logo_bottom.gif" alt="底部Logo" />
<span id="return-top"><b>↑</b></span>
</div>
<div id="addweixin-widget">
<p>
<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://c.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
<img src="../templets/new/images/material/qrcode_mp_2.png" alt="微信交流群" width="120" />
<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
</p>
<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";

</script>
<script src="../templets/new/script/jquery1.12.4.min.js"></script>
<script src="https://c.biancheng.net/templets/new/script/common.js"></script>
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
</body>
</html>