<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<!-- 启用Chromium高速渲染模式 -->
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<!-- 禁止百度转码 -->
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!-- 禁止识别电话号码 -->
<meta name="format-detection" content="telephone=no" />

<link rel="shortcut icon" href="../favicon_3.ico" />
<link href="../templets/new/style/common_2.css" rel="stylesheet" />
<title>Go语言big包：对整数的高精度计算</title>
<meta name="description" content="我们知道有些时候通过编程的方式去进行计算是不精确的。如果你使用 Go语言中的 float64 类型进行浮点运算，返回结果将精确到 15 位，足以满足大多数的任务。 当对超出 int64 或者 uin" />
</head>
<body>
<div id="topbar" class="clearfix">
	<ul id="product-type" class="left">
		<li>
			<a href="../m_biancheng_default_2.html"><span class="iconfont iconfont-home"></span>首页</a>
		</li>
		<li class="active">
			<a href="../sitemap/sitemap_2.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
		</li>
		<li>
			<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
		</li>
		<li>
			<a href="niz69i_5.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
		</li>
		<!-- <li>
			<a href="https://www.54benniao.com/c_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-c-course"></span>C语言高级课程</a>
		</li>
		<li>
			<a href="https://www.54benniao.com/java_course/?from=biancheng" target="_blank"><span class="iconfont iconfont-java-course"></span>Java高级课程</a>
		</li>
		<li>
			<a href="http://vip.biancheng.net/p/q2a/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-q2a"></span>一对一答疑</a>
		</li> -->
	</ul>
</div>
<div id="header" class="clearfix">
	<a id="logo" class="left" href="../m_biancheng_default_2.html">
		<img height="26" src="../templets/new/images/logo_2.png" alt="C语言中文网" />
	</a>
	<ul id="nav-main" class="hover-none left clearfix">
		<li class="wap-yes"><a href="../m_biancheng_default_2.html">首页</a></li>
		<li><a href="../c/c_4.html">C语言教程</a></li>
		<li><a href="../cplus/cplus_2.html">C++教程</a></li>
		<li><a href="../python/python_2.html">Python教程</a></li>
		<li><a href="../java/java_2.html">Java教程</a></li>
		<li><a href="../linux_tutorial/linux_tutorial_2.html">Linux入门</a></li>
		<li><a href="../sitemap/sitemap_2.html" title="网站地图">更多&gt;&gt;</a></li>
	</ul>
	<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>

	<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
	<div id="sidebar" class="toggle-target">
	<div id="contents">
		<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="../golang/golang_2.html">Go语言</a></dt>
		
			<dd>
				<span class="channel-num">1</span>
				<a href='../golang/intro/intro_2.html'>Go语言简介</a>
			</dd>
		
			<dd>
				<span class="channel-num">2</span>
				<a href='../golang/syntax/syntax_2.html'>Go语言基本语法</a>
			</dd>
		
			<dd>
				<span class="channel-num">3</span>
				<a href='../golang/container/container_2.html'>Go语言容器</a>
			</dd>
		
			<dd>
				<span class="channel-num">4</span>
				<a href='../golang/flow_control/flow_control_2.html'>流程控制</a>
			</dd>
		
			<dd>
				<span class="channel-num">5</span>
				<a href='../golang/func/func_2.html'>Go语言函数</a>
			</dd>
		
			<dd>
				<span class="channel-num">6</span>
				<a href='../golang/struct/struct_2.html'>Go语言结构体</a>
			</dd>
		
			<dd>
				<span class="channel-num">7</span>
				<a href='../golang/interface/interface_2.html'>Go语言接口</a>
			</dd>
		<dd class="this"> <span class="channel-num">8</span> <a href="../golang/package/package_2.html">Go语言包（package）</a> </dd><dl class="dl-sub"><dd>8.1 <a href="5394_2.html">包的基本概念</a></dd><dd>8.2 <a href="5715_2.html">Go语言封装简介及实现细节</a></dd><dd>8.3 <a href="88_2.html">Go语言GOPATH</a></dd><dd>8.4 <a href="4306_2.html">Go语言常用内置包</a></dd><dd>8.5 <a href="5123_2.html">Go语言自定义包</a></dd><dd>8.6 <a href="89_2.html">Go语言package</a></dd><dd>8.7 <a href="90_2.html">Go语言导出包中的标识符</a></dd><dd>8.8 <a href="91_2.html">Go语言import导入包</a></dd><dd>8.9 <a href="vip_7338_2.html">Go语言工厂模式自动注册</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.10 <a href="vip_7339_2.html">Go语言单例模式</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.11 <a href="4307_2.html">Go语言sync包与锁</a></dd><dd>8.12 <a href="4308_2.html">Go语言big包</a></dd><dd>8.13 <a href="vip_7340_2.html">示例：使用图像包制作GIF动画</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.14 <a href="5124_2.html">Go语言正则表达式：regexp包</a></dd><dd>8.15 <a href="5392_2.html">Go语言time包：时间和日期</a></dd><dd>8.16 <a href="5572_2.html">Go语言os包用法简述</a></dd><dd>8.17 <a href="5573_2.html">Go语言flag包：命令行参数解析</a></dd><dd>8.18 <a href="5712_2.html">Go语言go mod包依赖管理工具</a></dd><dd>8.19 <a href="vip_7341_2.html">示例：使用Go语言生成二维码</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.20 <a href="vip_7342_2.html">Go语言Context（上下文）</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.21 <a href="vip_7343_2.html">示例：客户信息管理系统</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.22 <a href="vip_7344_2.html">示例：使用Go语言发送电子邮件</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.23 <a href="vip_7345_2.html">Go语言（Pingo）插件化开发</a><span class="iconfont iconfont-vip2"></span></dd><dd>8.24 <a href="vip_7346_2.html">Go语言定时器实现原理及作用</a><span class="iconfont iconfont-vip2"></span></dd></dl>
			<dd>
				<span class="channel-num">9</span>
				<a href='../golang/concurrent/concurrent_2.html'>Go语言并发</a>
			</dd>
		
			<dd>
				<span class="channel-num">10</span>
				<a href='../golang/reflect/reflect_2.html'>Go语言反射</a>
			</dd>
		
			<dd>
				<span class="channel-num">11</span>
				<a href='../golang/102/102_2.html'>Go语言文件处理</a>
			</dd>
		
			<dd>
				<span class="channel-num">12</span>
				<a href='../golang/build/build_2.html'>Go语言编译与工具</a>
			</dd>
		
	</div>
</div>
	<div id="article-wrap">
		<div id="article">
			<div class="arc-info">
	<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../m_biancheng_default_2.html">首页</a> &gt; <a href="../golang/golang_2.html">Go语言</a> &gt; <a href="../golang/package/package_2.html">Go语言包（package）</a></span>
</div>

<div id="ggxc-position-bottom" class="ggxc-box"></div>
			<h1>Go语言big包：对整数的高精度计算</h1>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
			<div id="arc-body">实际开发中，对于超出 int64 或者 uint64 类型的大数进行计算时，如果对精度没有要求，使用 float32 或者 float64 就可以胜任，但如果对精度有严格要求的时候，我们就不能使用浮点数了，因为浮点数在内存中只能被近似的表示。<br />
<br />
Go语言中 math/big 包实现了大数字的多精度计算，支持 Int（有符号整数）、Rat（有理数）和 Float（浮点数）等数字类型。<br />
<br />
这些类型可以实现任意位数的数字，只要内存足够大，但缺点是需要更大的内存和处理开销，这使得它们使用起来要比内置的数字类型慢很多。<br />
<br />
在 math/big 包中，Int 类型定义如下所示：<br />
<pre class="go">
// An Int represents a signed multi-precision integer.
// The zero value for an Int represents the value 0.
type Int struct {
    neg bool // sign
    abs nat  // absolute value of the integer
}</pre>
生成 Int 类型的方法为 NewInt()，如下所示：<br />
<pre class="go">
// NewInt allocates and returns a new Int set to x.
func NewInt(x int64) *Int {
    return new(Int).SetInt64(x)
}</pre>
<p class="tip-box">
	注意：NewInt() 函数只对 int64 有效，其他类型必须先转成 int64 才行。</p>
Go语言中还提供了许多 Set 函数，可以方便的把其他类型的整形存入 Int ，因此，我们可以先 new(int) 然后再调用 Set 函数，Set 函数有如下几种：<br />
<pre class="go">
// SetInt64 函数将 z 转换为 x 并返回 z。
func (z *Int) SetInt64(x int64) *Int {
    neg := false
    if x &lt; 0 {
        neg = true
        x = -x
    }
    z.abs = z.abs.setUint64(uint64(x))
    z.neg = neg
    return z
}
​
// SetUint64 函数将 z 转换为 x 并返回 z。
func (z *Int) SetUint64(x uint64) *Int {
    z.abs = z.abs.setUint64(x)
    z.neg = false
    return z
}
​
// Set 函数将 z 转换为 x 并返回 z。
func (z *Int) Set(x *Int) *Int {
    if z != x {
        z.abs = z.abs.set(x.abs)
        z.neg = x.neg
    }
    return z
}</pre>
示例代码如下所示：<br />
<pre class="go">
package main

import (
    &quot;fmt&quot;
    &quot;math/big&quot;
)

func main() {
    big1 := new(big.Int).SetUint64(uint64(1000))
    fmt.Println(&quot;big1 is: &quot;, big1)

    big2 := big1.Uint64()
    fmt.Println(&quot;big2 is: &quot;, big2)
}</pre>
运行结果如下：
<p class="info-box">
	big1 is:&nbsp; 1000<br />
	big2 is:&nbsp; 1000</p>
除了上述的 Set 函数，math/big 包中还提供了一个 SetString() 函数，可以指定进制数，比如二进制、十进制或者十六进制等！<br />
<pre class="go">
// SetString sets z to the value of s, interpreted in the given base,
// and returns z and a boolean indicating success. The entire string
// (not just a prefix) must be valid for success. If SetString fails,
// the value of z is undefined but the returned value is nil.
//
// The base argument must be 0 or a value between 2 and MaxBase. If the base
// is 0, the string prefix determines the actual conversion base. A prefix of
// ``0x&#39;&#39; or ``0X&#39;&#39; selects base 16; the ``0&#39;&#39; prefix selects base 8, and a
// ``0b&#39;&#39; or ``0B&#39;&#39; prefix selects base 2. Otherwise the selected base is 10.
//
func (z *Int) SetString(s string, base int) (*Int, bool) {
    r := strings.NewReader(s)
    if _, _, err := z.scan(r, base); err != nil {
        return nil, false
    }
    // entire string must have been consumed
    if _, err := r.ReadByte(); err != io.EOF {
        return nil, false
    }
    return z, true // err == io.EOF =&gt; scan consumed all of s
}</pre>
示例代码如下所示：<br />
<pre class="go">
package main

import (
    &quot;fmt&quot;
    &quot;math/big&quot;
)

func main() {
    big1, _ := new(big.Int).SetString(&quot;1000&quot;, 10)
    fmt.Println(&quot;big1 is: &quot;, big1)

    big2 := big1.Uint64()
    fmt.Println(&quot;big2 is: &quot;, big2)
}</pre>
运行结果如下：
<p class="info-box">
	big1 is:&nbsp; 1000<br />
	big2 is:&nbsp; 1000</p>
因为Go语言不支持运算符重载，所以所有大数字类型都有像是 Add() 和 Mul() 这样的方法。<br />
<br />
Add 方法的定义如下所示：
<p class="info-box">
	func (z *Int) Add(x, y *Int) *Int</p>
该方法会将 z 转换为 x + y 并返回 z。<br />
<br />
【示例】计算第 1000 位的斐波那契数列。<br />
<pre class="go">
package main

import (
&nbsp;&nbsp;&nbsp; &quot;fmt&quot;
&nbsp;&nbsp;&nbsp; &quot;math/big&quot;
&nbsp;&nbsp;&nbsp; &quot;time&quot;
)

const LIM = 1000 //求第1000位的斐波那契数列

var fibs [LIM]*big.Int //使用数组保存计算出来的数列的指针

func main() {
&nbsp;&nbsp;&nbsp; result := big.NewInt(0)
&nbsp;&nbsp;&nbsp; start := time.Now()
&nbsp;&nbsp;&nbsp; for i := 0; i &lt; LIM; i++ {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; result = fibonacci(i)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fmt.Printf(&quot;数列第 %d 位: %d\n&quot;, i+1, result)
&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; end := time.Now()
&nbsp;&nbsp;&nbsp; delta := end.Sub(start)
&nbsp;&nbsp;&nbsp; fmt.Printf(&quot;执行完成，所耗时间为: %s\n&quot;, delta)
}

func fibonacci(n int) (res *big.Int) {
&nbsp;&nbsp;&nbsp; if n &lt;= 1 {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res = big.NewInt(1)
&nbsp;&nbsp;&nbsp; } else {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp := new(big.Int)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; res = temp.Add(fibs[n-1], fibs[n-2])
&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; fibs[n] = res
&nbsp;&nbsp;&nbsp; return
}</pre>
运行结果如下：
<p class="info-box">
	数列第 1 位: 1<br />
	数列第 2 位: 1<br />
	数列第 3 位: 2<br />
	数列第 4 位: 3<br />
	数列第 5 位: 5<br />
	...<br />
	数列第 997 位: 10261062362033262336604926729245222132668558120602124277764622905699407982546711488272859468887457959<br />
	08773311924256407785074365766118082732679853917775891982813511440749936979646564952426675539110499009<br />
	9120377<br />
	数列第 998 位: 16602747662452097049541800472897701834948051198384828062358553091918573717701170201065510185595898605<br />
	10409473691887927846223301598102952299783631123261876053919903676539979992673143323971886037334508837<br />
	5054249<br />
	数列第 999 位: 26863810024485359386146727202142923967616609318986952340123175997617981700247881689338369654483356564<br />
	19182785616144335631297667364221035032463485041037768036733415117289916972319708276398561576445007847<br />
	4174626<br />
	数列第 1000 位: 4346655768693745643568852767504062580256466051737178040248172908953655541794905189040387984007925516<br />
	92959225930803226347752096896232398733224711616429964409065331879382989696499285160037044761377951668<br />
	49228875<br />
	执行完成，所耗时间为: 6.945ms</p>
</div>
			<div id="ggxc-weixin-arcbottom">
	<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
	<p style="margin-top:12px; text-align:center;">
		<img src="../templets/new/images/material/qrcode_mp_4.png" alt="公众号二维码" width="160" /><br />
		<span class="col-green">微信扫码关注公众号</span>
	</p>
</div>
			<div class="pre-next-page clearfix">&nbsp;</div>
			<div id="nice-arcs" class="box-bottom">
    <h4>推荐阅读</h4>
    <ul class="clearfix">
<li><a href="niz69i_8.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="tnnfqo_4.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="unnurw_4.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="1805_2.html" title="C语言if else语句详解" target="_blank">C语言if else语句详解</a></li>
<li><a href="../mysql/length_2.html" title="MySQL LENGTH函数：获取字符串长度" target="_blank">MySQL LENGTH函数：获取字符串长度</a></li>
<li><a href="7807_2.html" title="C++11 constexpr和const的区别详解" target="_blank">C++11 constexpr和const的区别详解</a></li>
<li><a href="../mongodb2/shard_2.html" title="MongoDB分片" target="_blank">MongoDB分片</a></li>
<li><a href="../redis2/zrevrank_2.html" title="Redis ZREVRANK命令" target="_blank">Redis ZREVRANK命令</a></li>
<li><a href="9416_2.html" title="Qt QPushButton按钮用法详解" target="_blank">Qt QPushButton按钮用法详解</a></li>
<li><a href="9795_2.html" title="JavaScript是什么" target="_blank">JavaScript是什么</a></li>
</ul>
</div>
		</div>
		
	</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 4308;
window.arcId = "8a84XWu+pefDu9bN7b6E2c8WasFw4VV/2sn4HcYnS11nywZl000oZf5Fc/c";
window.typeidChain = "11|1";
</script>
<div id="footer" class="clearfix">
	<div class="info left">
	<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
	<p>
		<a href="8066_2.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
		<a href="8092_3.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
		<a href="8097_2.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
		<a href="9648_2.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
		<a href="8093_2.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
		<a href="../sitemap/sitemap_2.html" target="_blank" rel="nofollow">网站地图</a>
	</p>
	<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan_2.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
	</p>
	</div>
	<img id="logo_bottom" class="right" src="https://m.biancheng.net/templets/new/images/logo_bottom_2.gif" alt="底部Logo" />
	<span id="return-top"><b>↑</b></span>
</div>

<div id="addweixin-widget">
	<p>
		<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://m.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
		<img src="https://m.biancheng.net/templets/new/images/material/qrcode_mp_4.png" alt="微信交流群" width="120" />
		<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
	</p>
	<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>

<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/view/4307.html";
window.nextPageURL = "/view/vip_7340.html";
</script>

<script src="https://m.biancheng.net/templets/new/script/jquery1.12.4.min_2.js"></script>
<script src="https://m.biancheng.net/templets/new/script/common_2.js"></script>
<!-- 51la V6 -->
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
<!-- 51la V5 -->
<!-- <span style="display: none;"><script type="text/javascript" src="https://js.users.51.la/21368967.js"></script></span> -->
</body>
</html>