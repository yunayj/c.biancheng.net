<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="../favicon.ico" />
<link href="../templets/new/style/common.css" rel="stylesheet" />
<title>Linux crontab命令：循环执行定时任务（详解版）</title>
<meta name="description" content="at 命令仅仅可以在指定的时间执行一次任务，但是在实际工作中，系统的定时任务一般是需要重复执行的。这时 at 命令已经不够使用了，我们就需要 利用 crontab 命令 来执行循环定时任" />
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="../c_biancheng_default.html"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="../sitemap/sitemap_3.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="niz69i.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="../c_biancheng_default.html">
<img height="26" src="../templets/new/images/logo.png" alt="C语言中文网" />
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="../c_biancheng_default.html">首页</a></li>
<li><a href="../c/c_3.html">C语言教程</a></li>
<li><a href="../cplus/cplus.html">C++教程</a></li>
<li><a href="../python/python.html">Python教程</a></li>
<li><a href="../java/java_3.html">Java教程</a></li>
<li><a href="../linux_tutorial/linux_tutorial.html">Linux入门</a></li>
<li><a href="../sitemap/sitemap_3.html" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
<div id="sidebar" class="toggle-target">
<div id="contents">
<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="../linux_tutorial/linux_tutorial.html">Linux</a></dt>
<dd>
<span class="channel-num">1</span>
<a href='../linux_tutorial/10/10.html'>Linux简介</a>
</dd>
<dd>
<span class="channel-num">2</span>
<a href='../linux_tutorial/20/20.html'>Linux安装</a>
</dd>
<dd>
<span class="channel-num">3</span>
<a href='../linux_tutorial/file_content/file_content.html'>Linux文件和目录管理</a>
</dd>
<dd>
<span class="channel-num">4</span>
<a href='../linux_tutorial/bale_compress/bale_compress.html'>Linux打包（归档）和压缩</a>
</dd>
<dd>
<span class="channel-num">5</span>
<a href='../linux_tutorial/40/40.html'>Vim文本编辑器</a>
</dd>
<dd>
<span class="channel-num">6</span>
<a href='../linux_tutorial/text_processing/text_processing.html'>Linux文本处理（Linux三剑客）</a>
</dd>
<dd>
<span class="channel-num">7</span>
<a href='../linux_tutorial/50/50.html'>Linux软件安装</a>
</dd>
<dd>
<span class="channel-num">8</span>
<a href='../linux_tutorial/60/60.html'>Linux用户和用户组管理</a>
</dd>
<dd>
<span class="channel-num">9</span>
<a href='../linux_tutorial/70/70.html'>Linux权限管理</a>
</dd>
<dd>
<span class="channel-num">10</span>
<a href='../linux_tutorial/80/80.html'>Linux文件系统管理</a>
</dd>
<dd>
<span class="channel-num">11</span>
<a href='../linux_tutorial/90/90.html'>Linux高级文件系统管理</a>
</dd>
<dd class="this"> <span class="channel-num">12</span> <a href="../linux_tutorial/14/14.html">Linux系统管理</a> </dd><dl class="dl-sub"><dd>12.1 <a href="1061.html">Linux进程管理</a></dd><dd>12.2 <a href="6098.html">Linux进程启动的方式有几种？</a></dd><dd>12.3 <a href="1062.html">Linux如何查看正在运行的进程（ps命令）</a></dd><dd>12.4 <a href="1065.html">Linux实时监听进程运行状态（top命令）</a></dd><dd>12.5 <a href="1066.html">Linux查看进程树（pstree命令）</a></dd><dd>12.6 <a href="1088.html">Linux列出进程调用或打开的文件信息（lsof命令）</a></dd><dd>12.7 <a href="1073.html">Linux进程优先级</a></dd><dd>12.8 <a href="1074.html">Linux调整进程的优先级（nice和renice命令）</a></dd><dd>12.9 <a href="1069.html">Linux常用信号（进程间通信）</a></dd><dd>12.10 <a href="1068.html">Linux终止进程（kill命令）</a></dd><dd>12.11 <a href="1070.html">Linux终止特定的一类进程（killall命令）</a></dd><dd>12.12 <a href="1071.html">Linux按终端号踢出当前登陆用户（pkill命令）</a></dd><dd>12.13 <a href="1075.html">Linux工作管理</a></dd><dd>12.14 <a href="1076.html">Linux命令放入后台运行</a></dd><dd>12.15 <a href="1077.html">Linux查看当前终端放入后台的工作（jobs命令）</a></dd><dd>12.16 <a href="1078.html">Linux把后台命令恢复在前台执行（fg命令）</a></dd><dd>12.17 <a href="1079.html">Linux把后台暂停的工作恢复执行（bg命令）</a></dd><dd>12.18 <a href="1080.html">Linux将后台命令脱离终端运行（nohup命令）</a></dd><dd>12.19 <a href="1090.html">Linux定时执行任务（at命令）</a></dd><dd>12.20 <a href="1092.html">Linux循环执行定时任务（crontab命令）</a></dd><dd>12.21 <a href="1095.html">Linux检测长期未执行的定时任务（anacron命令）</a></dd><dd>12.22 <a href="1081.html">Linux查看系统资源的使用情况（vmstat命令）</a></dd><dd>12.23 <a href="1082.html">Linux查看开机信息（dmesg命令）</a></dd><dd>12.24 <a href="1083.html">Linux查看内存使用状态（free命令）</a></dd><dd>12.25 <a href="3869.html">Linux查看登陆用户信息（w和who命令）</a></dd><dd>12.26 <a href="3875.html">Linux查看过去登陆的用户信息（last和lastlog命令）</a></dd></dl>
<dd>
<span class="channel-num">13</span>
<a href='../linux_tutorial/17/17.html'>Linux备份与恢复</a>
</dd>
<dd>
<span class="channel-num">14</span>
<a href='../linux_tutorial/13/13.html'>Linux系统服务管理</a>
</dd>
<dd>
<span class="channel-num">15</span>
<a href='../linux_tutorial/15/15.html'>Linux系统日志管理</a>
</dd>
<dd>
<span class="channel-num">16</span>
<a href='../linux_tutorial/12/12.html'>Linux启动管理</a>
</dd>
<dd>
<span class="channel-num">17</span>
<a href='../linux_tutorial/16/16.html'>LAMP环境搭建和LNMP环境搭建</a>
</dd>
<dd>
<span class="channel-num">18</span>
<a href='../linux_tutorial/18/18.html'>SELinux管理</a>
</dd>
</div>
</div>
<div id="article-wrap">
<div id="article">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../c_biancheng_default.html">首页</a> &gt; <a href="../linux_tutorial/linux_tutorial.html">Linux</a> &gt; <a href="../linux_tutorial/14/14.html">Linux系统管理</a></span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"></div>
<h1>Linux crontab命令：循环执行定时任务（详解版）</h1>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
<div id="arc-body">前面学习了 at 命令，此命令在指定的时间仅能执行一次任务，但在实际工作中，系统的定时任务一般是需要重复执行的。而 at 命令显然无法满足需求，这是就需要使用<strong><span style="color: rgb(0, 128, 0);">&nbsp;</span></strong><span style="color: rgb(0, 128, 0);">crontab 命令</span>来执行循环定时任务。<br />
<br />
在介绍 crontab 命令之前，我们首先要介绍一下 crond，因为 crontab 命令需要 crond 服务支持。crond 是 Linux 下用来周期地执行某种任务或等待处理某些事件的一个守护进程，和 Windows 中的计划任务有些类似。<br />
<br />
crond 服务的启动和自启动方法如下：<br />
<p class="info-box">
[root@localhost ~]# service crond restart<br />
停止 crond： [确定]<br />
正在启动 crond： [确定]<br />
#重新启动crond服务<br />
[root@localhost ~]# chkconfig crond on<br />
#设定crond服务为开机自启动</p>
其实，在安装完成操作系统后，默认会安装 crond 服务工具，且 crond 服务默认就是自启动的。crond 进程每分钟会定期检查是否有要执行的任务，如果有，则会自动执行该任务。<br />
<br />
接下来，在介绍 crontab 命令。该命令和 at 命令类似，也是通过 /etc/cron.allow 和 /etc/cron.deny 文件来限制某些用户是否可以使用 crontab 命令的。而且原则也非常相似：<br />
<ul>
<li>
当系统中有 /etc/cron.allow 文件时，只有写入此文件的用户可以使用 crontab 命令，没有写入的用户不能使用 crontab 命令。同样，如果有此文件，/etc/cron.deny 文件会被忽略，因为 /etc/cron.allow 文件的优先级更高。</li>
<li>
当系统中只有 /etc/cron.deny 文件时，写入此文件的用户不能使用 crontab 命令，没有写入文件的用户可以使用 crontab 命令。</li>
<li>
这个规则基本和 at 命令的规则一致，同样是 /etc/cron.allow 文件比 /etc/cron.deny 文件的优先级高，Linux 系统中默认只有 /etc/cron.deny 文件。</li>
</ul>
<br />
每个用户都可以实现自己的 crontab 定时任务，只需使用这个用户身份执行&ldquo;crontab -e&rdquo;命令即可。当然，这个用户不能写入 /etc/cron.deny 文件。<br />
<br />
crontab 命令的基本格式如下：<br />
<p class="info-box">
[root@localhost ~]# crontab [选项] [file]</p>
注意，这里的 file 指的是命令文件的名字，表示将 file 作为 crontab 的任务列表文件并载入 crontab，若在命令行中未指定文件名，则此命令将接受标准输入（键盘）上键入的命令，并将它们键入 crontab。<br />
<br />
与此同时，表 1 罗列出了此命令常用的选项及功能。<br />
<br />
<table>
<caption>
表 1 crontab 命令常用选项及功能</caption>
<tbody>
<tr>
<th>
选项</th>
<th>
功能</th>
</tr>
<tr>
<td>
-u user</td>
<td>
用来设定某个用户的 crontab 服务，例如 &quot;-u demo&quot; 表示设备 demo<br />
用户的 crontab 服务，此选项一般有 root 用户来运行。</td>
</tr>
<tr>
<td>
-e</td>
<td>
编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。</td>
</tr>
<tr>
<td>
-l</td>
<td>
显示某用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。</td>
</tr>
<tr>
<td>
-r&nbsp;</td>
<td>
从 /var/spool/cron 删除某用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。&nbsp;</td>
</tr>
<tr>
<td>
-i</td>
<td>
在删除用户的 crontab 文件时，给确认提示。</td>
</tr>
</tbody>
</table>
<br />
其实 crontab 定时任务非常简单，只需执行&ldquo;crontab -e&rdquo;命令，然后输入想要定时执行的任务即可。不过，当我们执行&ldquo;crontab -e&rdquo;命令时，打开的是一个空文件，而且操作方法和 Vim 是一致的。那么，这个文件的格式才是我们真正需要学习的内容。文件格式如下：<br />
<p class="info-box">
[root@localhost ！]# crontab -e<br />
#进入 crontab 编辑界面。会打开Vim编辑你的任务<br />
* * * * * 执行的任务</p>
这个文件中是通过 5 个&ldquo;*&rdquo;来确定命令或任务的执行时间的，这 5 个&ldquo;*&rdquo;的具体含义如表 2 所示。<br />
<br />
<table>
<caption>
表 2&nbsp;crontab 时间表示</caption>
<tbody>
<tr>
<th>
项目</th>
<th>
含义</th>
<th>
范围</th>
</tr>
<tr>
<td>
第一个&quot;*&quot;</td>
<td>
一小时当中的第几分钟（minute）</td>
<td>
0~59</td>
</tr>
<tr>
<td>
第二个&quot;*&quot;</td>
<td>
一天当中的第几小时（hour）</td>
<td>
0~23</td>
</tr>
<tr>
<td>
第三个&quot;*&quot;</td>
<td>
一个月当中的第几天（day）</td>
<td>
1~31</td>
</tr>
<tr>
<td>
第四个&quot;*&quot;</td>
<td>
一年当中的第几个月（month）</td>
<td>
1~12</td>
</tr>
<tr>
<td>
第五个&quot;*&quot;</td>
<td>
一周当中的星期几（week）</td>
<td>
0~7（0和7都代表星期日）</td>
</tr>
</tbody>
</table>
<br />
在时间表示中，还有一些特殊符号需要学习，如表 3 所示。<br />
<br />
<table>
<caption>
表 3&nbsp;时间特殊符号</caption>
<tbody>
<tr>
<th>
特殊符号</th>
<th>
含义</th>
</tr>
<tr>
<td>
*（星号）</td>
<td>
代表任何时间。比如第一个&quot;*&quot;就代表一小时种每分钟都执行一次的意思。</td>
</tr>
<tr>
<td>
,（逗号）</td>
<td>
代表不连续的时间。比如&quot;0 8，12，16***命令&quot;就代表在每天的 8 点 0 分、12 点 0 分、16 点 0 分都执行一次命令。</td>
</tr>
<tr>
<td>
-（中杠）</td>
<td>
代表连续的时间范围。比如&quot;0 5 ** 1-6命令&quot;，代表在周一到周六的凌晨&nbsp;5 点 0 分执行命令。</td>
</tr>
<tr>
<td>
/（正斜线）</td>
<td>
代表每隔多久执行一次。比如&quot;*/10****命令&quot;，代表每隔 10 分钟就执行一次命令。</td>
</tr>
</tbody>
</table>
<br />
当&ldquo;crontab -e&rdquo;编辑完成之后，一旦保存退出，那么这个定时任务实际就会写入 /var/spool/cron/ 目录中，每个用户的定时任务用自己的用户名进行区分。而且 crontab 命令只要保存就会生效，只要 crond 服务是启动的。知道了这 5 个时间字段的含义，我们多举几个时间的例子来熟悉一下时间字段，如表 4 所示。<br />
<br />
<table>
<caption>
表 4&nbsp;crontab举例</caption>
<tbody>
<tr>
<th>
时间</th>
<th>
含义</th>
</tr>
<tr>
<td>
45 22 ***命令</td>
<td>
在 22 点 45 分执行命令</td>
</tr>
<tr>
<td>
0 17 ** 1命令</td>
<td>
在每周一的 17 点 0 分执行命令</td>
</tr>
<tr>
<td>
0 5 1，15**命令</td>
<td>
在每月 1 日和 15 日的凌晨 5 点 0 分执行命令</td>
</tr>
<tr>
<td>
40 4 ** 1-5命令</td>
<td>
在每周一到周五的凌晨 4 点 40 分执行命令</td>
</tr>
<tr>
<td>
*/10 4 ***命令</td>
<td>
在每天的凌晨 4 点，每隔 10 分钟执行一次命令</td>
</tr>
<tr>
<td>
0 0 1，15 * 1命令</td>
<td>
在每月 1 日和 15 日，每周一个 0 点 0 分都会执行命令，注意：星期几和几日最好不要同时出现，因为它们定义的都是天，非常容易让管理员混淆</td>
</tr>
</tbody>
</table>
<br />
现在我们已经对这 5 个时间字段非常熟悉了，可是在&ldquo;执行的任务&rdquo;字段中都可以写什么呢？既可以定时执行系统命令，也可以定时执行某个 Shell 脚本，这里举几个实际的例子。<br />
<br />
【例 1】让系统每隔 5 分钟就向 /tmp/test 文件中写入一行&ldquo;11&rdquo;，验证一下系统定时任务是否会执行。<br />
<p class="info-box">
[root@localhost ~]# crontab -e<br />
#进入编辑界面<br />
*/5 * * * * /bin/echo &quot;11&quot; &gt;&gt; /tmp/test</p>
这个任务在时间工作中没有任何意义，但是可以很简单地验证我们的定时任务是否可以正常执行。如果觉得每隔 5 分钟太长，那就换成&ldquo;*&rdquo;，让它每分钟执行一次。而且和 at 命令一样，如果我们定时执行的是系统命令，那么最好使用绝对路径。<br />
<br />
【例 2】让系统在每周二的凌晨 5 点 05 分重启一次。<br />
<p class="info-box">
[root@localhost ~]# crontab -e<br />
5.5 * * 2 /sbin/shutdown -r now</p>
如果服务器的负载压力比较大，则建议每周重启一次，让系统状态归零。比如绝大多数游戏服务器每周维护一次，维护时最主要的工作就是重启，让系统状态归零。这时可以让我们的服务器自动来定时执行。<br />
<br />
【例 3】在每月 1 日、10 日、15 日的凌晨 3 点 30 分都定时执行日志备份脚本 autobak.sh。<br />
<p class="info-box">
[root@localhost ~]# crontab -e<br />
30.3 1，10，15 * * /root/sh/autobak.sh</p>
这些定时任务保存之后，就可以在指定的时间执行了。我们可以使用命令来查看和删除定时任务，命令如下：<br />
<p class="info-box">
[root@localhost ~]# crontab -l<br />
#查看root用户的crontab任务<br />
*/5 * * * * /bin/echo &quot;11&quot; &gt;&gt; /tmp/test<br />
5.5 * * 2 /sbin/shutdown -r now<br />
30.3 1，10，15 * * /root/sh/autobak.sh<br />
[root@localhost ~]# crontab -r<br />
#删除root用户所有的定时任务。如果只想删除某个定时任务，则可以执行&ldquo;crontab -e&rdquo;命令进入<br />
#编辑模式手工删除<br />
[root@localhost ~]# crontab -l<br />
no crontab for root<br />
#删除后，再查询就没有root用户的定时任务了</p>
<br />
在书写 crontab 定时任务时，需要注意以下几个事项：<br />
<ul>
<li>
6 个选项都不能为空，必须填写。如果不确定，则使用&ldquo;*&rdquo;代表任意时间。</li>
<li>
crontab 定时任务的最小有效时间是分钟，最大有效时间是月。像 2018 年某时执行、3 点 30 分 30 秒这样的时间都不能被识别。</li>
<li>
在定义时间时，日期和星期最好不要在一条定时任务中出现，因为它们都以天为单位，非常容易让管理员混淆。</li>
<li>
在定时任务中，不管是直接写命令，还是在脚本中写命令，最好都使用绝对路径。有时使用相对路径的命令会报错。</li>
</ul>
<h2>
系统的crontab设置</h2>
&ldquo;crontab -e&rdquo;是每个用户都可以执行的命令，也就是说，不同的用户身份可以执行自己的定时任务。但是有些定时任务需要系统执行，这时就需要编辑 /etc/crontab 这个配置文件了。<br />
<br />
当然，并不是说写入 /etc/crontab 配置文件中的定时任务在执行时不需要用户身份，而是&ldquo;crontab -e&rdquo;命令在定义定时任务时，默认用户身份是当前登录用户。而在修改 /etc/crontab 配置文件时，定时任务的执行者身份是可以手工指定的。这样定时任务的执行会更加灵活，修改起来也更加方便。<br />
<br />
那我们打开这个文件看看吧，如下：<br />
<p class="info-box">
[root@localhost ~]# vi /etc/crontab<br />
SHELL=/bin/bash<br />
#标识使用哪种Shell<br />
PATH=/sbin：/bin：/usr/sbin：/usr/bin<br />
#指定PATH环境变量。crontab使用自己的PATH，而不使用系统默认的PATH，所以在定时任务中出现的<br />
#命令最好使用大写<br />
MAILTO=root<br />
#如果有报错输出，或命令结果有输出，则会向root发送信息<br />
HOME=/<br />
#标识主目录<br />
# For details see man 4 crontabs<br />
#提示大家可以去&ldquo;man 4 crontabs&rdquo;查看帮助<br />
# Example of job definition：<br />
#.&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; minute (0 - 59)<br />
# |.&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; hour (0 - 23)<br />
# | |.&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; day of month (1 - 31)<br />
# | | |.&mdash;&mdash;&mdash;&mdash; month (1 - 12) OR jan，feb，mar，apr&hellip;&hellip;<br />
# | | | | .&mdash;&mdash;&mdash;day of week(0-6)(Sunday=0 or 7)OR sun，mon，tue，wed，thu，fri，sat<br />
# | | | | |<br />
# * * * * * user-name command to be executed<br />
#分 时日月周执行者身份命令<br />
#列出文件格式，并加入了注释</p>
在 CentOS 6.x 中，/etc/crontab 文件也发生了变化。在 CentOS 5.x 中，这个文件的内容大概是这样子的：<br />
<p class="info-box">
#以下输出在CentOS 5.5中<br />
[root@sc ~]# vi /etc/crontab<br />
SHELL=/bin/bash<br />
PATH=/sbin：/bin：/usr/sbin：/usr/bin<br />
MAILTO=root<br />
HOME=/<br />
# run-parts<br />
01 * * * * root run-parts /etc/cron.hourly<br />
02.4 * * * root run-parts /etc/cron.daily<br />
22.4 * * 0 root run-parts /etc/cron.weekly<br />
42.4 1 * * root run-parts /etc/cron.monthly</p>
在 CentOS 5.x 中，/etc/crontab 文件会使用 run-parts 脚本执行 /etc/cron.{daily，weekly，monthly} 目录中的所有文件。这个 run-parts 其实是一个 Shell 脚本，保存在 /usr/bin/run-parts 中，它的作用就是把其后面跟随的目录中的所有可执行文件依次执行。也就是说，如果我们想让某个脚本在每天都执行一次，那么可以不用手工去写定时任务，而只需要给这个脚本赋予执行权限，并把它放入 /etc/cron.daily/ 目录中，这样这个脚本就会在每天的凌晨 4 点 02 分执行了。<br />
<br />
但是在 CentOS 6.x 中，/etc/crontab 文件中不再有相关的段落，那么 run-ptars 这种定时任务的执行方法是否不可用了呢？<br />
<br />
我们看到 /etc/crontab 中有一句提示，让我们&ldquo;man 4 crontabs&rdquo;来查看帮助，那么我们就看看这个帮助吧！在这个帮助中，写明了&ldquo;在旧版本的 crontab 配置文件中，通过 run-parts 脚本来调用 cron.{daily，weekly，monthly} 目录，定时执行这些目录中的脚本。在当前系统中，为了避免 cron 和 anacron 之间产生冲突，只要 anacron 已经安装，就使用 anacron 来执行这些目录中的脚本。具体可以查看 anacron(8) 的帮助&rdquo;。对于 anacron 的用法，后续章节再详解介绍。<br />
<br />
其实，对用户来讲，并不需要知道这个定时任务到底是由哪个程序调用的。我们需要知道的事情是如何使用系统的 crontab 设置。对此，新、老版本的 CentOS 没有区别，配置方法都有两种。<br />
<br />
第一种方法就是把需要定时执行的工作写成脚本程序，并赋予执行权限，然后直接把这个脚本复制到 /etc/cron.{daily，weekly，monthly} 目录中的任意一个。比如，我需要让某个脚本每周执行，就把这个脚本复制到 /etc/cron.weekly/ 目录中。这样这个脚本就会每周执行一次，具体的执行时间要参考 anacron 的配置文件。<br />
<br />
第二种方法就是修改 /etc/crontab 这个配置文件，加入自己的定时任务，不过需要注意指定脚本的执行者身份。例如：<br />
<p class="info-box">
[root@localhost ~]# vi /etc/crontab<br />
&hellip;省略部分输出&hellip;<br />
* * * * * root run-parts /root/cron/<br />
#让系统每分钟都执行一次/root/cron/目录中的脚本，脚本执行者是root用户<br />
#虽然在CentOS 6.x中不直接通过此配置文件调用/etc/cron.{daily，weekly，monthly}这些目录，但是run-parts脚本还是可以使用的。所以我完全可以参照CentOS 5.x的方法来写定时任务<br />
#使用run-parts脚本调用并执行/root/cron/目录中所有的可执行文件<br />
[root@localhost ~]# mkdir cron<br />
#建立/root/cron/目录<br />
[root@localhost cron]# vi /root/cron/hello.sh<br />
#/bin/bash<br />
echo &quot;hello&quot; &gt;&gt; /root/cron/hello.log<br />
#在/root/cron/hello.log文件中写入&ldquo;hello&rdquo;<br />
[root@localhost cron]# chmod 755 hello.sh<br />
#赋予执行权限<br />
#因为hello.sh脚本放入了/root/cron/目录中，所以每分钟执行一次。</p>
只要保存 /etc/crontab 文件，这个定时任务就可以执行了。当然要确定 crond 服务是运行的。<br />
<br />
这两种方法都是可以使用的，具体看个人的习惯。不过，要想修改 /etc/crontab 文件，必须是 root 用户，普通用户不能修改，只能使用用户身份的 crontab 命令。</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
<p style="margin-top:12px; text-align:center;">
<img src="../templets/new/images/material/qrcode_mp.png" alt="公众号二维码" width="160" /><br />
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="nice-arcs" class="box-bottom">
<h4>推荐阅读</h4>
<ul class="clearfix">
<li><a href="niz69i_4.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="tnnfqo_2.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="unnurw_2.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="2359.html" title="基于UDP的服务器端和客户端" target="_blank">基于UDP的服务器端和客户端</a></li>
<li><a href="2433.html" title="MySQL修改数据表（ALTER TABLE语句）" target="_blank">MySQL修改数据表（ALTER TABLE语句）</a></li>
<li><a href="3388.html" title="二叉树先序遍历（递归与非递归）及C语言实现" target="_blank">二叉树先序遍历（递归与非递归）及C语言实现</a></li>
<li><a href="4164.html" title="Mac OS安装Python环境" target="_blank">Mac OS安装Python环境</a></li>
<li><a href="5573.html" title="Go语言flag包：命令行参数解析" target="_blank">Go语言flag包：命令行参数解析</a></li>
<li><a href="6782.html" title="Java Collection接口详解" target="_blank">Java Collection接口详解</a></li>
<li><a href="../mongodb2/indexs.html" title="MongoDB索引" target="_blank">MongoDB索引</a></li>
</ul>
</div>
</div>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 1092;
window.arcId = "18bfy5t4YS9gBwalP1OXLUlDUyrZ7CvKp9IIUiUXYP5xLEqIedXR4KDr3lY";
window.typeidChain = "104|77";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="8092_2.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="../sitemap/sitemap_3.html" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="https://c.biancheng.net/templets/new/images/logo_bottom.gif" alt="底部Logo" />
<span id="return-top"><b>↑</b></span>
</div>
<div id="addweixin-widget">
<p>
<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://c.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
<img src="../templets/new/images/material/qrcode_mp_2.png" alt="微信交流群" width="120" />
<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
</p>
<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/view/1090.html";
window.nextPageURL = "/view/1095.html";
</script>
<script src="../templets/new/script/jquery1.12.4.min.js"></script>
<script src="https://c.biancheng.net/templets/new/script/common.js"></script>
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
</body>
</html>