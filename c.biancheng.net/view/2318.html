<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="../favicon.ico" />
<link href="../templets/new/style/common.css" rel="stylesheet" />
<title>C++类模板5分钟入门教程</title>
<meta name="description" content="C++ 除了支持 函数模板 ，还支持 类模板（Class Template） 。函数模板中定义的类型参数可以用在函数声明和函数定义中，类模板中定义的类型参数可以用在类声明和类实现中。类模板的目" />
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="../c_biancheng_default.html"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="../sitemap/sitemap_3.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="niz69i.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="../c_biancheng_default.html">
<img height="26" src="../templets/new/images/logo.png" alt="C语言中文网" />
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="../c_biancheng_default.html">首页</a></li>
<li><a href="../c/c_3.html">C语言教程</a></li>
<li><a href="../cplus/cplus.html">C++教程</a></li>
<li><a href="../python/python.html">Python教程</a></li>
<li><a href="../java/java_3.html">Java教程</a></li>
<li><a href="../linux_tutorial/linux_tutorial.html">Linux入门</a></li>
<li><a href="../sitemap/sitemap_3.html" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
<div id="sidebar" class="toggle-target">
<div id="contents">
<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="../cplus/cplus.html">C++</a></dt>
<dd>
<span class="channel-num">1</span>
<a href='../cplus/c2cpp/c2cpp.html'>从C到C++</a>
</dd>
<dd>
<span class="channel-num">2</span>
<a href='../cplus/class/class.html'>类和对象</a>
</dd>
<dd>
<span class="channel-num">3</span>
<a href='../cplus/25/25.html'>C++引用</a>
</dd>
<dd>
<span class="channel-num">4</span>
<a href='../cplus/inherit/inherit.html'>继承与派生</a>
</dd>
<dd>
<span class="channel-num">5</span>
<a href='../cplus/polymorphism/polymorphism.html'>C++多态与虚函数</a>
</dd>
<dd>
<span class="channel-num">6</span>
<a href='../cplus/operator/operator.html'>运算符重载</a>
</dd>
<dd class="this"> <span class="channel-num">7</span> <a href="../cplus/70/70.html">模板</a> </dd><dl class="dl-sub"><dd>7.1 <a href="2317.html">C++函数模板入门教程</a></dd><dd>7.2 <a href="2318.html">C++类模板入门教程</a></dd><dd>7.3 <a href="2319.html">大话C++模板编程的来龙去脉</a></dd><dd>7.4 <a href="vip_2320.html">C++函数模板的重载</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.5 <a href="vip_2321.html">C++函数模板的实参推断</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.6 <a href="vip_2322.html">C++模板的显式具体化</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.7 <a href="vip_2323.html">C++模板中的非类型参数</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.8 <a href="vip_2324.html">C++模板的实例化</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.9 <a href="vip_2325.html">将C++模板应用于多文件编程</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.10 <a href="vip_2326.html">C++模板的显式实例化</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.11 <a href="vip_2327.html">C++类模板与继承</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.12 <a href="vip_2328.html">C++类模板与友元</a><span class="iconfont iconfont-vip2"></span></dd><dd>7.13 <a href="vip_2329.html">C++类模板中的静态成员</a><span class="iconfont iconfont-vip2"></span></dd></dl>
<dd>
<span class="channel-num">8</span>
<a href='../cplus/exception/exception.html'>C++异常</a>
</dd>
<dd>
<span class="channel-num">9</span>
<a href='../cplus/100/100.html'>面向对象进阶</a>
</dd>
<dd>
<span class="channel-num">10</span>
<a href='../cplus/50/50.html'>输入输出流</a>
</dd>
<dd>
<span class="channel-num">11</span>
<a href='../cplus/60/60.html'>文件操作</a>
</dd>
<dd>
<span class="channel-num">12</span>
<a href='../cplus/more_file/more_file.html'>C++多文件编程</a>
</dd>
</div>
</div>
<div id="article-wrap">
<div id="article">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../c_biancheng_default.html">首页</a> &gt; <a href="../cplus/cplus.html">C++</a> &gt; <a href="../cplus/70/70.html">模板</a></span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"></div>
<h1>C++类模板5分钟入门教程</h1>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
<div id="arc-body"><a href='../cplus/cplus.html' target='_blank'>C++</a> 除了支持<a href="2317.html" target="_blank">函数模板</a>，还支持<strong><span style="color: #008000">类模板（Class Template）</span></strong>。函数模板中定义的类型参数可以用在函数声明和函数定义中，类模板中定义的类型参数可以用在类声明和类实现中。类模板的目的同样是将数据的类型参数化。<br />
<br />
声明类模板的语法为：
<p class="info-box">
template&lt;typename 类型参数1 , typename 类型参数2 , &hellip;&gt; class 类名{<br />
&nbsp; &nbsp; //TODO:<br />
};</p>
类模板和函数模板都是以 template 开头（当然也可以使用 class，目前来讲它们没有任何区别），后跟类型参数；类型参数不能为空，多个类型参数用逗号隔开。<br />
<br />
<span style="color: #b22222">一但声明了类模板，就可以将类型参数用于类的成员函数和成员变量了。换句话说，原来使用 int、float、char 等内置类型的地方，都可以用类型参数来代替。</span><br />
<br />
假如我们现在要定义一个类来表示坐标，要求坐标的数据类型可以是整数、小数和字符串，例如：
<ul>
<li>
x = 10、y = 10</li>
<li>
x = 12.88、y = 129.65</li>
<li>
x = &quot;东经180度&quot;、y = &quot;北纬210度&quot;</li>
</ul>
<br />
这个时候就可以使用类模板，请看下面的代码：
<pre class="cpp">
template&lt;typename T1, typename T2&gt;  //这里不能有分号
class Point{
public:
    Point(T1 x, T2 y): m_x(x), m_y(y){ }
public:
    T1 getX() const;  //获取x坐标
    void setX(T1 x);  //设置x坐标
    T2 getY() const;  //获取y坐标
    void setY(T2 y);  //设置y坐标
private:
    T1 m_x;  //x坐标
    T2 m_y;  //y坐标
};</pre>
x 坐标和 y 坐标的数据类型不确定，借助类模板可以将数据类型参数化，这样就不必定义多个类了。
<blockquote>
注意：模板头和类头是一个整体，可以换行，但是中间不能有分号。</blockquote>
上面的代码仅仅是类的声明，我们还需要在类外定义成员函数。在类外定义成员函数时仍然需要带上模板头，格式为：
<p class="info-box">
template&lt;typename 类型参数1 , typename 类型参数2 , &hellip;&gt;<br />
返回值类型 类名&lt;类型参数1 , 类型参数2, ...&gt;::函数名(形参列表){<br />
&nbsp; &nbsp; //TODO:<br />
}</p>
第一行是模板头，第二行是函数头，它们可以合并到一行，不过为了让代码格式更加清晰，一般是将它们分成两行。<br />
<br />
下面就对 Point 类的成员函数进行定义：
<pre class="cpp">
template&lt;typename T1, typename T2&gt;  //模板头
T1 Point&lt;T1, T2&gt;::getX() const /*函数头*/ {
    return m_x;
}

template&lt;typename T1, typename T2&gt;
void Point&lt;T1, T2&gt;::setX(T1 x){
    m_x = x;
}

template&lt;typename T1, typename T2&gt;
T2 Point&lt;T1, T2&gt;::getY() const{
    return m_y;
}

template&lt;typename T1, typename T2&gt;
void Point&lt;T1, T2&gt;::setY(T2 y){
    m_y = y;
}</pre>
请读者仔细观察代码，除了 template 关键字后面要指明类型参数，类名 Point 后面也要带上类型参数，只是不加 typename 关键字了。另外需要注意的是，在类外定义成员函数时，template 后面的类型参数要和类声明时的一致。
<h2>
使用类模板创建对象</h2>
上面的两段代码完成了类的定义，接下来就可以使用该类创建对象了。使用类模板创建对象时，需要指明具体的数据类型。请看下面的代码：
<pre class="cpp">
Point&lt;int, int&gt; p1(10, 20);
Point&lt;int, float&gt; p2(10, 15.5);
Point&lt;float, char*&gt; p3(12.4, &quot;东经180度&quot;);</pre>
与函数模板不同的是，类模板在实例化时必须显式地指明数据类型，编译器不能根据给定的数据推演出数据类型。<br />
<br />
除了对象变量，我们也可以使用对象<a href='../c/80/80.html' target='_blank'>指针</a>的方式来实例化：
<pre class="cpp">
Point&lt;float, float&gt; *p1 = new Point&lt;float, float&gt;(10.6, 109.3);
Point&lt;char*, char*&gt; *p = new Point&lt;char*, char*&gt;(&quot;东经180度&quot;, &quot;北纬210度&quot;);</pre>
需要注意的是，赋值号两边都要指明具体的数据类型，且要保持一致。下面的写法是错误的：<br />
<pre class="cpp">
//赋值号两边的数据类型不一致
Point&lt;float, float&gt; *p = new Point&lt;float, int&gt;(10.6, 109);
//赋值号右边没有指明数据类型
Point&lt;float, float&gt; *p = new Point(10.6, 109);</pre>
<h2>
综合示例</h2>
【实例1】将上面的类定义和类实例化的代码整合起来，构成一个完整的示例，如下所示：
<pre class="cpp">
#include &lt;iostream&gt;
u<a href='https://c.biancheng.net/ref/sin.html' target='_blank'>sin</a>g namespace std;

template&lt;class T1, class T2&gt;  //这里不能有分号
class Point{
public:
    Point(T1 x, T2 y): m_x(x), m_y(y){ }
public:
    T1 getX() const;  //获取x坐标
    void setX(T1 x);  //设置x坐标
    T2 getY() const;  //获取y坐标
    void setY(T2 y);  //设置y坐标
private:
    T1 m_x;  //x坐标
    T2 m_y;  //y坐标
};

template&lt;class T1, class T2&gt;  //模板头
T1 Point&lt;T1, T2&gt;::getX() const /*函数头*/ {
    return m_x;
}

template&lt;class T1, class T2&gt;
void Point&lt;T1, T2&gt;::setX(T1 x){
    m_x = x;
}

template&lt;class T1, class T2&gt;
T2 Point&lt;T1, T2&gt;::getY() const{
    return m_y;
}

template&lt;class T1, class T2&gt;
void Point&lt;T1, T2&gt;::setY(T2 y){
    m_y = y;
}

int main(){
    Point&lt;int, int&gt; p1(10, 20);
    cout&lt;&lt;&quot;x=&quot;&lt;&lt;p1.getX()&lt;&lt;&quot;, y=&quot;&lt;&lt;p1.getY()&lt;&lt;endl;
 
    Point&lt;int, char*&gt; p2(10, &quot;东经180度&quot;);
    cout&lt;&lt;&quot;x=&quot;&lt;&lt;p2.getX()&lt;&lt;&quot;, y=&quot;&lt;&lt;p2.getY()&lt;&lt;endl;
 
    Point&lt;char*, char*&gt; *p3 = new Point&lt;char*, char*&gt;(&quot;东经180度&quot;, &quot;北纬210度&quot;);
    cout&lt;&lt;&quot;x=&quot;&lt;&lt;p3-&gt;getX()&lt;&lt;&quot;, y=&quot;&lt;&lt;p3-&gt;getY()&lt;&lt;endl;

    return 0;
}</pre>
运行结果：<br />
x=10, y=20<br />
x=10, y=东经180度<br />
x=东经180度, y=北纬210度<br />
<br />
在定义类型参数时我们使用了 class，而不是 typename，这样做的目的是让读者对两种写法都熟悉。<br />
<br />
【实例2】用类模板实现可变长数组。<br />
<pre class="cpp">
#include &lt;iostream&gt;
#include &lt;cstring&gt;
using namespace std;
template &lt;class T&gt;
class CArray
{
    int size; //数组元素的个数
    T *ptr; //指向动态分配的数组
public:
    CArray(int s = 0);  //s代表数组元素的个数
    CArray(CArray &amp; a);
    ~CArray();
    void push_back(const T &amp; v); //用于在数组尾部添加一个元素v
    CArray &amp; operator=(const CArray &amp; a); //用于数组对象间的赋值
    T length() { return size; }
    T &amp; operator[](int i)
    {//用以支持根据下标访问数组元素，如a[i] = 4;和n = a[i]这样的语句
        return ptr[i];
    }
};
template&lt;class T&gt;
CArray&lt;T&gt;::CArray(int s):size(s)
{
     if(s == 0)
         ptr = NULL;
    else
        ptr = new T[s];
}
template&lt;class T&gt;
CArray&lt;T&gt;::CArray(CArray &amp; a)
{
    if(!a.ptr) {
        ptr = NULL;
        size = 0;
        return;
    }
    ptr = new T[a.size];
    memcpy(ptr, a.ptr, sizeof(T ) * a.size);
    size = a.size;
}
template &lt;class T&gt;
CArray&lt;T&gt;::~CArray()
{
     if(ptr) delete [] ptr;
}
template &lt;class T&gt;
CArray&lt;T&gt; &amp; CArray&lt;T&gt;::operator=(const CArray &amp; a)
{ //赋值号的作用是使&quot;=&quot;左边对象里存放的数组，大小和内容都和右边的对象一样
    if(this == &amp; a) //防止a=a这样的赋值导致出错
    return * this;
    if(a.ptr == NULL) {  //如果a里面的数组是空的
        if( ptr )
            delete [] ptr;
        ptr = NULL;
        size = 0;
        return * this;
    }
     if(size &lt; a.size) { //如果原有空间够大，就不用分配新的空间
         if(ptr)
            delete [] ptr;
        ptr = new T[a.size];
    }
    memcpy(ptr,a.ptr,sizeof(T)*a.size);   
    size = a.size;
     return *this;
}
template &lt;class T&gt;
void CArray&lt;T&gt;::push_back(const T &amp; v)
{  //在数组尾部添加一个元素
    if(ptr) {
        T *tmpPtr = new T[size+1]; //重新分配空间
    memcpy(tmpPtr,ptr,sizeof(T)*size); //拷贝原数组内容
    delete []ptr;
    ptr = tmpPtr;
}
    else  //数组本来是空的
        ptr = new T[1];
    ptr[size++] = v; //加入新的数组元素
}
int main()
{
    CArray&lt;int&gt; a;
    for(int i = 0;i &lt; 5;++i)
        a.push_back(i);
    for(int i = 0; i &lt; a.length(); ++i)
        cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;;   
    return 0;
}</pre>
</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
<p style="margin-top:12px; text-align:center;">
<img src="../templets/new/images/material/qrcode_mp.png" alt="公众号二维码" width="160" /><br />
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="nice-arcs" class="box-bottom">
<h4>推荐阅读</h4>
<ul class="clearfix">
<li><a href="niz69i_4.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="tnnfqo_2.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="unnurw_2.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="3561.html" title="汇编语言CMP（比较）指令：比较整数" target="_blank">汇编语言CMP（比较）指令：比较整数</a></li>
<li><a href="vip_6059.html" title="Python函数返回多个值的方法（入门必读）" target="_blank">Python函数返回多个值的方法（入门必读）</a></li>
<li><a href="6114.html" title="Java注释：类、方法和字段注释" target="_blank">Java注释：类、方法和字段注释</a></li>
<li><a href="7834.html" title="Django QueryDict对象" target="_blank">Django QueryDict对象</a></li>
<li><a href="7838.html" title="MySQL存储函数详解" target="_blank">MySQL存储函数详解</a></li>
<li><a href="../numpy/array-create.html" title="Numpy创建数组" target="_blank">Numpy创建数组</a></li>
<li><a href="9431.html" title="Qt实现学生信息管理系统" target="_blank">Qt实现学生信息管理系统</a></li>
</ul>
</div>
</div>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 2318;
window.arcId = "95203z4g0Kj3z0YXKnV1QrMUIHi7kHFNACBhPmIg/uxwnuT2VRWYUEWITKg";
window.typeidChain = "49|19";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="8092_2.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="../sitemap/sitemap_3.html" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="https://c.biancheng.net/templets/new/images/logo_bottom.gif" alt="底部Logo" />
<span id="return-top"><b>↑</b></span>
</div>
<div id="addweixin-widget">
<p>
<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://c.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
<img src="../templets/new/images/material/qrcode_mp_2.png" alt="微信交流群" width="120" />
<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
</p>
<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/view/2317.html";
window.nextPageURL = "/view/2319.html";
</script>
<script src="../templets/new/script/jquery1.12.4.min.js"></script>
<script src="https://c.biancheng.net/templets/new/script/common.js"></script>
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
</body>
</html>