<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="renderer" content="webkit" />
<meta name="force-rendering" content="webkit"/>
<meta name="applicable-device" content="pc,mobile" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="format-detection" content="telephone=no" />
<link rel="shortcut icon" href="../favicon.ico" />
<link href="../templets/new/style/common.css" rel="stylesheet" />
<title>Spring MVC注解配置</title>
<meta name="description" content="除了传统的 XML 配置文件外，我们还可以通过注解+配置类的方式代替 web.xml 和 Spring MVC 的配置文件，来实现对 Spring MVC 的配置工作。本节，我们来详解介绍下如何通过注解来配置 Spring" />
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="../c_biancheng_default.html"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="../sitemap/sitemap_3.html" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="../fudao_biancheng_default.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="../view/niz69i.html" target="_blank"><span class="iconfont iconfont-chip"></span>嵌入式学习路线</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="../c_biancheng_default.html">
<img height="26" src="../templets/new/images/logo.png" alt="C语言中文网" />
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="../c_biancheng_default.html">首页</a></li>
<li><a href="../c/c_3.html">C语言教程</a></li>
<li><a href="../cplus/cplus.html">C++教程</a></li>
<li><a href="../python/python.html">Python教程</a></li>
<li><a href="../java/java_3.html">Java教程</a></li>
<li><a href="../linux_tutorial/linux_tutorial.html">Linux入门</a></li>
<li><a href="../sitemap/sitemap_3.html" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
<div id="sidebar" class="toggle-target">
<div id="contents">
<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="spring_mvc.html">Spring MVC</a></dt>
<dd>
<span class="channel-num">1</span>
<a href="9666.html">MVC模式是什么</a>
</dd>
<dd>
<span class="channel-num">2</span>
<a href="9667.html">Spring MVC是什么</a>
</dd>
<dd>
<span class="channel-num">3</span>
<a href="9668.html">第一个Spring MVC程序</a>
</dd>
<dd>
<span class="channel-num">4</span>
<a href="9669.html">Spring MVC工作流程</a>
</dd>
<dd>
<span class="channel-num">5</span>
<a href="9670.html">@Controller和@RequestMapping注解</a>
</dd>
<dd>
<span class="channel-num">6</span>
<a href="9671.html">Spring MVC获取请求参数</a>
</dd>
<dd>
<span class="channel-num">7</span>
<a href="9672.html">Spring MVC域对象共享数据</a>
</dd>
<dd>
<span class="channel-num">8</span>
<a href="9673.html">Spring MVC视图和视图解析器</a>
</dd>
<dd>
<span class="channel-num">9</span>
<a href="9674.html">Spring MVC请求转发与重定向</a>
</dd>
<dd>
<span class="channel-num">10</span>
<a href="9675.html">RESTful（REST风格）是什么</a>
</dd>
<dd>
<span class="channel-num">11</span>
<a href="9676.html">Spring MVC实现RESTful</a>
</dd>
<dd>
<span class="channel-num">12</span>
<a href="9677.html">Spring MVC类型转换器</a>
</dd>
<dd>
<span class="channel-num">13</span>
<a href="9678.html">Spring MVC格式化器</a>
</dd>
<dd>
<span class="channel-num">14</span>
<a href="9679.html">Spring MVC JSON数据交互</a>
</dd>
<dd>
<span class="channel-num">15</span>
<a href="9680.html">Spring MVC拦截器</a>
</dd>
<dd>
<span class="channel-num">16</span>
<a href="9681.html">Spring MVC拦截器实现用户登录权限验证</a>
</dd>
<dd>
<span class="channel-num">17</span>
<a href="9682.html">Spring MVC异常处理</a>
</dd>
<dd>
<span class="channel-num">18</span>
<a href="9683.html">Spring MVC文件上传</a>
</dd>
<dd>
<span class="channel-num">19</span>
<a href="9684.html">Spring MVC文件下载</a>
</dd>
<dd>
<span class="channel-num">20</span>
<a href="9685.html">Spring MVC注解配置</a>
</dd>
<dd>
<span class="channel-num">21</span>
<a href="9686.html">Spring MVC国际化</a>
</dd>
</div>
</div>
<div id="article-wrap">
<div id="article">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="../c_biancheng_default.html">首页</a> &gt; <a href="spring_mvc.html">Spring MVC</a></span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"></div>
<h1>Spring MVC注解配置</h1>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="ggxc-arctop-pc-1" class="ggxc-box"></div>
<div id="arc-body">除了传统的 XML 配置文件外，我们还可以通过&ldquo;注解+配置类&rdquo;的方式代替 web.xml 和 Spring MVC 的配置文件，来实现对 Spring MVC 的配置工作。本节，我们来详解介绍下如何通过注解来配置 Spring MVC。
<h2>
1. 使用初始化类代替 web.xml</h2>
我们知道，Spring MVC 本质就是对 Servlet 的进一步封装，其核心组件是一个 DispatcherServelt。DispatcherServelt 是 Spring MVC 中请求最先到达的地方，负责请求在其他各个组件间的传递和加工。在此之前，像 DispatcherServlet 这样的 Servlet，我们都是通过 web.xml 文件来进行配置的。<br />
<br />
除了 web.xml 外，我们还可以通过初始化类来实现对 DispatcherServlet 的配置。Servlet 容器在启动时，会自动查找类项目路径下实现了&nbsp;javax.servlet.ServletContainerInitializer 接口的初始化类。若找到，则使用该初始化类代替 web.xml，对 Servlet 容器的上下文进行配置。<br />
<br />
Spring 就为 ServletContainerInitializer&nbsp;接口提供了一个名为&nbsp;SpringServletContainerInitializer 的实现类，其部分源码如下。<br />
<pre class="java">
@HandlesTypes({WebApplicationInitializer.class})
public class SpringServletContainerInitializer implements ServletContainerInitializer {
    public SpringServletContainerInitializer() {
    }

    public void onStartup(@Nullable Set&lt;Class&lt;?&gt;&gt; webAppInitializerClasses, ServletContext servletContext) throws ServletException {
        &hellip;&hellip;
    }
}</pre>
<br />
我们看到，SpringServletContainerInitializer 类上使用了一个 @HandlesTypes 注解，该注解能够获取到所有实现了 WebApplicationInitializer 接口的类，然后赋值给 onStartup() 方法的 webAppInitializerClasses 参数。onStartup() 方法会借助 webAppInitializerClasses 参数调用 WebApplicationInitializer 实现类中的方法，以实现对 DispatcherServlet 和 Spring MVC 的配置工作。<br />
<br />
Spring 提供了一个 DispatcherServelt 的快速配置类&nbsp;org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer，它就是 WebApplicationInitializer 的实现类之一 ，其常用方法如下表。<br />
<br />
<table>
<tbody>
<tr>
<th>
方法</th>
<th>
说明</th>
</tr>
<tr>
<td>
protected abstract Class&lt;?&gt;[] getRootConfigClasses();</td>
<td>
该方法用于设置 Spring 的配置类。</td>
</tr>
<tr>
<td>
protected abstract Class&lt;?&gt;[] getServletConfigClasses();</td>
<td>
该方法用于设置 Spring MVC 的配置类。</td>
</tr>
<tr>
<td>
&nbsp;protected abstract String[] getServletMappings();</td>
<td>
该方法用于指定 DispatcherServelt 的映射规则，即 web.xml 中的 url-pattern。</td>
</tr>
<tr>
<td>
protected Filter[] getServletFilters()&nbsp;</td>
<td>
该方法用于添加各种过滤器（filter）。</td>
</tr>
</tbody>
</table>
<p>
&nbsp;</p>
<p>
如果我们自定义的初始化类继承了 AbstractAnnotationConfigDispatcherServletInitializer 并将其部署到 Servlet 容器中，Servvelt 容器会自动加载这个初始化类，并使用它来完成对&nbsp;DispatcherServlet 和 Spring MVC 的配置工作，示例代码如下。</p>
<pre class="java">
package net.biancheng.c.config;

import org.springframework.web.filter.CharacterEncodingFilter;
import org.springframework.web.filter.HiddenHttpMethodFilter;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

import javax.servlet.Filter;

public class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer {
    // 设置 Spring 的配置类
    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class[]{SpringConfig.class};
    }

    // 设置 Spring MVC 的配置类
    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class[]{WebConfig.class};
    }

    // 为 DispatcherServlet 指定映射规则，相当于 web.xml 中配置的 url-pattern
    @Override
    protected String[] getServletMappings() {
        return new String[]{&quot;/&quot;};
    }

    //添加过滤器
    @Override
    protected Filter[] getServletFilters() {
        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();
        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);
        characterEncodingFilter.setForceResponseEncoding(true);
        HiddenHttpMethodFilter hiddenHttpMethodFilter = new HiddenHttpMethodFilter();
        return new Filter[]{hiddenHttpMethodFilter};
    }
}</pre>
<h2>
2. 使用配置类代替 Spring 的配置文件</h2>
<p>
我们还可以使用一个标注了 @Configuration 注解的 Java 类（通常被称为&ldquo;配置类&rdquo;），来代替 Spring 的配置文件。<br />
<br />
在这个配置类中，我们可以定义多个被 @Bean 注解修饰的方法，这些方法与 Spring 配置文件中 &lt;bean&gt; 标签的作用一样，都是可以将指定的 Java 对象以 Bean 的形式交由 Spring 的 IoC 容器管理。&nbsp;&nbsp;<br />
<br />
例如，在 Spring 的 XML 配置文件中定义的一个 Student 类型 Bean，配置形式如下。</p>
<pre class="xml">
&lt;bean id=&quot;student&quot; class=&quot;net.biancheng.c.entity.Student&quot;&gt;
    &lt;property name=&quot;stuId&quot; value=&quot;1001&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;stuName&quot; value=&quot;小明&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;age&quot; value=&quot;18&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</pre>
<p>
<br />
上面的 Spring 配置可以通过 SpringConfig 配置类实现，代码如下。</p>
<pre class="java">
package net.biancheng.c.config;

import net.biancheng.c.entity.Student;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SpringConfig {

    //定义 Bean
    @Bean
    public Student student(){
        Student student = new Student();
        student.setStuId(&quot;1001&quot;);
        student.setStuName(&quot;小明&quot;);
        student.setAge(18);
        return student;
    }
}</pre>
<p>
&nbsp;</p>
在配置类中，@Bean 注解修饰的方法说明如下：
<ul>
<li>
方法名相当于 &lt;bean&gt; 标签的 id 属性。</li>
<li>
方法的返回值类型就相当于 &lt;bean&gt; 标签的 class 属性。</li>
<li>
若该方中存在参数，则该参数对象通常为 Spring 容器中的组件，Spring 会按照类型或参数名称注入该参数对象。</li>
</ul>
<h2>
3. 使用配置类代替 Spring MVC 的配置文件</h2>
我们还可以使用一个 @Configuration 注解的 Java 类（通常被称为&ldquo;配置类&rdquo;），来代替 Spring MVC 的配置文件。<br />
<br />
我们知道，Spring MVC 的配置项繁多，例如组件扫描、视图解析器、拦截器、类型转换器、异常解析器、文件上传解析器等。它们在配置类中的配置方式也不尽相同，大致可以被分为 3 种方式：
<ul>
<li>
实现 WebMvcConfigurer 接口</li>
<li>
使用 @EnableWebMvc、@ComponentScan 等注解</li>
<li>
使用 @Bean 注解</li>
</ul>
<h3>
实现 WebMvcConfigurer 接口</h3>
我们可以通过一个实现了 WebMvcConfigurer 接口的配置类（标注 @Configuration 的类）对 Spring MVC 的部分组件进行配置，例如拦截器、格式化程序、视图控制器等。<br />
<blockquote>
<p>
SpringBoot 1.5 及以前是通过继承 WebMvcConfigurerAdapter 抽象类来定制 Spring MVC 配置的，但在 SpringBoot 2.0 后，WebMvcConfigurerAdapter 抽象类就被弃用了，改为实现 WebMvcConfigurer 接口来定制 Spring MvVC 配置。</p>
</blockquote>
WebMvcConfigurer 是一个基于 Java&nbsp; 8 的接口，该接口定义了许多与 Spring MVC 相关的方法，其中大部分方法都是 default 类型的且都是空实现。因此我们只需要定义一个配置类实现 WebMvcConfigurer 接口，并重写相应的方法便可以实现对 Spring MVC 的配置。<br />
<br />
<table>
<tbody>
<tr>
<th>
方法</th>
<th>
说明</th>
</tr>
<tr>
<td>
default void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {}</td>
<td>
将静态文件交给&nbsp;Servlet 容器（Tomcat）内置的默认 Servlet 处理。</td>
</tr>
<tr>
<td>
default void addInterceptors(InterceptorRegistry registry) {}</td>
<td>
添加 Spring MVC 拦截器，对请求进行拦截处理。</td>
</tr>
<tr>
<td>
default void addResourceHandlers(ResourceHandlerRegistry registry) {}</td>
<td>
添加或修改静态资源（例如图片，js，css 等）映射；<br />
<br />
Spring Boot 默认设置的静态资源文件夹就是通过重写该方法设置的。</td>
</tr>
<tr>
<td>
default void addViewControllers(ViewControllerRegistry registry) {}</td>
<td>
主要用于实现无业务逻辑跳转，例如主页跳转，简单的请求重定向，错误页跳转等</td>
</tr>
<tr>
<td>
default void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {}</td>
<td>
用于配置默认的消息转换器（转换 HTTP 请求和响应）。</td>
</tr>
<tr>
<td>
default void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {}</td>
<td>
直接添加消息转换器，会关闭默认的消息转换器列表；<br />
<br />
实现该方法即可在不关闭默认转换器的起提下，新增一个自定义转换器。</td>
</tr>
<tr>
<td>
default void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {}</td>
<td>
配置异常解析器。</td>
</tr>
</tbody>
</table>
<h3>
使用 @EnableWebMvc、@ComponentScan 等注解</h3>
我们还可以在配置类中通过 @EnableWebMvc、@ComponentScan 等注解实现对 Spring MVC 的配置。<br />
<h4>
1) 使用 @ComponentScan 注解开启组件扫描</h4>
我们知道，在 Spring 和 Spring MVC 的配置文件中，开启组件扫描功能的配置内容如下。<br />
<pre class="xml" shownum="false">
&lt;!--开启组件扫描--&gt;
&lt;context:component-scan base-package=&quot;net.biancheng.c&quot;&gt;&lt;/context:component-scan&gt;</pre>
<p>
<br />
使用配置类开启组件扫描功能的代码如下。</p>
<pre class="java">
@Configuration
//扫描组件
@ComponentScan(&quot;net.biancheng.c&quot;)
public class WebConfig implements WebMvcConfigurer {
}</pre>
<h4>
2) 使用 @EnableWebMvc 注解开启 Spring MVC 注解驱动</h4>
我们可以在 Spring MVC 配置类上使用&nbsp;@EnableWebMvc 注解代替 &lt;mvc:annotation-driven /&gt; 标签，开启 Spring MVC 的注解驱动，示例代码如下。
<pre class="java">
@Configuration
//开启组件扫描
@ComponentScan(&quot;net.biancheng.c&quot;)
//开启 Spring MVC注解驱动
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
}</pre>
<h3>
使用 @Bean 注解</h3>
我们还可以在配置类中通过 @Bean 注解对 Spring MVC 组件进行配置。<br />
<h4>
1) 使用 @Bean 注解配置 Thymeleaf 视图解析器</h4>
在 Spring MVC 的配置类中，使用 @Bean 注解可以实现对视图解析器的配置。<br />
<br />
以 Thymeleaf 视图解析器为例，由于 Spring MVC 的配置文件 Thymeleaf 视图解析器的配置方式如下。
<pre class="xml">
&lt;!-- 配置 Thymeleaf 视图解析器 --&gt;
&lt;bean id=&quot;viewResolver&quot;
      class=&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;&gt;
    &lt;property name=&quot;order&quot; value=&quot;1&quot;/&gt;
    &lt;property name=&quot;characterEncoding&quot; value=&quot;UTF-8&quot;/&gt;
    &lt;property name=&quot;templateEngine&quot;&gt;
    &lt;bean class=&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;&gt;
        &lt;property name=&quot;templateResolver&quot;&gt;
        &lt;bean class=&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;&gt;
            &lt;!-- 视图前缀 --&gt;
            &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/templates/&quot;/&gt;
            &lt;!-- 视图后缀 --&gt;
            &lt;property name=&quot;suffix&quot; value=&quot;.html&quot;/&gt;
            &lt;property name=&quot;templateMode&quot; value=&quot;HTML5&quot;/&gt;
            &lt;property name=&quot;characterEncoding&quot; value=&quot;UTF-8&quot;/&gt;
        &lt;/bean&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre>
<br />
从上面的配置内容可以看出，Thymeleaf 视图解析器配置起来还是比较麻烦的，共涉及了 3 种类型的 Bean，它们分别是&nbsp;ThymeleafViewResolver、SpringTemplateEngine 以及&nbsp;SpringResourceTemplateResolver。其中&nbsp;SpringResourceTemplateResolver 的 Bean 是以内部 Bean 的形式，通过 &lt;property&gt; 标签注入到&nbsp;SpringTemplateEngine 类型的 Bean 中的；而&nbsp;SpringTemplateEngine 的 Bean 又是以内部 Bean 的形式，通过 &lt;property&gt; 标签注入到 ThymeleafViewResolver 类型的 Bean 中的。<br />
<br />
基于以上情况，我们可以在 Spring MVC 的配置类中，分别定义 3 个不同的 @Bean 注解修饰的方法，代码如下。
<pre class="java">
@Configuration
//扫描组件
@ComponentScan(&quot;net.biancheng.c&quot;)
//开启MVC注解驱动
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    //配置生成模板解析器
    @Bean
    public ITemplateResolver templateResolver() {
        WebApplicationContext webApplicationContext =
                ContextLoader.getCurrentWebApplicationContext();
        // ServletContextTemplateResolver需要一个ServletContext作为构造参数，可通过 WebApplicationContext
        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(webApplicationContext.getServletContext());
        templateResolver.setPrefix(&quot;/WEB-INF/templates/&quot;);
        templateResolver.setSuffix(&quot;.html&quot;);
        templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);
        templateResolver.setTemplateMode(TemplateMode.HTML);
        return templateResolver;
    }

    //生成模板引擎并为模板引擎注入模板解析器
    @Bean
    public SpringTemplateEngine templateEngine(ITemplateResolver templateResolver) {
        SpringTemplateEngine templateEngine = new SpringTemplateEngine();
        templateEngine.setTemplateResolver(templateResolver);
        return templateEngine;
    }

    //生成视图解析器并为解析器注入模板引擎
    @Bean
    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) {
        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();
        viewResolver.setCharacterEncoding(&quot;UTF-8&quot;);
        viewResolver.setTemplateEngine(templateEngine);
        return viewResolver;
    }
}</pre>
<h4>
2) 使用 @Bean 注解配置文件上传解析器</h4>
我们知道，想要实现文件上传功能，就需要对 Spring MVC 的文件上传解析器进行配置。<br />
<br />
在 Spring MVC 的配置文件中，文件上传解析器的配置形式如下。
<pre class="xml">
&lt;!--配置文件上传解析器--&gt;
&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;
    &lt;!--设置上传文件的默认编码格式--&gt;
    &lt;property name=&quot;defaultEncoding&quot; value=&quot;UTF-8&quot;&gt;&lt;/property&gt;
    &lt;!--设置允许上传的最大长度--&gt;
    &lt;property name=&quot;maxUploadSize&quot; value=&quot;10485760&quot;&gt;&lt;/property&gt;
&lt;/bean </pre>
<br />
在 Spring MVC 的配置类中，我们可以通过 @Bean 注解来对文件上传解析器进行配置，代码如下。
<pre class="java">
@Configuration
//扫描组件
@ComponentScan(&quot;net.biancheng.c&quot;)
//开启MVC注解驱动
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    //配置文件上传解析器
    @Bean
    public CommonsMultipartResolver multipartResolver() {
        CommonsMultipartResolver commonsMultipartResolver = new CommonsMultipartResolver();
        commonsMultipartResolver.setDefaultEncoding(&quot;UTF-8&quot;);
        commonsMultipartResolver.setMaxUploadSize(1024*1024*10);
        return commonsMultipartResolver;
    }
}</pre>
<h2>
示例</h2>
下面，我们通过一个实例，来演示下如何通过全注解方式完成对 Spring MVC 工程的配置，具体步骤如下。<br />
<br />
1. 新建一个名为&nbsp;springmvc-annotation-config-demo 的 Web 工程，将 Spring MVC 和 Commons-upload 的相关依赖引入到该工程中。<br />
<br />
2. 在 net.biancheng.c.config 包下，创建一个名为&nbsp;WebInit 的初始化类代替 web.xml，代码如下。
<pre class="java">
package net.biancheng.c.config;

import org.springframework.web.filter.CharacterEncodingFilter;
import org.springframework.web.filter.HiddenHttpMethodFilter;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

import javax.servlet.Filter;

//初始化类，代替 web.xml
public class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer {
    //设置 Spring 的配置类
    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class[]{SpringConfig.class};
    }

    //设置 Spring MVC 的配置类
    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class[]{WebConfig.class};
    }

    //为 DispatcherServlet 指定映射规则，相当于 web.xml 中配置的 url-pattern
    @Override
    protected String[] getServletMappings() {
        return new String[]{&quot;/&quot;};
    }

    //添加过滤器
    @Override
    protected Filter[] getServletFilters() {
        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();
        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);
        characterEncodingFilter.setForceResponseEncoding(true);
        HiddenHttpMethodFilter hiddenHttpMethodFilter = new HiddenHttpMethodFilter();
        return new Filter[]{characterEncodingFilter, hiddenHttpMethodFilter};
    }

}</pre>
<br />
2. 在&nbsp;net.biancheng.c.config 包下，新建一个名为&nbsp;SpringConfig 的配置类代替 Spring 的配置文件，代码如下。&nbsp;<br />
<pre class="java">
package net.biancheng.c.config;

import net.biancheng.c.entity.User;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.Date;
//创建一个配置类，代替 Spring 的配置文件
@Configuration
public class SpringConfig {

    //定义 User 类型的 Bean，交由 Spring 容器管理
    @Bean
    public User User(){
        User user = new User();
        user.setUserName(&quot;小明&quot;);
        user.setBirth(new Date());
        user.setHeight(180.0);
        return user;
    }
}</pre>
<br />
3. &nbsp;在 net.biancheng.c.config 包下，新建一个名为 WebConfig 的配置类代替 Spring MVC 的配置文件，代码如下。&nbsp;<br />
<pre class="java">
package net.biancheng.c.config;

import net.biancheng.c.converter.MyDateConverter;
import net.biancheng.c.interceptor.MyInterceptor;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

import org.springframework.format.FormatterRegistry;

import org.springframework.web.context.ContextLoader;
import org.springframework.web.context.WebApplicationContext;
import org.springframework.web.multipart.commons.CommonsMultipartResolver;
import org.springframework.web.servlet.HandlerExceptionResolver;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.*;
import org.springframework.web.servlet.handler.SimpleMappingExceptionResolver;
import org.thymeleaf.spring5.SpringTemplateEngine;
import org.thymeleaf.spring5.view.ThymeleafViewResolver;
import org.thymeleaf.templatemode.TemplateMode;
import org.thymeleaf.templateresolver.ITemplateResolver;
import org.thymeleaf.templateresolver.ServletContextTemplateResolver;

import java.util.List;
import java.util.Properties;

//配置类代替 Spring MVC 的配置文件
@Configuration
//扫描组件
@ComponentScan(&quot;net.biancheng.c&quot;)
//开启MVC注解驱动
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    //使用默认的servlet处理静态资源
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    //配置文件上传解析器
    @Bean
    public CommonsMultipartResolver multipartResolver() {
        CommonsMultipartResolver commonsMultipartResolver = new CommonsMultipartResolver();
        commonsMultipartResolver.setDefaultEncoding(&quot;UTF-8&quot;);
        commonsMultipartResolver.setMaxUploadSize(1024 * 1024 * 10);
        return commonsMultipartResolver;
    }

    //配置拦截器
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        MyInterceptor myInterceptor = new MyInterceptor();
        registry.addInterceptor(myInterceptor).addPathPatterns(&quot;/**&quot;).excludePathPatterns(&quot;/&quot;);
    }

    //配置视图控制
    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        registry.addViewController(&quot;/&quot;).setViewName(&quot;user&quot;);
    }

    //配置异常映射
    @Override
    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {
        SimpleMappingExceptionResolver exceptionResolver = new
                SimpleMappingExceptionResolver();
        Properties prop = new Properties();
        prop.setProperty(&quot;java.lang.Exception&quot;, &quot;error&quot;);
        //设置异常映射
        exceptionResolver.setExceptionMappings(prop);
        //设置共享异常信息的键
        exceptionResolver.setExceptionAttribute(&quot;ex&quot;);
        resolvers.add(exceptionResolver);
    }

    //配置生成模板解析器
    @Bean
    public ITemplateResolver templateResolver() {
        WebApplicationContext webApplicationContext =
                ContextLoader.getCurrentWebApplicationContext();
        // ServletContextTemplateResolver需要一个ServletContext作为构造参数，可通过 WebApplicationContext
        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(webApplicationContext.getServletContext());
        templateResolver.setPrefix(&quot;/WEB-INF/templates/&quot;);
        templateResolver.setSuffix(&quot;.html&quot;);
        templateResolver.setCharacterEncoding(&quot;UTF-8&quot;);
        templateResolver.setTemplateMode(TemplateMode.HTML);
        return templateResolver;
    }

    //生成模板引擎并为模板引擎注入模板解析器
    @Bean
    public SpringTemplateEngine templateEngine(ITemplateResolver templateResolver) {
        SpringTemplateEngine templateEngine = new SpringTemplateEngine();
        templateEngine.setTemplateResolver(templateResolver);
        return templateEngine;
    }

    //生成视图解析器并未解析器注入模板引擎
    @Bean
    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) {
        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();
        viewResolver.setCharacterEncoding(&quot;UTF-8&quot;);
        viewResolver.setTemplateEngine(templateEngine);
        return viewResolver;
    }

    //添加类型转换器和格式化器
    @Override
    public void addFormatters(FormatterRegistry registry) {
        MyDateConverter myDateConverter = new MyDateConverter();
        registry.addConverter(myDateConverter);
    }
}</pre>
<br />
自此，我们就完成了该项目所有的配置工作，接下来我们就通过一些操作来验证下，这些配置是否生效。<br />
<br />
4. 在&nbsp;net.biancheng.c.entity 包下，新建一个名为 User 的类，代码如下。<br />
<pre class="java">
package net.biancheng.c.entity;

import org.springframework.web.multipart.MultipartFile;

import java.util.Date;
import java.util.List;

/**
* 实体类 User
*/
public class User {
    private String userName;
    private Date birth;
    private Double height;
    private List&lt;MultipartFile&gt; photos;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public Date getBirth() {
        return birth;
    }

    public void setBirth(Date birth) {
        this.birth = birth;
    }

    public Double getHeight() {
        return height;
    }

    public void setHeight(Double height) {
        this.height = height;
    }

    public List&lt;MultipartFile&gt; getPhotos() {
        return photos;
    }

    public void setPhotos(List&lt;MultipartFile&gt; photos) {
        this.photos = photos;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;userName=&#39;&quot; + userName + &#39;\&#39;&#39; +
                &quot;, birth=&quot; + birth +
                &quot;, height=&quot; + height +
                &quot;, photos=&quot; + photos +
                &#39;}&#39;;
    }
}</pre>
<br />
5. 在&nbsp;net.biancheng.c.converter 包下，创建一个名为&nbsp;MyDateConverter 的自定义类型转换器，代码如下。<br />
<pre class="java">
package net.biancheng.c.converter;

import org.springframework.core.convert.converter.Converter;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
* 自定义日期转换器
*/
public class MyDateConverter implements Converter&lt;String, Date&gt; {
    private String datePatten = &quot;yyyy-MM-dd&quot;;

    @Override
    public Date convert(String source) {
        System.out.println(&quot;自定义的类型转换器生效；前端页面传递过来的时间为：&quot; + source);
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(datePatten);
        try {
            return simpleDateFormat.parse(source);
        } catch (ParseException e) {
            throw new IllegalArgumentException(&quot;无效的日期格式，请使用正确的日期格式&quot; + datePatten);
        }
    }
}</pre>
&nbsp;<br />
6. 在&nbsp;net.biancheng.c.interceptor 包下，创建一个自定义的拦截器&nbsp;MyInterceptor，代码如下。
<pre class="java">
package net.biancheng.c.interceptor;

import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

//自定义拦截器
public class MyInterceptor implements HandlerInterceptor {

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        System.out.println(&quot;拦截器 MyInterceptor 成功拦截请求：preHandle 执行&quot;);
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        System.out.println(&quot;拦截器 MyInterceptor 成功拦截请求：postHandle 执行&quot;);
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        System.out.println(&quot;拦截器 MyInterceptor 成功拦截请求：afterCompletion 执行&quot;);
    }
}</pre>
<br />
7. 在&nbsp;net.biancheng.c.controller 包下，创建一个名为&nbsp;TestController 的控制器类，代码如下。<br />
<pre class="java">
package net.biancheng.c.controller;

import net.biancheng.c.entity.User;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.multipart.MultipartFile;

import javax.annotation.Resource;
import javax.servlet.http.HttpServletRequest;
import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

@Controller
public class TestController {
    @Resource
    private User user;

    /**
     * 测试 Spring 配置是否生效
     *
     * @return
     */
    @ResponseBody
    @GetMapping(&quot;/test&quot;)
    public User get() {
        return user;
    }

    /**
     * 测试异常映射是否生效
     *
     * @return
     */
    @GetMapping(&quot;/testException&quot;)
    public User get2() {
        int a = 10 / 0;
        return user;
    }


    @RequestMapping(value = &quot;/user&quot;, method = RequestMethod.POST)
    public String login(User user, HttpServletRequest request, Model model) {
        List&lt;String&gt; newFileNameList = new ArrayList&lt;&gt;();
        List&lt;MultipartFile&gt; photos = user.getPhotos();
        for (MultipartFile photo : photos) {
            String realPath = request.getServletContext().getRealPath(&quot;/upload/&quot;);
            System.out.println(realPath);
            File fileDir = new File(realPath);
            if (!fileDir.exists()) {
                fileDir.mkdir();
            }
            String filename = photo.getOriginalFilename();
            System.err.println(&quot;正在上传的图片为：&quot; + filename);
            String newFileName = UUID.randomUUID() + filename;

            try {
                //将文件保存指定目录
                photo.transferTo(new File(realPath + newFileName));
            } catch (Exception e) {
                e.printStackTrace();
            }
            newFileNameList.add(newFileName);
        }
        System.out.println(user);
        model.addAttribute(&quot;type&quot;, &quot;success&quot;);
        model.addAttribute(&quot;user&quot;, user);
        model.addAttribute(&quot;filePath&quot;, &quot;/upload/&quot;);
        model.addAttribute(&quot;fileNameList&quot;, newFileNameList);
        return &quot;success&quot;;
    }
}</pre>
<br />
8. 在 webapp 下新建一个 js 目录，并将&nbsp;jquery-3.6.0.min.js 引入该目录下。<br />
<br />
9. 在 webapp/WEB-INF 下新建一个 templates 目录，并在该目录下创建一个 user.html，代码如下。<br />
<pre class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;C语言中文网&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form th:action=&quot;@{/user}&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;姓名：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;userName&quot; required&gt;&lt;br&gt;&lt;/td&gt;
        &lt;/tr&gt;

        &lt;tr&gt;
            &lt;td&gt;生日：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&quot;date&quot; name=&quot;birth&quot; required&gt;&lt;br&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;身高：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;height&quot; required&gt;&lt;br&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;照片：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&quot;file&quot; name=&quot;photos&quot; multiple=&quot;multiple&quot; required&gt;&lt;br&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan=&quot;2&quot; align=&quot;center&quot;&gt;
                &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;
                &lt;input type=&quot;reset&quot; value=&quot;重置&quot;&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<br />
10. 在 webapp/WEB-INF/templates 目录下，新建一个&nbsp;success.html，代码如下。<br />
<pre class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;C语言中文网&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;用户名：&lt;/td&gt;
        &lt;td th:text=&quot;${user.getUserName()}&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;生日：&lt;/td&gt;
        &lt;td th:text=&quot;${#dates.format(user.getBirth(),&#39;yyyy-MM-dd&#39;)}&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;身高：&lt;/td&gt;
        &lt;td th:text=&quot;${user.getHeight()}&quot;&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;照片：&lt;/td&gt;
        &lt;td th:each=&quot;p:${fileNameList}&quot;&gt;
            &lt;img th:src=&quot;${#servletContext.getContextPath()}+${filePath}+${p}&quot; width=&#39;200px&#39; height=&#39;200px&#39;/&gt;&lt;br&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<br />
11.&nbsp;在 webapp/WEB-INF/templates 目录下，新建一个 error.html，代码如下。<br />
<pre class="html">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;程序发生异常！&lt;/h1&gt;
&lt;h1 th:text=&quot;${ex}&quot;&gt;&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<br />
12. 将&nbsp;springmvc-annotation-config-demo 部署到 Tomcat 服务器中，启动 Tomcat，使用浏览器访问&ldquo;http://localhost:8080/springmvc-annotation-config-demo/&rdquo;，结果如下图。<br />
<br />
<div style="text-align: center;">
<img alt="" src="../uploads/allimg/220729/0331532620-0.png" /><br />
图1：注解配置-1</div>
<br />
13. 在表单中填写响应的信息，并上传三种图片，如下图。<br />
<br />
<div style="text-align: center;">
<img alt="" src="../uploads/allimg/220729/03315324M-1.png" /><br />
图2：注解配置-2</div>
14. 点击下方的&ldquo;提交&rdquo;按钮，结果如下图。<br />
<br />
<div style="text-align: center;">
<img alt="" src="../uploads/allimg/220729/03315344X-2.png" /><br />
图3：注解配置-3</div>
<br />
15. 使用浏览器访问&ldquo;http://localhost:8080/springmvc-annotation-config-demo/test&rdquo;，结果如下。
<pre class="info-box">
{&quot;userName&quot;:&quot;小明&quot;,&quot;birth&quot;:1649402504930,&quot;height&quot;:180.0,&quot;photos&quot;:null}</pre>
<br />
16.&nbsp;使用浏览器访问&ldquo;http://localhost:8080/springmvc-annotation-config-demo/testException&rdquo;，结果如下。
<pre class="info-box">
程序发生异常！
java.lang.ArithmeticException: / by zero</pre>
17.&nbsp;使用浏览器访问&ldquo;http://localhost:8080/springmvc-annotation-config-demo/js/jquery-3.6.0.min.js&rdquo;，对静态文件 jquery-3.6.0.min.js 进行访问，结果如下。<br />
<br />
<div style="text-align: center;">
<img alt="" src="../uploads/allimg/220729/0331533109-3.png" /><br />
图4：访问静态文件</div>
</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。内含一款搜索神器，免费下载全网书籍和视频。</p>
<p style="margin-top:12px; text-align:center;">
<img src="../templets/new/images/material/qrcode_mp.png" alt="公众号二维码" width="160" /><br />
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div class="pre-next-page clearfix">&nbsp;</div>
<div id="nice-arcs" class="box-bottom">
<h4>推荐阅读</h4>
<ul class="clearfix">
<li><a href="../view/niz69i_4.html" title="一套完整的嵌入式开发学习路线（高薪就业版）" target="_blank">一套完整的嵌入式开发学习路线（高薪就业版）</a></li>
<li><a href="../view/tnnfqo_2.html" title="一套课程卖1万，TMD太贵了！" target="_blank">一套课程卖1万，TMD太贵了！</a></li>
<li><a href="../view/unnurw_2.html" title="跑了3000公里，见了一位大佬" target="_blank">跑了3000公里，见了一位大佬</a></li>
<li><a href="../view/964.html" title="Linux LANG变量设置：定义系统的主语系环境" target="_blank">Linux LANG变量设置：定义系统的主语系环境</a></li>
<li><a href="../view/vip_1741.html" title="如何在手机上编写C语言代码？" target="_blank">如何在手机上编写C语言代码？</a></li>
<li><a href="../view/2293.html" title="Python MetaClass元类详解" target="_blank">Python MetaClass元类详解</a></li>
<li><a href="../view/3856.html" title="常用数据库有哪些（附带数据库排名）？" target="_blank">常用数据库有哪些（附带数据库排名）？</a></li>
<li><a href="../view/6540.html" title="Java接口（Interface）的定义和实现" target="_blank">Java接口（Interface）的定义和实现</a></li>
<li><a href="../redis/hyperloglog.html" title="Redis HyperLoglog基数统计" target="_blank">Redis HyperLoglog基数统计</a></li>
<li><a href="../c/abort.html" title="C语言abort()：立即终止程序执行" target="_blank">C语言abort()：立即终止程序执行</a></li>
</ul>
</div>
</div>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 9685;
window.arcId = "5f1f4tvexTFgkPtzazhefrALDRhvhLhpQTGqes6d0eaZdYJLZQyzw9AxBVY";
window.typeidChain = "296";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="../view/8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="../view/8092_2.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="../view/8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="../view/9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="../view/8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="../sitemap/sitemap_3.html" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="../templets/new/images/gongan.png" alt="公安备案图标" /><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="https://c.biancheng.net/templets/new/images/logo_bottom.gif" alt="底部Logo" />
<span id="return-top"><b>↑</b></span>
</div>
<div id="addweixin-widget">
<p>
<script type="text/javascript">
			/*var suffix = 'c';
			var thisMin = (new Date()).getMinutes();
			if(thisMin>=40){
				suffix = 'd';
			}else if(thisMin>=20){
				suffix = 'e';
			}else{
				suffix = 'c';
			}
			document.write('<img src="https://c.biancheng.net/templets/new/images/material/qrcode_wx_'%20+%20suffix%20+'.png?v=1.7.07" alt="微信交流群" width="120" /><br />');*/
		</script>
<img src="../templets/new/images/material/qrcode_mp_2.png" alt="微信交流群" width="120" />
<span>关注微信公众号，加入官方交流群。内含一款搜索神器，免费下载全网书籍和视频。</span>
</p>
<span id="close-addweixin-widget" class="iconfont iconfont-close"></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.7.07";
window.prePageURL = "/spring_mvc/9684.html";
window.nextPageURL = "/spring_mvc/9686.html";
</script>
<script src="../templets/new/script/jquery1.12.4.min.js"></script>
<script src="https://c.biancheng.net/templets/new/script/common.js"></script>
<span style="display: none;">
<script charset="UTF-8" id="LA_COLLECT" src="https://sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"KDf6QzBhogyQjall",ck:"KDf6QzBhogyQjall",autoTrack:true})</script>
</span>
</body>
</html>